[å‰è¨€](#å‰è¨€)[ä¸€ã€å­¦ä¹ æŒ‡å—](#ä¸€å­¦ä¹ æŒ‡å—)[ä¸€ã€Javaé›†åˆå­¦ä¹ æŒ‡å—](#ä¸€javaé›†åˆå­¦ä¹ æŒ‡å—)[1.1å­¦ä¹ ä¸€é¡¹æŠ€æœ¯ä¹‹å‰ï¼Œå¿…é¡»çŸ¥é“ä¸ºä»€ä¹ˆè¦å­¦å®ƒï¼](#11å­¦ä¹ ä¸€é¡¹æŠ€æœ¯ä¹‹å‰å¿…é¡»çŸ¥é“ä¸ºä»€ä¹ˆè¦å­¦å®ƒ)[1.2å¦‚ä½•å…¥é—¨å­¦ä¹ Javaé›†åˆ](#12å¦‚ä½•å…¥é—¨å­¦ä¹ javaé›†åˆ)[1.3 é›†åˆè¿›é˜¶ä¸é¢è¯•](#13-é›†åˆè¿›é˜¶ä¸é¢è¯•)[äºŒã€Collection](#äºŒcollection)[ä¸€ã€é›†åˆ(Collection)ä»‹ç»](#ä¸€é›†åˆcollectionä»‹ç»)[1.1ä¸ºä»€ä¹ˆéœ€è¦Collection](#11ä¸ºä»€ä¹ˆéœ€è¦collection)[1.2æ•°ç»„å’Œé›†åˆçš„åŒºåˆ«](#12æ•°ç»„å’Œé›†åˆçš„åŒºåˆ«)[1.3Collectionçš„ç”±æ¥ä¸åŠŸèƒ½](#13collectionçš„ç”±æ¥ä¸åŠŸèƒ½)[äºŒã€è¿­ä»£å™¨(Iterator)ä»‹ç»](#äºŒè¿­ä»£å™¨iteratorä»‹ç»)[ä¸‰ã€Listé›†åˆä»‹ç»](#ä¸‰listé›†åˆä»‹ç»)[3.1Listé›†åˆå¸¸ç”¨å­ç±»](#31listé›†åˆå¸¸ç”¨å­ç±»)[å››ã€Seté›†åˆä»‹ç»](#å››seté›†åˆä»‹ç»)[4.1Seté›†åˆå¸¸ç”¨å­ç±»](#41seté›†åˆå¸¸ç”¨å­ç±»)[ä¸‰ã€Listé›†åˆ](#ä¸‰listé›†åˆ)[ä¸€ã€ArrayListè§£æ](#ä¸€arraylistè§£æ)[1.1æ„é€ æ–¹æ³•](#11æ„é€ æ–¹æ³•)[1.2Addæ–¹æ³•](#12addæ–¹æ³•)[1.2.1add(E e)](#121adde-e)[1.2.2add(int index, E element)](#122addint-index-e-element)[1.3 getæ–¹æ³•](#13-getæ–¹æ³•)[1.4 setæ–¹æ³•](#14-setæ–¹æ³•)[1.5removeæ–¹æ³•](#15removeæ–¹æ³•)[1.6ç»†èŠ‚å†è¯´æ˜](#16ç»†èŠ‚å†è¯´æ˜)[äºŒã€Vectorä¸ArrayListåŒºåˆ«](#äºŒvectorä¸arrayliståŒºåˆ«)[ä¸‰ã€LinkedListè§£æ](#ä¸‰linkedlistè§£æ)[3.1æ„é€ æ–¹æ³•](#31æ„é€ æ–¹æ³•)[3.2addæ–¹æ³•](#32addæ–¹æ³•)[3.3removeæ–¹æ³•](#33removeæ–¹æ³•)[3.4getæ–¹æ³•](#34getæ–¹æ³•)[3.5setæ–¹æ³•](#35setæ–¹æ³•)[å››ã€Listé›†åˆæ€»ç»“](#å››listé›†åˆæ€»ç»“)[å››ã€Mapé›†åˆ](#å››mapé›†åˆ)[ä¸€ã€Mapä»‹ç»](#ä¸€mapä»‹ç»)[1.1ä¸ºä»€ä¹ˆéœ€è¦Map](#11ä¸ºä»€ä¹ˆéœ€è¦map)[1.2Mapä¸Collectionçš„åŒºåˆ«](#12mapä¸collectionçš„åŒºåˆ«)[1.3Mapçš„åŠŸèƒ½](#13mapçš„åŠŸèƒ½)[äºŒã€æ•£åˆ—è¡¨ä»‹ç»](#äºŒæ•£åˆ—è¡¨ä»‹ç»)[2.1æ•£åˆ—è¡¨å·¥ä½œåŸç†](#21æ•£åˆ—è¡¨å·¥ä½œåŸç†)[ä¸‰ã€çº¢é»‘æ ‘ä»‹ç»](#ä¸‰çº¢é»‘æ ‘ä»‹ç»)[3.1å›é¡¾äºŒå‰æŸ¥æ‰¾æ ‘](#31å›é¡¾äºŒå‰æŸ¥æ‰¾æ ‘)[3.2çŸ¥æ–°2-3æ ‘](#32çŸ¥æ–°2-3æ ‘)[3.3ä»2-3æ ‘åˆ°çº¢é»‘æ ‘](#33ä»2-3æ ‘åˆ°çº¢é»‘æ ‘)[3.4çº¢é»‘æ ‘åŸºç¡€çŸ¥è¯†](#34çº¢é»‘æ ‘åŸºç¡€çŸ¥è¯†)[äº”ã€HashMap](#äº”hashmap)[ä¸€ã€HashMapå‰–æ](#ä¸€hashmapå‰–æ)[1.1HashMapæ„é€ æ–¹æ³•](#11hashmapæ„é€ æ–¹æ³•)[1.2putæ–¹æ³•](#12putæ–¹æ³•)[1.3getæ–¹æ³•](#13getæ–¹æ³•)[1.4removeæ–¹æ³•](#14removeæ–¹æ³•)[äºŒã€HashMapä¸Hashtableå¯¹æ¯”](#äºŒhashmapä¸hashtableå¯¹æ¯”)[ä¸‰ã€HashMapæ€»ç»“](#ä¸‰hashmapæ€»ç»“)[å…­ã€LinkedHashMap](#å…­linkedhashmap)[ä¸€ã€LinkedHashMap](#ä¸€linkedhashmap)[1.1LinkedHashMapçš„åŸŸ](#11linkedhashmapçš„åŸŸ)[1.2LinkedHashMapé‡å†™çš„æ–¹æ³•](#12linkedhashmapé‡å†™çš„æ–¹æ³•)[1.3æ„é€ æ–¹æ³•](#13æ„é€ æ–¹æ³•)[1.4putæ–¹æ³•](#14putæ–¹æ³•)[1.5getæ–¹æ³•](#15getæ–¹æ³•)[1.6removeæ–¹æ³•](#16removeæ–¹æ³•)[1.7éå†çš„æ–¹æ³•](#17éå†çš„æ–¹æ³•)[äºŒã€LinkedHashMapæ€»ç»“](#äºŒlinkedhashmapæ€»ç»“)[ä¸ƒã€TreeMap](#ä¸ƒtreemap)[ä¸€ã€TreeMapå‰–æ](#ä¸€treemapå‰–æ)[1.1TreeMapçš„åŸŸ](#11treemapçš„åŸŸ)[1.2TreeMapæ„é€ æ–¹æ³•](#12treemapæ„é€ æ–¹æ³•)[1.3putæ–¹æ³•](#13putæ–¹æ³•)[1.4getæ–¹æ³•](#14getæ–¹æ³•)[1.5removeæ–¹æ³•](#15removeæ–¹æ³•-n855)[1.6éå†æ–¹æ³•](#16éå†æ–¹æ³•)[äºŒã€TreeMapæ€»ç»“](#äºŒtreemapæ€»ç»“)[å…«ã€ConcurrentHashMap](#å…«concurrenthashmap)[ä¸€ã€ConCurrentHashMapå‰–æ](#ä¸€concurrenthashmapå‰–æ)[1.1åˆè¯†ConCurrentHashMap](#11åˆè¯†concurrenthashmap)[1.2JDK1.7åº•å±‚å®ç°](#12jdk17åº•å±‚å®ç°)[1.3æœ‰äº†Hashtableä¸ºå•¥éœ€è¦ConCurrentHashMap](#13æœ‰äº†hashtableä¸ºå•¥éœ€è¦concurrenthashmap)[1.4CASç®—æ³•å’Œvolatileç®€å•ä»‹ç»](#14casç®—æ³•å’Œvolatileç®€å•ä»‹ç»)[1.5ConCurrentHashMapåŸŸ](#15concurrenthashmapåŸŸ)[1.6ConCurrentHashMapæ„é€ æ–¹æ³•](#16concurrenthashmapæ„é€ æ–¹æ³•)[1.7putæ–¹æ³•](#17putæ–¹æ³•)[1.8getæ–¹æ³•](#18getæ–¹æ³•)[äºŒã€ConcurrentHashMapæ€»ç»“](#äºŒconcurrenthashmapæ€»ç»“)[ä¹ã€Set](#ä¹set)[ä¸€ã€HashSetå‰–æ](#ä¸€hashsetå‰–æ)[äºŒã€TreeSetå‰–æ](#äºŒtreesetå‰–æ)[ä¸‰ã€LinkedHashSetå‰–æ](#ä¸‰linkedhashsetå‰–æ)[å››ã€Seté›†åˆæ€»ç»“](#å››seté›†åˆæ€»ç»“)[åã€CopyOnWriteArrayList](#åcopyonwritearraylist)[ä¸€ã€Vectorå’ŒSynchronizedList](#ä¸€vectorå’Œsynchronizedlist)[1.1å›é¡¾çº¿ç¨‹å®‰å…¨çš„Vectorå’ŒSynchronizedList](#11å›é¡¾çº¿ç¨‹å®‰å…¨çš„vectorå’Œsynchronizedlist)[1.2Vectorå’ŒSynchronizedListå¯èƒ½ä¼šå‡ºç°çš„é—®é¢˜](#12vectorå’Œsynchronizedlistå¯èƒ½ä¼šå‡ºç°çš„é—®é¢˜)[äºŒã€CopyOnWriteArrayList(Set)ä»‹ç»](#äºŒcopyonwritearraylistsetä»‹ç»)[2.1CopyOnWriteArrayListå®ç°åŸç†](#21copyonwritearraylistå®ç°åŸç†)[2.1.1çœ‹ä¸€ä¸‹CopyOnWriteArrayListåŸºæœ¬çš„ç»“æ„](#211çœ‹ä¸€ä¸‹copyonwritearrayliståŸºæœ¬çš„ç»“æ„)[2.1.2å¸¸è§æ–¹æ³•çš„å®ç°](#212å¸¸è§æ–¹æ³•çš„å®ç°)[2.1.3å‰–æä¸ºä»€ä¹ˆéå†æ—¶ä¸ç”¨è°ƒç”¨è€…æ˜¾å¼åŠ é”](#213å‰–æä¸ºä»€ä¹ˆéå†æ—¶ä¸ç”¨è°ƒç”¨è€…æ˜¾å¼åŠ é”)[2.1.4CopyOnWriteArrayListç¼ºç‚¹](#214copyonwritearraylistç¼ºç‚¹)[2.1.5CopyOnWriteSet](#215copyonwriteset)[åä¸€ã€Javaé›†åˆé¢è¯•é¢˜](#åä¸€javaé›†åˆé¢è¯•é¢˜)[ä¸€ã€ArrayListå’ŒVectorçš„åŒºåˆ«](#ä¸€arraylistå’Œvectorçš„åŒºåˆ«)[äºŒã€HashMapå’ŒHashtableçš„åŒºåˆ«](#äºŒhashmapå’Œhashtableçš„åŒºåˆ«)[ä¸‰ã€Listå’ŒMapçš„åŒºåˆ«](#ä¸‰listå’Œmapçš„åŒºåˆ«)[å››ã€Seté‡Œçš„å…ƒç´ æ˜¯ä¸èƒ½é‡å¤çš„ï¼Œé‚£ä¹ˆç”¨ä»€ä¹ˆæ–¹æ³•æ¥åŒºåˆ†é‡å¤ä¸å¦å‘¢? æ˜¯ç”¨==è¿˜æ˜¯equals()?](#å››seté‡Œçš„å…ƒç´ æ˜¯ä¸èƒ½é‡å¤çš„é‚£ä¹ˆç”¨ä»€ä¹ˆæ–¹æ³•æ¥åŒºåˆ†é‡å¤ä¸å¦å‘¢-æ˜¯ç”¨è¿˜æ˜¯equals)[äº”ã€Collectionå’ŒCollectionsçš„åŒºåˆ«](#äº”collectionå’Œcollectionsçš„åŒºåˆ«)[å…­ã€è¯´å‡ºArrayList,LinkedListçš„å­˜å‚¨æ€§èƒ½å’Œç‰¹æ€§](#å…­è¯´å‡ºarraylistlinkedlistçš„å­˜å‚¨æ€§èƒ½å’Œç‰¹æ€§)[6.1æ‰©å±•ï¼š](#61æ‰©å±•)[ä¸ƒã€Enumerationå’ŒIteratoræ¥å£çš„åŒºåˆ«](#ä¸ƒenumerationå’Œiteratoræ¥å£çš„åŒºåˆ«)[å…«ã€ListIteratoræœ‰ä»€ä¹ˆç‰¹ç‚¹](#å…«listiteratoræœ‰ä»€ä¹ˆç‰¹ç‚¹)[ä¹ã€å¹¶å‘é›†åˆç±»æ˜¯ä»€ä¹ˆï¼Ÿ](#ä¹å¹¶å‘é›†åˆç±»æ˜¯ä»€ä¹ˆ)[åã€Javaä¸­HashMapçš„keyå€¼è¦æ˜¯ä¸ºç±»å¯¹è±¡åˆ™è¯¥ç±»éœ€è¦æ»¡è¶³ä»€ä¹ˆæ¡ä»¶ï¼Ÿ](#åjavaä¸­hashmapçš„keyå€¼è¦æ˜¯ä¸ºç±»å¯¹è±¡åˆ™è¯¥ç±»éœ€è¦æ»¡è¶³ä»€ä¹ˆæ¡ä»¶)[åä¸€ã€ä¸Javaé›†åˆæ¡†æ¶ç›¸å…³çš„æœ‰å“ªäº›æœ€å¥½çš„å®è·µ](#åä¸€ä¸javaé›†åˆæ¡†æ¶ç›¸å…³çš„æœ‰å“ªäº›æœ€å¥½çš„å®è·µ)[åäºŒã€ArrayListé›†åˆåŠ å…¥1ä¸‡æ¡æ•°æ®ï¼Œåº”è¯¥æ€ä¹ˆæé«˜æ•ˆç‡](#åäºŒarraylisté›†åˆåŠ å…¥1ä¸‡æ¡æ•°æ®åº”è¯¥æ€ä¹ˆæé«˜æ•ˆç‡)

 

# å‰è¨€

è¿™ä¸ªæ–‡æ¡£çš„å†…å®¹**çº¯æ‰‹æ‰“**ï¼Œå¦‚æœæƒ³è¦çœ‹æ›´å¤šçš„å¹²è´§æ–‡ç« ï¼Œå…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼š**Java3y**ã€‚æœ‰æ›´å¤šçš„åŸåˆ›æŠ€æœ¯æ–‡ç« å’Œå¹²è´§ï¼

 

ç›®å‰ç–¯ç‹‚å¤„äº**ç–¯ç‹‚**æ›´æ–°PDFä¸­ï¼Œåªè¦æ˜¯Javaåç«¯çš„çŸ¥è¯†ï¼Œéƒ½ä¼šæœ‰ï¼**æ¬¢è¿æ¥æˆ‘å…¬ä¼—å·å‚¬æ›´ï¼**å¾®ä¿¡æœç´¢ï¼š**Java3y**

 

å¦‚æœæ–‡æ¡£ä¸­æœ‰ä»»ä½•çš„ä¸æ‡‚çš„é—®é¢˜ï¼Œéƒ½å¯ä»¥ç›´æ¥æ¥æ‰¾æˆ‘è¯¢é—®ï¼Œæˆ‘ä¹æ„å¸®åŠ©ä½ ä»¬ï¼å…¬ä¼—å·æœ‰æˆ‘çš„**è”ç³»æ–¹å¼**

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnyqyo2bnj3076076dga.jpg)

- ğŸ”¥**Javaç²¾ç¾è„‘å›¾**
- ğŸ”¥**Javaå­¦ä¹ è·¯çº¿**
- ğŸ”¥**å¼€å‘å¸¸ç”¨å·¥å…·**
- ğŸ”¥**ç²¾ç¾ç”µå­ä¹¦ã€æ–‡æ¡£**

åœ¨å…¬ä¼—å·ä¸‹å›å¤ã€Œ**888**ã€å³å¯è·å–ï¼ï¼

 

**å­¦ä¹ ä¸èƒ½ç›²ç›®ï¼Œè·Ÿç€æˆ‘ï¼Œä¼šè®©ä½ äº‹åŠåŠŸå€**

 

**æ–‡æ¡£å…è®¸éšæ„ä¼ æ’­ï¼Œä½†ä¸èƒ½ä¿®æ”¹ä»»ä½•å†…å®¹ã€‚**

 

ç”µå­ä¹¦çš„æ•´ç†ä¹Ÿæ˜¯æŒºä¸å®¹æ˜“ï¼Œå¦‚æœä½ è§‰å¾—æœ‰å¸®åŠ©ï¼Œæƒ³è¦æ‰“èµä½œè€…ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡è¿™ä¸ªæ”¶æ¬¾ç æ‰“èµæˆ‘ï¼Œ**é‡‘é¢ä¸é‡è¦ï¼Œå¿ƒæ„æœ€é‡è¦**ã€‚ä¸»è¦æ˜¯æˆ‘å¯ä»¥é€šè¿‡è¿™ä¸ªæ‰“èµæƒ…å†µæ¥é¢„è®¡å¤§å®¶å¯¹è¿™æœ¬ç”µå­ä¹¦çš„è¯„ä»·ï¼Œå˜»å˜»

 

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcuu0j4wwqj30u014qako.jpg)![img](https://tva1.sinaimg.cn/large/00831rSTly1gcuuckh3s4j30rc0yo7jr.jpg)

 

# ä¸€ã€å­¦ä¹ æŒ‡å—

## ä¸€ã€Javaé›†åˆå­¦ä¹ æŒ‡å—

> æœ¬æ–‡ä¼šæå‡ºå¾ˆå¤šå¯èƒ½æ–°æ‰‹ä¼šæƒ³åˆ°çš„é—®é¢˜ï¼Œä½†ä¸ä¼šä¸€ä¸€è§£ç­”ï¼Œåªä¼šå¾€å¤§æ–¹å‘å»è¯´æ˜ç™½ã€‚æœ¬æ–‡çš„å†…å®¹åå‘äº**æŒ‡å—**ï¼Œè€ŒéæŠ€æœ¯æ•™ç¨‹è®²è§£ã€‚
>
> å¦‚æœæƒ³è¦å¾—åˆ°å…·ä½“çš„ç­”æ¡ˆï¼Œå¯ä»¥ç¿»é˜…æˆ‘æ›¾ç»å†™è¿‡çš„èµ„æ–™ï¼šhttps://github.com/ZhongFuCheng3y/3yï¼Œæˆ–è€…åŠ å…¥**äººæ‰äº¤æµç¾¤**è·Ÿä¼—å¤šå¼€å‘è€…è®¨è®ºï¼Œå‰é¢çš„**Github**é“¾æ¥æœ‰æˆ‘çš„è”ç³»æ–¹å¼ã€‚

### 1.1å­¦ä¹ ä¸€é¡¹æŠ€æœ¯ä¹‹å‰ï¼Œå¿…é¡»çŸ¥é“ä¸ºä»€ä¹ˆè¦å­¦å®ƒï¼

**Q:** æˆ‘ä»¬å¾—çŸ¥é“ä¸ºä»€ä¹ˆè¦å­¦ä¹ Javaé›†åˆï¼Œå­¦åˆ°Javaé›†åˆçš„æ—¶å€™å·²ç»å­¦è¿‡äº†æ•°ç»„äº†ï¼Œä¸ºä»€ä¹ˆæˆ‘ä¸ç”¨æ•°ç»„åè€Œç”¨Javaé›†åˆã€‚æ•°ç»„å’ŒJavaé›†åˆæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

![å­¦ä¹ Javaé›†åˆå…ˆéœ€è¦çŸ¥é“](https://user-gold-cdn.xitu.io/2019/12/1/16ebfaf824c5b1d5?w=686&h=205&f=png&s=20846)

 

**A:**Javaæ˜¯ä¸€é—¨é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œå°±å…ä¸äº†å¤„ç†å¯¹è±¡ï¼Œä¸ºäº†æ–¹ä¾¿æ“ä½œå¤šä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¾—æŠŠè¿™å¤šä¸ªå¯¹è±¡å­˜å‚¨èµ·æ¥ï¼Œæƒ³è¦å­˜å‚¨å¤šä¸ªå¯¹è±¡(å˜é‡),å¾ˆå®¹æ˜“å°±èƒ½æƒ³åˆ°ä¸€ä¸ª**å®¹å™¨**(é›†åˆ)æ¥è£…è½½

 

æ€»çš„æ¥è¯´ï¼šå°±æ˜¯Javaç»™æˆ‘ä»¬**æä¾›äº†å·¥å…·æ–¹ä¾¿æˆ‘ä»¬å»æ“ä½œå¤šä¸ªJavaå¯¹è±¡**ã€‚

![æ–¹ä¾¿æ“ä½œå¤šä¸ªå¯¹è±¡](https://user-gold-cdn.xitu.io/2019/12/1/16ebfb00828f0dca?w=566&h=172&f=png&s=11855)

### 1.2å¦‚ä½•å…¥é—¨å­¦ä¹ Javaé›†åˆ

**Q:** ä»ä¸Šé¢æˆ‘ä»¬å·²ç»çŸ¥é“äº†ä¸ºä»€ä¹ˆè¦å­¦Javaé›†åˆï¼Œä¸‹é¢æˆ‘ä»¬å°±è¯¥çŸ¥é“Javaé›†åˆçš„åŸºæœ¬ç”¨æ³•ï¼Œä»¥åŠä»å®ƒæ•´ä½“çš„çŸ¥è¯†ç‚¹å»äº†è§£å®ƒæ˜¯ä»€ä¹ˆ

![å…¥é—¨Javaé›†åˆ](https://user-gold-cdn.xitu.io/2019/12/1/16ebfb09d0fc07b3?w=669&h=165&f=png&s=17441)

**Aï¼š** æˆ‘ä»¬å­¦ä¹ Javaé›†åˆå®é™…ä¸Šå°±æ˜¯ä¸ºäº†æ–¹ä¾¿æ“ä½œå¤šä¸ªå¯¹è±¡ï¼Œè€ŒJavaç»™æˆ‘ä»¬æä¾›ä¸€ç³»åˆ—çš„API(æ–¹æ³•)ä¾›æˆ‘ä»¬å»æ“ä½œã€‚æ‰€ä»¥åœ¨åˆå­¦Javaé›†åˆçš„æ—¶å€™æˆ‘ä»¬æ›´å¤šçš„æ˜¯å­¦ä¹ è¿™äº›API(æ–¹æ³•)åˆ†åˆ«æ˜¯ä»€ä¹ˆæ„æ€ã€‚

![APIçš„ç”¨æ³•ä»¥åŠæ•ˆæœ](https://user-gold-cdn.xitu.io/2019/12/1/16ebfb167aa66b29?w=693&h=182&f=png&s=13714)

**Qï¼š** å¯¹Javaé›†åˆçš„APIä½¿ç”¨æœ‰ä¸€å®šçš„äº†è§£ä¹‹åï¼Œæˆ‘ä»¬å°±åº”è¯¥ä»**é¢å‘å¯¹è±¡**çš„è§’åº¦å»ç†è§£å®ƒã€‚ä¸ºä»€ä¹ˆä¼šæŠ½è±¡å‡ºå¤šä¸ªæ¥å£ï¼Œä»¥åŠæ¯ä¸ªæ¥å£çš„æœ‰ä»€ä¹ˆç‰¹æ€§ã€‚

![ä»é¢å‘å¯¹è±¡çš„è§’åº¦å»ç†è§£æ¥å£ä»¥åŠæ¯ä¸ªæ¥å£ä¸‹çš„å¸¸ç”¨ç±»](https://user-gold-cdn.xitu.io/2019/12/1/16ec00d00af190c8?w=947&h=362&f=png&s=32666)

**A:** æˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºå‡ ä¸ª**å¸¸ç”¨çš„å®ç°ç±»**ï¼Œè¿™å‡ ä¸ªå¸¸ç”¨çš„å®ç°ç±»æˆ‘ä»¬å¿…é¡»è¦çŸ¥é“å®ƒçš„**æ•°æ®ç»“æ„**æ˜¯ä»€ä¹ˆï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨è¿™ä¸ªç±»ã€‚

![éœ€è¦çŸ¥é“æ¯ä¸ªå¸¸ç”¨å­ç±»çš„æ•°æ®ç»“æ„](https://user-gold-cdn.xitu.io/2019/12/1/16ec0118a51a82fb?w=1167&h=573&f=png&s=57844)

 

éœ€è¦å­¦ä¹ å’Œäº†è§£çš„æ•°æ®ç»“æ„ï¼š

![æ•°æ®ç»“æ„](https://user-gold-cdn.xitu.io/2019/12/4/16ed114ec29bf0d5?w=644&h=390&f=png&s=29126)

 

åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬ç®€å•äº†è§£å„ä¸ªå®ç°ç±»çš„æ•°æ®ç»“æ„ä»¥åï¼Œæˆ‘ä»¬å¯èƒ½ä¼šç®€å•è®°ä½ä¸‹é¢çš„**ç»“è®º**ï¼š

- å¦‚æœæ˜¯é›†åˆç±»å‹ï¼Œæœ‰Listå’ŒSetä¾›æˆ‘ä»¬é€‰æ‹©ã€‚Listçš„ç‰¹ç‚¹æ˜¯æ’å…¥æœ‰åºçš„ï¼Œå…ƒç´ æ˜¯å¯é‡å¤çš„ã€‚Setçš„ç‰¹ç‚¹æ˜¯æ’å…¥æ— åºçš„ï¼Œå…ƒç´ ä¸å¯é‡å¤çš„ã€‚è‡³äºé€‰æ‹©å“ªä¸ªå®ç°ç±»æ¥ä½œä¸ºæˆ‘ä»¬çš„å­˜å‚¨å®¹å™¨ï¼Œæˆ‘ä»¬å°±å¾—çœ‹å…·ä½“çš„åº”ç”¨åœºæ™¯ã€‚æ˜¯å¸Œæœ›å¯é‡å¤çš„å°±å¾—ç”¨Listï¼Œé€‰æ‹©Listä¸‹å¸¸è§çš„å­ç±»ã€‚æ˜¯å¸Œæœ›ä¸å¯é‡å¤ï¼Œé€‰æ‹©Setä¸‹å¸¸è§çš„å­ç±»ã€‚
- å¦‚æœæ˜¯`Key-Value`å‹ï¼Œé‚£æˆ‘ä»¬ä¼šé€‰æ‹©Mapã€‚å¦‚æœè¦ä¿æŒæ’å…¥é¡ºåºçš„ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©LinkedHashMapï¼Œå¦‚æœä¸éœ€è¦åˆ™é€‰æ‹©HashMapï¼Œå¦‚æœè¦æ’åºåˆ™é€‰æ‹©TreeMapã€‚
- æ€»ä¹‹ï¼šå­¦å®Œ**å¸¸è§**å®ç°ç±»çš„æ•°æ®ç»“æ„ä¹‹åï¼Œä½ å¯¹å®ƒçš„ä½¿ç”¨åœºæ™¯å°±æœ‰ä¸€ä¸ªæ¸…æ¥šçš„è®¤çŸ¥äº†ã€‚

![é€‰æ‹©ä»€ä¹ˆæ ·çš„å®¹å™¨æ¥å­˜å‚¨æˆ‘ä»¬çš„å¯¹è±¡ï¼Œå…³é”®åœ¨äºäº†è§£æ¯ä¸ªå¸¸ç”¨é›†åˆç±»çš„æ•°æ®ç»“æ„](https://user-gold-cdn.xitu.io/2019/12/1/16ec0181b8ce1cf2?w=1117&h=329&f=png&s=30943)

### 1.3 é›†åˆè¿›é˜¶ä¸é¢è¯•

å¦‚æœæˆ‘ä»¬åœ¨å†™ä»£ç çš„æ—¶å€™**æ‡‚å¾—**é€‰æ‹©ä»€ä¹ˆæ ·çš„é›†åˆä½œä¸ºæˆ‘ä»¬çš„å®¹å™¨ï¼Œé‚£å·²ç»æ˜¯å…¥é—¨äº†ã€‚ä½†è¦çŸ¥é“çš„æ˜¯ï¼Œå¦‚æœå»é¢è¯•ä¹‹å‰ï¼Œä½ æ‡‚çš„ä¸åº”è¯¥åªæœ‰è¿™ä¹ˆå°‘ã€‚

ï¼ˆå¦‚æœè¿˜åœ¨**åˆå­¦æˆ–è€…é›¶åŸºç¡€**çš„åŒå­¦æˆ‘å»ºè®®å¯ä»¥è·³è¿‡è¿™ä¸€éƒ¨åˆ†ï¼Œåœ¨ç½‘ä¸Šæœ‰å¯èƒ½å¾ˆå¤šè¨€è®ºï¼Œæ¯”å¦‚ï¼š**â€œå¦‚æœä½ JavaåŸºç¡€æ‰å®çš„è¯ï¼Œé‚£ä½ ä»¥åæ‰¾å·¥ä½œå°±ä¸æ„äº†ã€‚åœ¨å­¦JavaåŸºç¡€çš„æ—¶å€™ä¸€å®šè¦æŠŠåŸºç¡€å­¦å¥½ï¼Œçœ‹æºç ï¼â€**ã€‚ä½†æˆ‘è®¤ä¸ºï¼Œè¿™ä¸€å—æ˜¯å»ºç«‹åœ¨æœ‰ä¸€å®šçš„ç¼–ç /é¡¹ç›®æˆ–è€…æ˜¯å»æ‰¾å·¥ä½œçš„æ—¶å€™æ‰æˆç«‹çš„ï¼Œ**ä¸€ä¸ªåˆšå…¥é—¨å­¦Javaçš„ï¼Œå°±ä¸åº”è¯¥çœ‹æºç ï¼Œè¿™å¾ˆå®¹æ˜“æŠŠè‡ªå·±åŠé€€äº†**ï¼‰

 

æˆ‘çš„è§‚ç‚¹æ˜¯ï¼šå¦‚æœåˆšå…¥é—¨å­¦Javaï¼Œé¦–å…ˆä½ è¦ååˆ†æ¸…æ¥šçŸ¥é“ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ªï¼Œè¿™ä¸ªåˆ°åº•æœ‰ä»€ä¹ˆç”¨ï¼Œç”¨åœ¨å“ªäº›åœ°æ–¹ï¼Œä»¥åŠç†Ÿæ‚‰å¸¸ç”¨çš„æ–¹æ³•ï¼Œå°±è¶³å¤Ÿäº†ã€‚å³ä¾¿ä½ èŠ±äº†ä¸¤å‘¨å·¦å³æ—¶é—´å»çœ‹æºç å®ç°äº†ï¼Œå¯èƒ½çœ‹æ‡‚äº†ã€‚ä½†æ˜¯ï¼Œä½ ç›¸ä¿¡æˆ‘ï¼Œä½ **å¤§æ¦‚ç‡ä¼šå¿˜æ‰**ã€‚

 

Javaé›†åˆæ˜¯é¢è¯•çš„**é‡ç‚¹**ï¼Œæˆ‘åœ¨é¢è¯•çš„æ—¶å€™å‡ ä¹æ¯å®¶å…¬å¸éƒ½ä¼šé—®é›†åˆçš„é—®é¢˜ï¼Œä»åŸºç¡€åˆ°æºç ï¼Œä¸€æ­¥ä¸€æ­¥æ·±å…¥ã€‚Javaé›†åˆé¢è¯•çš„çŸ¥è¯†ç‚¹å°±ä¸é™äºåŸºæœ¬çš„ç”¨æ³•äº†ã€‚å¯èƒ½é¢è¯•å®˜ä¼šé—®ä½ ï¼š

- HashMapçš„æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿä»–æ˜¯æ€ä¹ˆæ‰©å®¹çš„ï¼Ÿåº•å±‚æœ‰æ²¡æœ‰ç”¨çº¢é»‘æ ‘ï¼Ÿå–Key Hashå€¼æ˜¯JDKæºç æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Ÿ
- HashMapæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨ï¼Ÿæœ‰ä»€ä¹ˆæ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼Ÿé‚£çº¿ç¨‹å®‰å…¨çš„HashMapæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ
- HashSetæ˜¯å¦‚ä½•åˆ¤æ–­Keyæ˜¯é‡å¤çš„ï¼Ÿ
- .....å¾ˆå¤šå¾ˆå¤š

![æ€»ç»“](https://user-gold-cdn.xitu.io/2019/12/1/16ec0ce951bac1af?w=4144&h=1716&f=png&s=659247)

æ€»çš„æ¥è¯´ï¼Œå…¥é—¨Javaé›†åˆå¹¶ä¸éš¾ï¼Œå½’æ ¹åˆ°åº•æˆ‘è®¤ä¸ºå°±æ˜¯ä¸‰ä»¶äº‹ï¼š

- äº†è§£ä¸ºä»€ä¹ˆè¦å­¦ä¹ Javaé›†åˆ
- å­¦ä¹ Javaé›†åˆçš„å„ä¸ªæ¥å£ä»¥åŠå¸¸ç”¨çš„å®ç°ç±»ç”¨æ³•
- å­¦ä¹ å¸¸ç”¨å®ç°ç±»çš„æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆï¼Œèƒ½åœ¨å†™ä»£ç çš„æ—¶å€™é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„å®ç°ç±»è£…è½½è‡ªå·±çš„å¯¹è±¡ã€‚

 

é›¶åŸºç¡€å…¥é—¨ä¸éœ€è¦é˜…è¯»æºç ï¼Œé¢è¯•å‰ä¸€å®šè¦å›é¡¾å’Œé˜…è¯»æºç ï¼ˆè¿™æ˜¯é¢è¯•å¿…è€ƒçš„çŸ¥è¯†ç‚¹ï¼‰ï¼

![æ€»ç»“æœ¬æ–‡](https://user-gold-cdn.xitu.io/2019/12/1/16ec0d2898643dda?w=1013&h=431&f=png&s=45480)

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnmr7fsc1j3073073aa5.jpg)

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnyqyo2bnj3076076dga.jpg)

å¦‚æœâ½‚æ¡£ä¸­æœ‰ä»»ä½•çš„ä¸æ‡‚çš„é—®é¢˜ï¼Œéƒ½å¯ä»¥ç›´æ¥æ¥æ‰¾æˆ‘è¯¢é—®ï¼Œæˆ‘ä¹æ„å¸®åŠ©ä½ ä»¬ï¼å¾®ä¿¡æœ**Java3y**å…¬ä¼—å·æœ‰æˆ‘çš„è”ç³»â½…å¼ã€‚æ›´å¤š**åŸåˆ›**æŠ€æœ¯â½‚ç« å¯å…³æ³¨æˆ‘çš„GitHubï¼šhttps://github.com/ZhongFuCheng3y/3y

 

# äºŒã€Collection

 

## ä¸€ã€é›†åˆ(Collection)ä»‹ç»

### 1.1ä¸ºä»€ä¹ˆéœ€è¦Collection

1. Javaæ˜¯ä¸€é—¨é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œå°±å…ä¸äº†å¤„ç†å¯¹è±¡
2. ä¸ºäº†æ–¹ä¾¿æ“ä½œå¤šä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¾—æŠŠè¿™å¤šä¸ªå¯¹è±¡å­˜å‚¨èµ·æ¥
3. æƒ³è¦å­˜å‚¨å¤šä¸ªå¯¹è±¡(å˜é‡),å¾ˆå®¹æ˜“å°±èƒ½æƒ³åˆ°ä¸€ä¸ª**å®¹å™¨**
4. å¸¸ç”¨çš„å®¹å™¨æˆ‘ä»¬çŸ¥é“æœ‰-->StringBuffered,æ•°ç»„(è™½ç„¶æœ‰å¯¹è±¡æ•°ç»„ï¼Œä½†æ˜¯æ•°ç»„çš„é•¿åº¦æ˜¯ä¸å¯å˜çš„ï¼)
5. æ‰€ä»¥ï¼ŒJavaå°±ä¸ºæˆ‘ä»¬æä¾›äº†é›†åˆ(Collection)ï½

### 1.2æ•°ç»„å’Œé›†åˆçš„åŒºåˆ«

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ•°ç»„å’Œé›†åˆçš„åŒºåˆ«æ¥åˆ†æä¸€ä¸‹ï¼š

æ•°ç»„å’Œé›†åˆçš„åŒºåˆ«:

- 1:é•¿åº¦çš„åŒºåˆ«
  - **æ•°ç»„çš„é•¿åº¦å›ºå®š**
  - **é›†åˆçš„é•¿åº¦å¯å˜**
- 2:å…ƒç´ çš„æ•°æ®ç±»å‹
  - æ•°ç»„å¯ä»¥å­˜å‚¨åŸºæœ¬æ•°æ®ç±»å‹,ä¹Ÿå¯ä»¥å­˜å‚¨å¼•ç”¨ç±»å‹
  - **é›†åˆåªèƒ½å­˜å‚¨å¼•ç”¨ç±»å‹(ä½ å­˜å‚¨çš„æ˜¯ç®€å•çš„intï¼Œå®ƒä¼šè‡ªåŠ¨è£…ç®±æˆInteger)**

### 1.3Collectionçš„ç”±æ¥ä¸åŠŸèƒ½

**Collectionçš„ç”±æ¥ï¼š**

- é›†åˆå¯ä»¥å­˜å‚¨å¤šä¸ªå…ƒç´ ,ä½†æˆ‘ä»¬**å¯¹å¤šä¸ªå…ƒç´ ä¹Ÿæœ‰ä¸åŒçš„éœ€æ±‚**
  - å¤šä¸ªå…ƒç´ ,ä¸èƒ½æœ‰ç›¸åŒçš„
  - å¤šä¸ªå…ƒç´ ,èƒ½å¤ŸæŒ‰ç…§æŸä¸ªè§„åˆ™æ’åº
- é’ˆå¯¹ä¸åŒçš„éœ€æ±‚ï¼šjavaå°±æä¾›äº†å¾ˆå¤šé›†åˆç±»ï¼Œå¤šä¸ªé›†åˆç±»çš„æ•°æ®ç»“æ„ä¸åŒã€‚ä½†æ˜¯ï¼Œç»“æ„ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯**èƒ½å¤Ÿå­˜å‚¨ä¸œè¥¿,èƒ½å¤Ÿåˆ¤æ–­,è·å–**
- æŠŠé›†åˆ**å…±æ€§çš„å†…å®¹ä¸æ–­å¾€ä¸Šæå–**,æœ€ç»ˆå½¢æˆé›†åˆçš„ç»§æ‰¿ä½“ç³»---->Collection

Collectionçš„å¤§è‡´ç»“æ„ä½“ç³»æ˜¯è¿™æ ·çš„ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/4/1628e4e1f6a487f2?w=720&h=385&f=jpeg&s=27756)

ä½†æ˜¯ï¼Œä¸€èˆ¬æˆ‘ä»¬è¦æŒæ¡çš„å¹¶ä¸éœ€è¦é‚£ä¹ˆå¤šï¼Œåªéœ€è¦æŒæ¡ä¸€äº›å¸¸ç”¨çš„é›†åˆç±»å°±è¡Œäº†ã€‚ä¸‹é¢æˆ‘**åœˆå‡ºæ¥çš„é‚£äº›**ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/4/1628e4e1f69d1124?w=1328&h=763&f=png&s=100521)

**å†æ¬¡ç²¾å‡ï¼š**

![img](https://user-gold-cdn.xitu.io/2018/4/4/1628e4e211b855e9?w=1213&h=556&f=bmp&s=2023894)

Collectionçš„åŸºç¡€åŠŸèƒ½ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/4/1628e4e1f73ea209?w=1651&h=827&f=png&s=94001)

![img](https://user-gold-cdn.xitu.io/2018/4/4/1628e4e1f75125d8?w=1292&h=578&f=png&s=42527)

 

## äºŒã€è¿­ä»£å™¨(Iterator)ä»‹ç»

æˆ‘ä»¬å¯ä»¥å‘ç°Collectionçš„æºç ä¸­ç»§æ‰¿äº†Iterableï¼Œæœ‰iterator()è¿™ä¸ªæ–¹æ³•...

![img](https://user-gold-cdn.xitu.io/2018/4/4/1628e4e1f8ddab70?w=1590&h=312&f=png&s=40117)

ç‚¹è¿›å»çœ‹äº†ä¸€ä¸‹ï¼ŒIterableæ˜¯ä¸€ä¸ªæ¥å£ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/4/1628e4e23f10a829?w=1023&h=539&f=png&s=17609)

å®ƒæœ‰iterator()è¿™ä¸ªæ–¹æ³•ï¼Œè¿”å›çš„æ˜¯**Iterator**

å†æ¥çœ‹ä¸€ä¸‹ï¼ŒIteratorä¹Ÿæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒåªæœ‰ä¸‰ä¸ªæ–¹æ³•ï¼š

- hasNext()
- next()
- remove()

![img](https://user-gold-cdn.xitu.io/2018/4/4/1628e4e24a68a5e0?w=1351&h=775&f=png&s=58200)

å¯æ˜¯ï¼Œæˆ‘ä»¬æ²¡èƒ½æ‰¾åˆ°å¯¹åº”çš„å®ç°æ–¹æ³•ï¼Œåªèƒ½å¾€Collectionçš„å­ç±»ä¸‹æ‰¾æ‰¾äº†ï¼Œäºæ˜¯æˆ‘ä»¬æ‰¾åˆ°äº†--->ArrayList(è¯¥ç±»åé¢ä¼šè¯´)

äºæ˜¯ï¼Œæˆ‘ä»¬åœ¨ArrayListä¸‹æ‰¾åˆ°äº†iteratorå®ç°çš„èº«å½±ï¼šå®ƒæ˜¯åœ¨ArrayListä»¥**å†…éƒ¨ç±»çš„æ–¹å¼å®ç°**çš„ï¼å¹¶ä¸”ï¼Œä»æºç å¯çŸ¥ï¼š**Iteratorå®é™…ä¸Šå°±æ˜¯åœ¨éå†é›†åˆ**

![img](https://user-gold-cdn.xitu.io/2018/4/4/1628e4e2671465f5?w=1578&h=791&f=png&s=107948)

æ‰€ä»¥è¯´ï¼šæˆ‘ä»¬**éå†é›†åˆ(Collection)çš„å…ƒç´ éƒ½å¯ä»¥ä½¿ç”¨Iterator**ï¼Œè‡³äºå®ƒçš„å…·ä½“å®ç°æ˜¯ä»¥å†…éƒ¨ç±»çš„æ–¹å¼å®ç°çš„ï¼

![img](https://user-gold-cdn.xitu.io/2018/4/4/1628e4e2686de25a?w=1213&h=556&f=bmp&s=2023894)

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnythvd93j307806qglo.jpg)

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnyqyo2bnj3076076dga.jpg)

å¦‚æœâ½‚æ¡£ä¸­æœ‰ä»»ä½•çš„ä¸æ‡‚çš„é—®é¢˜ï¼Œéƒ½å¯ä»¥ç›´æ¥æ¥æ‰¾æˆ‘è¯¢é—®ï¼Œæˆ‘ä¹æ„å¸®åŠ©ä½ ä»¬ï¼å¾®ä¿¡æœ**Java3y**å…¬ä¼—å·æœ‰æˆ‘çš„è”ç³»â½…å¼ã€‚æ›´å¤š**åŸåˆ›**æŠ€æœ¯â½‚ç« å¯å…³æ³¨æˆ‘çš„GitHubï¼šhttps://github.com/ZhongFuCheng3y/3y

## ä¸‰ã€Listé›†åˆä»‹ç»

ä»ä¸Šé¢å·²ç»å¯ä»¥çœ‹åˆ°äº†ï¼ŒCollectionä¸»è¦å­¦ä¹ é›†åˆçš„ç±»å‹ä¸¤ç§ï¼š**Setå’ŒList**ï¼Œè¿™é‡Œä¸»è¦è®²è§£Listï¼

æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹Listæ¥å£çš„æ–¹æ³•ï¼Œæ¯”Collectionå¤šäº†ä¸€ç‚¹ç‚¹ï¼š

- Listé›†åˆçš„**ç‰¹ç‚¹**å°±æ˜¯ï¼š**æœ‰åº(å­˜å‚¨é¡ºåºå’Œå–å‡ºé¡ºåºä¸€è‡´),å¯é‡å¤**

![img](https://user-gold-cdn.xitu.io/2018/4/4/1628e548c08430c7?w=1805&h=594&f=png&s=70406)

Collectionè¿”å›çš„æ˜¯Iteratorè¿­ä»£å™¨æ¥å£ï¼Œè€ŒListä¸­åˆæœ‰å®ƒè‡ªå·±å¯¹åº”çš„å®ç°-->**ListIteratoræ¥å£**

è¯¥æ¥å£æ¯”æ™®é€šçš„Iteratoræ¥å£å¤šäº†å‡ ä¸ªæ–¹æ³•ï¼š ![img](https://user-gold-cdn.xitu.io/2018/4/4/1628e548c0cb32c8?w=496&h=269&f=png&s=12715)

ä»æ–¹æ³•åå°±å¯ä»¥çŸ¥é“ï¼š**ListIteratorå¯ä»¥å¾€å‰éå†ï¼Œæ·»åŠ å…ƒç´ ï¼Œè®¾ç½®å…ƒç´ **

 

 

### 3.1Listé›†åˆå¸¸ç”¨å­ç±»

Listé›†åˆå¸¸ç”¨çš„å­ç±»æœ‰ä¸‰ä¸ªï¼š

- ArrayList
  - åº•å±‚æ•°æ®ç»“æ„æ˜¯æ•°ç»„ã€‚çº¿ç¨‹ä¸å®‰å…¨
- LinkedList
  - åº•å±‚æ•°æ®ç»“æ„æ˜¯é“¾è¡¨ã€‚çº¿ç¨‹ä¸å®‰å…¨
- Vector
  - åº•å±‚æ•°æ®ç»“æ„æ˜¯æ•°ç»„ã€‚çº¿ç¨‹å®‰å…¨

**ç°åœ¨çŸ¥é“æœ‰ä¸‰ä¸ªå¸¸ç”¨çš„é›†åˆç±»å³å¯ï¼Œåé¢ä¼šå¼€æ–°çš„æ–‡ç« æ¥è®²è§£çš„**ï½

## å››ã€Seté›†åˆä»‹ç»

ä»Seté›†åˆçš„æ–¹æ³•æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼šæ–¹æ³•æ²¡æœ‰æ¯”Collectionè¦å¤š

- Seté›†åˆçš„ç‰¹ç‚¹æ˜¯ï¼š**å…ƒç´ ä¸å¯é‡å¤**

![img](https://user-gold-cdn.xitu.io/2018/4/4/1628e5a1c8f7f9d9?w=1839&h=683&f=png&s=96178)

### 4.1Seté›†åˆå¸¸ç”¨å­ç±»

- HashSeté›†åˆ
  - A:åº•å±‚æ•°æ®ç»“æ„æ˜¯å“ˆå¸Œè¡¨(æ˜¯ä¸€ä¸ªå…ƒç´ ä¸ºé“¾è¡¨çš„æ•°ç»„) 
- TreeSeté›†åˆ
  - A:åº•å±‚æ•°æ®ç»“æ„æ˜¯çº¢é»‘æ ‘(æ˜¯ä¸€ä¸ªè‡ªå¹³è¡¡çš„äºŒå‰æ ‘)
  - B:ä¿è¯å…ƒç´ çš„æ’åºæ–¹å¼
- LinkedHashSeté›†åˆ     
  - A:ï¼šåº•å±‚æ•°æ®ç»“æ„ç”±å“ˆå¸Œè¡¨å’Œé“¾è¡¨ç»„æˆã€‚

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnywo71jrg308c08caa4.gif)

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnyqyo2bnj3076076dga.jpg)

å¦‚æœâ½‚æ¡£ä¸­æœ‰ä»»ä½•çš„ä¸æ‡‚çš„é—®é¢˜ï¼Œéƒ½å¯ä»¥ç›´æ¥æ¥æ‰¾æˆ‘è¯¢é—®ï¼Œæˆ‘ä¹æ„å¸®åŠ©ä½ ä»¬ï¼å¾®ä¿¡æœ**Java3y**å…¬ä¼—å·æœ‰æˆ‘çš„è”ç³»â½…å¼ã€‚æ›´å¤š**åŸåˆ›**æŠ€æœ¯â½‚ç« å¯å…³æ³¨æˆ‘çš„GitHubï¼šhttps://github.com/ZhongFuCheng3y/3y

# ä¸‰ã€Listé›†åˆ

ç°åœ¨è¿™ç¯‡ä¸»è¦è®²Listé›†åˆçš„ä¸‰ä¸ªå­ç±»ï¼š

- ArrayList
  - åº•å±‚æ•°æ®ç»“æ„æ˜¯æ•°ç»„ã€‚çº¿ç¨‹ä¸å®‰å…¨
- LinkedList
  - åº•å±‚æ•°æ®ç»“æ„æ˜¯é“¾è¡¨ã€‚çº¿ç¨‹ä¸å®‰å…¨
- Vector
  - åº•å±‚æ•°æ®ç»“æ„æ˜¯æ•°ç»„ã€‚çº¿ç¨‹å®‰å…¨

è¿™ç¯‡ä¸»è¦æ¥çœ‹çœ‹å®ƒä»¬æ¯”è¾ƒé‡è¦çš„æ–¹æ³•æ˜¯å¦‚ä½•å®ç°çš„ï¼Œéœ€è¦æ³¨æ„äº›ä»€ä¹ˆï¼Œæœ€åæ¯”è¾ƒä¸€ä¸‹å“ªä¸ªæ—¶å€™ç”¨å“ªä¸ªï½

 

 

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a47ff8aa0d652?w=1213&h=556&f=bmp&s=2023894)

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a47ff8fdf1b62?w=1213&h=556&f=bmp&s=2023894)

## ä¸€ã€ArrayListè§£æ

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a47ff9010e432?w=987&h=527&f=png&s=19181)

é¦–å…ˆï¼Œæˆ‘ä»¬æ¥è®²è§£çš„æ˜¯ArrayListé›†åˆï¼Œå®ƒæ˜¯æˆ‘ä»¬ç”¨å¾—éå¸¸éå¸¸å¤šçš„ä¸€ä¸ªé›†åˆ~

é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ArrayListçš„å±æ€§ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a49ac14c83dd9?w=1323&h=748&f=png&s=65575)

æ ¹æ®ä¸Šé¢æˆ‘ä»¬å¯ä»¥æ¸…æ™°çš„å‘ç°ï¼š**ArrayListåº•å±‚å…¶å®å°±æ˜¯ä¸€ä¸ªæ•°ç»„**ï¼ŒArrayListä¸­æœ‰**æ‰©å®¹**è¿™ä¹ˆä¸€ä¸ªæ¦‚å¿µï¼Œæ­£å› ä¸ºå®ƒæ‰©å®¹ï¼Œæ‰€ä»¥å®ƒèƒ½å¤Ÿ**å®ç°â€œåŠ¨æ€â€å¢é•¿**

### 1.1æ„é€ æ–¹æ³•

æˆ‘ä»¬æ¥çœ‹çœ‹æ„é€ æ–¹æ³•æ¥å°è¯æˆ‘ä»¬ä¸Šé¢è¯´å¾—å¯¹ä¸å¯¹ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a47ff903d247c?w=874&h=717&f=png&s=49435)

### 1.2Addæ–¹æ³•

addæ–¹æ³•å¯ä»¥è¯´æ˜¯ArrayListæ¯”è¾ƒé‡è¦çš„æ–¹æ³•äº†ï¼Œæˆ‘ä»¬æ¥æ€»è§ˆä¸€ä¸‹ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a4842e35deb9b?w=957&h=642&f=png&s=41396)

#### 1.2.1add(E e)

æ­¥éª¤ï¼š

- **æ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹**
- **æ’å…¥å…ƒç´ **

é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªæ–¹æ³•ï¼š

```
    public boolean add(E e) {
        ensureCapacityInternal(size + 1);  // Increments modCount!!
        elementData[size++] = e;
        return true;
    }
```

è¯¥æ–¹æ³•å¾ˆçŸ­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æ–¹æ³•åå°±çŒœåˆ°ä»–æ˜¯å¹²äº†ä»€ä¹ˆï¼š

- **ç¡®è®¤listå®¹é‡ï¼Œå°è¯•å®¹é‡åŠ 1ï¼Œçœ‹çœ‹æœ‰æ— å¿…è¦**
- **æ·»åŠ å…ƒç´ **

æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªå°å®¹é‡(+1)æ˜¯å¦æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a47ffce5e519d?w=1048&h=237&f=png&s=16138)

éšåè°ƒç”¨`ensureExplicitCapacity()`æ¥ç¡®å®šæ˜ç¡®çš„å®¹é‡ï¼Œæˆ‘ä»¬ä¹Ÿæ¥çœ‹çœ‹è¿™ä¸ªæ–¹æ³•æ˜¯æ€ä¹ˆå®ç°çš„ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a47ffdfdce509?w=1111&h=260&f=png&s=22235)

æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹`grow()`æ˜¯æ€ä¹ˆå®ç°çš„~

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a47fff99d4ae1?w=1235&h=793&f=png&s=64651)

è¿›å»çœ‹`copyOf()`æ–¹æ³•ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a48001c426601?w=1260&h=290&f=png&s=18128)

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å°±å¯ä»¥çŸ¥é“`add(E e)`çš„åŸºæœ¬å®ç°äº†ï¼š

- é¦–å…ˆå»æ£€æŸ¥ä¸€ä¸‹æ•°ç»„çš„å®¹é‡æ˜¯å¦è¶³å¤Ÿ
  - è¶³å¤Ÿï¼šç›´æ¥æ·»åŠ 
  - ä¸è¶³å¤Ÿï¼šæ‰©å®¹
    - **æ‰©å®¹åˆ°åŸæ¥çš„1.5å€**
    - ç¬¬ä¸€æ¬¡æ‰©å®¹åï¼Œå¦‚æœå®¹é‡è¿˜æ˜¯å°äºminCapacityï¼Œå°±å°†å®¹é‡æ‰©å……ä¸ºminCapacityã€‚

#### 1.2.2add(int index, E element)

æ­¥éª¤ï¼š

- **æ£€æŸ¥è§’æ ‡**
- **ç©ºé—´æ£€æŸ¥ï¼Œå¦‚æœæœ‰éœ€è¦è¿›è¡Œæ‰©å®¹**
- **æ’å…¥å…ƒç´ **

æˆ‘ä»¬æ¥çœ‹çœ‹æ’å…¥çš„å®ç°ï¼š ![img](https://user-gold-cdn.xitu.io/2018/4/8/162a4800231ba6fe?w=1099&h=499&f=png&s=38920)

æˆ‘ä»¬å‘ç°ï¼Œä¸æ‰©å®¹ç›¸å…³ArrayListçš„addæ–¹æ³•åº•å±‚å…¶å®éƒ½æ˜¯`arraycopy()`æ¥å®ç°çš„

çœ‹åˆ°`arraycopy()`ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼š**è¯¥æ–¹æ³•æ˜¯ç”±C/C++æ¥ç¼–å†™çš„**ï¼Œå¹¶ä¸æ˜¯ç”±Javaå®ç°ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a480046336dd0?w=1024&h=126&f=png&s=8667)

æ€»çš„æ¥è¯´ï¼š`arraycopy()`è¿˜æ˜¯æ¯”è¾ƒå¯é é«˜æ•ˆçš„ä¸€ä¸ªæ–¹æ³•ã€‚

 

### 1.3 getæ–¹æ³•

- **æ£€æŸ¥è§’æ ‡**
- **è¿”å›å…ƒç´ **

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a48004fb8e759?w=963&h=337&f=png&s=20381)

```
// æ£€æŸ¥è§’æ ‡
private void rangeCheck(int index) {
  if (index >= size)
    throw new IndexOutOfBoundsException(outOfBoundsMsg(index));
}

// è¿”å›å…ƒç´ 
E elementData(int index) {
  return (E) elementData[index];
}
```

### 1.4 setæ–¹æ³•

æ­¥éª¤ï¼š

- **æ£€æŸ¥è§’æ ‡**
- **æ›¿ä»£å…ƒç´ **
- **è¿”å›æ—§å€¼**

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a47fd7115715d?w=1013&h=453&f=png&s=38341)

### 1.5removeæ–¹æ³•

æ­¥éª¤ï¼š

- **æ£€æŸ¥è§’æ ‡**
- **åˆ é™¤å…ƒç´ **
- **è®¡ç®—å‡ºéœ€è¦ç§»åŠ¨çš„ä¸ªæ•°ï¼Œå¹¶ç§»åŠ¨**
- è®¾ç½®ä¸ºnullï¼Œè®©Gcå›æ”¶

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a47fd72d05022?w=1163&h=638&f=png&s=35905)

 

### 1.6ç»†èŠ‚å†è¯´æ˜

- ArrayListæ˜¯**åŸºäºåŠ¨æ€æ•°ç»„å®ç°çš„**ï¼Œåœ¨**å¢åˆ æ—¶å€™ï¼Œéœ€è¦æ•°ç»„çš„æ‹·è´å¤åˆ¶**ã€‚
- **ArrayListçš„é»˜è®¤åˆå§‹åŒ–å®¹é‡æ˜¯10ï¼Œæ¯æ¬¡æ‰©å®¹æ—¶å€™å¢åŠ åŸå…ˆå®¹é‡çš„ä¸€åŠï¼Œä¹Ÿå°±æ˜¯å˜ä¸ºåŸæ¥çš„1.5å€**
- åˆ é™¤å…ƒç´ æ—¶ä¸ä¼šå‡å°‘å®¹é‡ï¼Œ**è‹¥å¸Œæœ›å‡å°‘å®¹é‡åˆ™è°ƒç”¨trimToSize()**
- å®ƒä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å®ƒèƒ½å­˜æ”¾nullå€¼ã€‚

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a47fd7372e624?w=1060&h=378&f=png&s=18257)

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnmr7fsc1j3073073aa5.jpg)

 

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnyqyo2bnj3076076dga.jpg)

å¦‚æœâ½‚æ¡£ä¸­æœ‰ä»»ä½•çš„ä¸æ‡‚çš„é—®é¢˜ï¼Œéƒ½å¯ä»¥ç›´æ¥æ¥æ‰¾æˆ‘è¯¢é—®ï¼Œæˆ‘ä¹æ„å¸®åŠ©ä½ ä»¬ï¼å¾®ä¿¡æœ**Java3y**å…¬ä¼—å·æœ‰æˆ‘çš„è”ç³»â½…å¼ã€‚æ›´å¤š**åŸåˆ›**æŠ€æœ¯â½‚ç« å¯å…³æ³¨æˆ‘çš„GitHubï¼šhttps://github.com/ZhongFuCheng3y/3y

 

## äºŒã€Vectorä¸ArrayListåŒºåˆ«

Vectoræ˜¯jdk1.2çš„ç±»äº†ï¼Œæ¯”è¾ƒè€æ—§çš„ä¸€ä¸ªé›†åˆç±»ã€‚

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a49ac14ef76d4?w=1264&h=714&f=png&s=55105)

Vectoråº•å±‚ä¹Ÿæ˜¯æ•°ç»„ï¼Œä¸ArrayListæœ€å¤§çš„åŒºåˆ«å°±æ˜¯ï¼š**åŒæ­¥(çº¿ç¨‹å®‰å…¨)**

Vectoræ˜¯åŒæ­¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä»æ–¹æ³•ä¸Šå°±å¯ä»¥çœ‹å¾—å‡ºæ¥~

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a47fd756c6822?w=1768&h=829&f=png&s=116649)

åœ¨è¦æ±‚éåŒæ­¥çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨ArrayListæ¥æ›¿ä»£Vectorçš„äº†~

å¦‚æœæƒ³è¦ArrayListå®ç°åŒæ­¥ï¼Œå¯ä»¥ä½¿ç”¨Collectionsçš„æ–¹æ³•ï¼š`List list = Collections.synchronizedList(new ArrayList(...));`ï¼Œå°±å¯ä»¥å®ç°åŒæ­¥äº†~

è¿˜æœ‰å¦ä¸€ä¸ªåŒºåˆ«ï¼š

- **ArrayListåœ¨åº•å±‚æ•°ç»„ä¸å¤Ÿç”¨æ—¶åœ¨åŸæ¥çš„åŸºç¡€ä¸Šæ‰©å±•0.5å€ï¼ŒVectoræ˜¯æ‰©å±•1å€ã€‚**ã€

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a47fd7863dcf9?w=1092&h=292&f=png&s=14770)

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a47fdc940ee72?w=1184&h=378&f=png&s=22956)

 

## ä¸‰ã€LinkedListè§£æ

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a47fdcc0c1095?w=902&h=565&f=png&s=23073)

LinkedListåº•å±‚æ˜¯**åŒå‘é“¾è¡¨**~å¦‚æœå¯¹äºé“¾è¡¨ä¸ç†Ÿæ‚‰çš„åŒå­¦å¯å…ˆçœ‹çœ‹æˆ‘çš„**å•å‘é“¾è¡¨**(åŒå‘é“¾è¡¨çš„ç»ƒä¹ æˆ‘è¿˜æ²¡åš)ã€[Javaå®ç°å•å‘é“¾è¡¨](https://mp.weixin.qq.com/s?__biz=MzI4Njg5MDA5NA==&mid=2247484086&idx=1&sn=24127ceb5e0fed7f832f82579c4fbc19&chksm=ebd743b7dca0caa1dce912d47251548225aa59b4b48742a963ac52b05e13ec923a738ebcb836#rd)ã€‘

ç†è§£äº†å•å‘é“¾è¡¨ï¼ŒåŒå‘é“¾è¡¨ä¹Ÿå°±ä¸éš¾äº†ã€‚

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a47fdcc30ca90?w=1787&h=688&f=png&s=81323)

ä»ç»“æ„ä¸Šï¼Œæˆ‘ä»¬è¿˜çœ‹åˆ°äº†**LinkedListå®ç°äº†Dequeæ¥å£**ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥**æ“ä½œLinkedListåƒæ“ä½œé˜Ÿåˆ—å’Œæ ˆä¸€æ ·**~

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a47fde94ebaec?w=580&h=842&f=png&s=53096)

LinkedListå˜é‡å°±è¿™ä¹ˆå‡ ä¸ªï¼Œå› ä¸ºæˆ‘ä»¬æ“ä½œå•å‘é“¾è¡¨çš„æ—¶å€™ä¹Ÿå‘ç°äº†ï¼šæœ‰äº†å¤´ç»“ç‚¹ï¼Œå…¶ä»–çš„æ•°æ®æˆ‘ä»¬éƒ½å¯ä»¥è·å–å¾—åˆ°äº†ã€‚(åŒå‘é“¾è¡¨ä¹ŸåŒç†)

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a49ac1501d206?w=942&h=458&f=png&s=15282)

### 3.1æ„é€ æ–¹æ³•

LinkedListçš„æ„é€ æ–¹æ³•æœ‰ä¸¤ä¸ªï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a49ac154b3d14?w=980&h=431&f=png&s=17664)

### 3.2addæ–¹æ³•

å¦‚æœåšè¿‡é“¾è¡¨çš„ç»ƒä¹ ï¼Œå¯¹äºä¸‹é¢çš„ä»£ç å¹¶ä¸é™Œç”Ÿçš„~

- **addæ–¹æ³•å®é™…ä¸Šå°±æ˜¯å¾€é“¾è¡¨æœ€åæ·»åŠ å…ƒç´ **

```
    public boolean add(E e) {
        linkLast(e);
        return true;
    }

    void linkLast(E e) {
        final Node<E> l = last;
        final Node<E> newNode = new Node<>(l, e, null);
        last = newNode;
        if (l == null)
            first = newNode;
        else
            l.next = newNode;
        size++;
        modCount++;
    }
```

### 3.3removeæ–¹æ³•

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a4842e381e45f?w=873&h=452&f=png&s=23841)

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a49ac157dbcd0?w=494&h=604&f=png&s=14924)

å®é™…ä¸Šå°±æ˜¯ä¸‹é¢é‚£ä¸ªå›¾çš„æ“ä½œï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a49ac1584333b?w=393&h=167&f=jpeg&s=9224)

### 3.4getæ–¹æ³•

å¯ä»¥çœ‹åˆ°getæ–¹æ³•å®ç°å°±ä¸¤æ®µä»£ç ï¼š

```
    public E get(int index) {
        checkElementIndex(index);
        return node(index).item;
    }
```

æˆ‘ä»¬è¿›å»çœ‹ä¸€ä¸‹å…·ä½“çš„å®ç°æ˜¯æ€ä¹ˆæ ·çš„ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/8/162a49b16091c1fa?w=892&h=581&f=png&s=27674)

### 3.5setæ–¹æ³•

 

setæ–¹æ³•å’Œgetæ–¹æ³•å…¶å®å·®ä¸å¤šï¼Œ**æ ¹æ®ä¸‹æ ‡æ¥åˆ¤æ–­æ˜¯ä»å¤´éå†è¿˜æ˜¯ä»å°¾éå†**

```
    public E set(int index, E element) {
        checkElementIndex(index);
        Node<E> x = node(index);
        E oldVal = x.item;
        x.item = element;
        return oldVal;
    }

```

 

## å››ã€Listé›†åˆæ€»ç»“

å…¶å®é›†åˆçš„æºç çœ‹èµ·æ¥å¹¶ä¸æ˜¯å¾ˆå›°éš¾ï¼Œé‡åˆ°é—®é¢˜å¯ä»¥ç¿»ä¸€ç¿»ï¼Œåº”è¯¥æ˜¯èƒ½å¤Ÿçœ‹æ‡‚çš„~

ArrayListã€LinkedListã€Vectorç®—æ˜¯åœ¨é¢è¯•é¢˜ä¸­æ¯”è¾ƒå¸¸è§çš„çš„çŸ¥è¯†ç‚¹äº†ã€‚ä¸‹é¢æˆ‘å°±æ¥åšä¸€ä¸ªç®€å•çš„æ€»ç»“ï¼š

**ArrayListï¼š**

- åº•å±‚å®ç°æ˜¯æ•°ç»„
- ArrayListçš„é»˜è®¤åˆå§‹åŒ–å®¹é‡æ˜¯10ï¼Œæ¯æ¬¡æ‰©å®¹æ—¶å€™å¢åŠ åŸå…ˆå®¹é‡çš„ä¸€åŠï¼Œä¹Ÿå°±æ˜¯å˜ä¸ºåŸæ¥çš„1.5å€
- åœ¨**å¢åˆ æ—¶å€™ï¼Œéœ€è¦æ•°ç»„çš„æ‹·è´å¤åˆ¶(navite æ–¹æ³•ç”±C/C++å®ç°)**

**LinkedListï¼š**

- åº•å±‚å®ç°æ˜¯**åŒå‘é“¾è¡¨**[åŒå‘é“¾è¡¨æ–¹ä¾¿å®ç°å¾€å‰éå†]

**Vectorï¼š**

- åº•å±‚æ˜¯æ•°ç»„ï¼Œç°åœ¨å·²å°‘ç”¨ï¼Œè¢«ArrayListæ›¿ä»£ï¼ŒåŸå› æœ‰ä¸¤ä¸ªï¼š
  - Vectoræ‰€æœ‰æ–¹æ³•éƒ½æ˜¯åŒæ­¥ï¼Œ**æœ‰æ€§èƒ½æŸå¤±**ã€‚
  - Vectoråˆå§‹lengthæ˜¯10 è¶…è¿‡lengthæ—¶ ä»¥100%æ¯”ç‡å¢é•¿ï¼Œ**ç›¸æ¯”äºArrayListæ›´å¤šæ¶ˆè€—å†…å­˜**ã€‚

**æ€»çš„æ¥è¯´ï¼šæŸ¥è¯¢å¤šç”¨ArrayListï¼Œå¢åˆ å¤šç”¨LinkedListã€‚**

**ArrayListå¢åˆ æ…¢ä¸æ˜¯ç»å¯¹**çš„(**åœ¨æ•°é‡å¤§çš„æƒ…å†µä¸‹ï¼Œå·²æµ‹è¯•**)ï¼š

- å¦‚æœå¢åŠ å…ƒç´ ä¸€ç›´æ˜¯ä½¿ç”¨`add()`(å¢åŠ åˆ°æœ«å°¾)çš„è¯ï¼Œé‚£æ˜¯ArrayListè¦å¿«
- ä¸€ç›´**åˆ é™¤æœ«å°¾çš„å…ƒç´ ä¹Ÿæ˜¯ArrayListè¦å¿«**ã€ä¸ç”¨å¤åˆ¶ç§»åŠ¨ä½ç½®ã€‘
- è‡³äºå¦‚æœ**åˆ é™¤çš„æ˜¯ä¸­é—´çš„ä½ç½®çš„è¯ï¼Œè¿˜æ˜¯ArrayListè¦å¿«**ï¼

ä½†ä¸€èˆ¬æ¥è¯´ï¼š**å¢åˆ å¤šè¿˜æ˜¯ç”¨LinkedListï¼Œå› ä¸ºä¸Šé¢çš„æƒ…å†µæ˜¯æç«¯çš„~**

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnyzin9wzj3073073mx3.jpg)

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnyqyo2bnj3076076dga.jpg)

å¦‚æœâ½‚æ¡£ä¸­æœ‰ä»»ä½•çš„ä¸æ‡‚çš„é—®é¢˜ï¼Œéƒ½å¯ä»¥ç›´æ¥æ¥æ‰¾æˆ‘è¯¢é—®ï¼Œæˆ‘ä¹æ„å¸®åŠ©ä½ ä»¬ï¼å¾®ä¿¡æœ**Java3y**å…¬ä¼—å·æœ‰æˆ‘çš„è”ç³»â½…å¼ã€‚æ›´å¤š**åŸåˆ›**æŠ€æœ¯â½‚ç« å¯å…³æ³¨æˆ‘çš„GitHubï¼šhttps://github.com/ZhongFuCheng3y/3y

# å››ã€Mapé›†åˆ

 

## ä¸€ã€Mapä»‹ç»

### 1.1ä¸ºä»€ä¹ˆéœ€è¦Map

å‰é¢æˆ‘ä»¬å­¦ä¹ çš„Collectionå«åšé›†åˆï¼Œå®ƒå¯ä»¥å¿«é€ŸæŸ¥æ‰¾ç°æœ‰çš„å…ƒç´ ã€‚

è€ŒMapåœ¨ã€ŠCore Javaã€‹ä¸­ç§°ä¹‹ä¸º-->æ˜ å°„..

æ˜ å°„çš„æ¨¡å‹å›¾æ˜¯è¿™æ ·çš„ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/9/162a98c668c7c9e8?w=739&h=428&f=png&s=9127)

é‚£ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦è¿™ç§æ•°æ®å­˜å‚¨ç»“æ„å‘¢ï¼Ÿï¼Ÿï¼Ÿä¸¾ä¸ªä¾‹å­

- ä½œä¸ºå­¦ç”Ÿæ¥è¯´ï¼Œæˆ‘ä»¬æ˜¯æ ¹æ®å­¦å·æ¥åŒºåˆ†ä¸åŒçš„å­¦ç”Ÿã€‚**åªè¦æˆ‘ä»¬çŸ¥é“å­¦å·ï¼Œå°±å¯ä»¥è·å–å¯¹åº”çš„å­¦ç”Ÿä¿¡æ¯**ã€‚è¿™å°±æ˜¯Mapæ˜ å°„çš„ä½œç”¨ï¼

ç”Ÿæ´»ä¸­è¿˜æœ‰å¾ˆå¤šè¿™æ ·çš„ä¾‹å­ï¼š**åªè¦ä½ æå‡ºèº«ä»½è¯(key)ï¼Œé‚£å°±å¯ä»¥è¯æ˜æ˜¯ä½ è‡ªå·±(value)**

### 1.2Mapä¸Collectionçš„åŒºåˆ«

![img](https://user-gold-cdn.xitu.io/2018/4/9/162a98c668df6d01?w=1149&h=360&f=png&s=22949)

### 1.3Mapçš„åŠŸèƒ½

ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹Mapçš„æºç ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/9/162a98c668d59f7e?w=1885&h=841&f=png&s=161462)

ç®€å•å¸¸ç”¨çš„MapåŠŸèƒ½æœ‰è¿™ä¹ˆä¸€äº›ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/9/162a98c4bf8dce30?w=991&h=703&f=png&s=49294)

ä¸‹é¢ç”¨çº¢è‰²æ¡†æ¡†åœˆä½çš„å°±æ˜¯**Mapå€¼å¾—å…³æ³¨çš„å­ç±»ï¼š**

![img](https://user-gold-cdn.xitu.io/2018/4/9/162a98c4bf76e0d9?w=1411&h=648&f=png&s=28802)

## äºŒã€æ•£åˆ—è¡¨ä»‹ç»

æ— è®ºæ˜¯Setè¿˜æ˜¯Mapï¼Œæˆ‘ä»¬ä¼šå‘ç°éƒ½ä¼šæœ‰å¯¹åº”çš„-->**Hash**Set,**Hash**Map

é¦–å…ˆæˆ‘ä»¬ä¹Ÿå…ˆå¾—**å›é¡¾ä¸€ä¸‹æ•°æ®å’Œé“¾è¡¨**ï¼š

- é“¾è¡¨å’Œæ•°ç»„éƒ½å¯ä»¥æŒ‰ç…§äººä»¬çš„æ„æ„¿æ¥æ’åˆ—å…ƒç´ çš„æ¬¡åºï¼Œä»–ä»¬å¯ä»¥è¯´æ˜¯**æœ‰åº**çš„(å­˜å‚¨çš„é¡ºåºå’Œå–å‡ºçš„é¡ºåºæ˜¯ä¸€è‡´çš„)
- ä½†åŒæ—¶ï¼Œè¿™ä¼šå¸¦æ¥ç¼ºç‚¹ï¼š**æƒ³è¦è·å–æŸä¸ªå…ƒç´ ï¼Œå°±è¦è®¿é—®æ‰€æœ‰çš„å…ƒç´ ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢ã€‚**
- è¿™ä¼šè®©æˆ‘ä»¬æ¶ˆè€—å¾ˆå¤šçš„æ—¶é—´åœ¨é‡Œè¾¹ï¼Œéå†è®¿é—®å…ƒç´ ~

 

è€Œè¿˜æœ‰å¦å¤–çš„ä¸€äº›å­˜å‚¨ç»“æ„ï¼š**ä¸åœ¨æ„å…ƒç´ çš„é¡ºåºï¼Œèƒ½å¤Ÿå¿«é€Ÿçš„æŸ¥æ‰¾å…ƒç´ çš„æ•°æ®**

- å…¶ä¸­å°±æœ‰ä¸€ç§éå¸¸å¸¸è§çš„ï¼š**æ•£åˆ—è¡¨**

### 2.1æ•£åˆ—è¡¨å·¥ä½œåŸç†

æ•£åˆ—è¡¨**ä¸ºæ¯ä¸ªå¯¹è±¡è®¡ç®—å‡ºä¸€ä¸ªæ•´æ•°ï¼Œç§°ä¸ºæ•£åˆ—ç **ã€‚**æ ¹æ®**è¿™äº›è®¡ç®—å‡ºæ¥çš„**æ•´æ•°(æ•£åˆ—ç )ä¿å­˜åœ¨å¯¹åº”çš„ä½ç½®ä¸Š**ï¼

åœ¨Javaä¸­ï¼Œæ•£åˆ—è¡¨ç”¨çš„æ˜¯é“¾è¡¨æ•°ç»„å®ç°çš„ï¼Œ**æ¯ä¸ªåˆ—è¡¨ç§°ä¹‹ä¸ºæ¡¶ã€‚**ã€ä¹‹å‰ä¹Ÿå†™è¿‡[æ¡¶æ’åºå°±è¿™ä¹ˆç®€å•](https://mp.weixin.qq.com/s?__biz=MzI4Njg5MDA5NA==&mid=2247484071&idx=2&sn=5195363e7a5c5e3e7cac2a733c2695e9&chksm=ebd743a6dca0cab0b79aec38ff835116af9079114c9266ef673c6c1009b32b2abf262bf35e0c#rd)ï¼Œå¯ä»¥å›é¡¾å›é¡¾ã€‘

![img](https://user-gold-cdn.xitu.io/2018/4/9/162a98c4bfcecf91?w=2448&h=3264&f=jpeg&s=635016)

ä¸€ä¸ªæ¡¶ä¸Šå¯èƒ½ä¼š**é‡åˆ°è¢«å ç”¨çš„æƒ…å†µ(hashCodeæ•£åˆ—ç ç›¸åŒï¼Œå°±å­˜å‚¨åœ¨åŒä¸€ä¸ªä½ç½®ä¸Š)**ï¼Œè¿™ç§æƒ…å†µæ˜¯æ— æ³•é¿å…çš„ï¼Œè¿™ç§ç°è±¡ç§°ä¹‹ä¸ºï¼š**æ•£åˆ—å†²çª**

- æ­¤æ—¶éœ€è¦**ç”¨è¯¥å¯¹è±¡ä¸æ¡¶ä¸Šçš„å¯¹è±¡è¿›è¡Œæ¯”è¾ƒï¼Œçœ‹çœ‹è¯¥å¯¹è±¡æ˜¯å¦å­˜åœ¨æ¡¶å­ä¸Šäº†**~å¦‚æœå­˜åœ¨ï¼Œå°±ä¸æ·»åŠ äº†ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æ·»åŠ åˆ°æ¡¶å­ä¸Š
- å½“ç„¶äº†ï¼Œå¦‚æœhashcodeå‡½æ•°è®¾è®¡å¾—è¶³å¤Ÿå¥½ï¼Œæ¡¶çš„æ•°ç›®ä¹Ÿè¶³å¤Ÿï¼Œè¿™ç§æ¯”è¾ƒæ˜¯å¾ˆå°‘çš„~
- åœ¨**JDK1.8**ä¸­ï¼Œ**æ¡¶æ»¡æ—¶**ä¼šä»**é“¾è¡¨å˜æˆå¹³è¡¡äºŒå‰æ ‘**

å¦‚æœæ•£åˆ—è¡¨å¤ªæ»¡ï¼Œ**æ˜¯éœ€è¦å¯¹æ•£åˆ—è¡¨å†æ•£åˆ—ï¼Œåˆ›å»ºä¸€ä¸ªæ¡¶æ•°æ›´å¤šçš„æ•£åˆ—è¡¨ï¼Œå¹¶å°†åŸæœ‰çš„å…ƒç´ æ’å…¥åˆ°æ–°è¡¨ä¸­ï¼Œä¸¢å¼ƒåŸæ¥çš„è¡¨**~

- è£…å¡«å› å­(load factor)**å†³å®šäº†ä½•æ—¶**å¯¹æ•£åˆ—è¡¨å†æ•£åˆ—~
- è£…å¡«å› å­é»˜è®¤ä¸º0.75ï¼Œå¦‚æœè¡¨ä¸­**è¶…è¿‡äº†75%çš„ä½ç½®**å·²ç»å¡«å…¥äº†å…ƒç´ ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨å°±ä¼šç”¨**åŒå€çš„æ¡¶æ•°**è‡ªåŠ¨è¿›è¡Œå†æ•£åˆ—

å½“ç„¶äº†ï¼Œ åœ¨åé¢é˜…è¯»æºç çš„æ—¶å€™ä¼šç»§ç»­è¯´æ˜çš„ï¼Œç°åœ¨ç®€å•äº†è§£ä¸€ä¸‹å³å¯~

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnmu1lb2vg306o06ojtg.gif)

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnyqyo2bnj3076076dga.jpg)

å¦‚æœâ½‚æ¡£ä¸­æœ‰ä»»ä½•çš„ä¸æ‡‚çš„é—®é¢˜ï¼Œéƒ½å¯ä»¥ç›´æ¥æ¥æ‰¾æˆ‘è¯¢é—®ï¼Œæˆ‘ä¹æ„å¸®åŠ©ä½ ä»¬ï¼å¾®ä¿¡æœ**Java3y**å…¬ä¼—å·æœ‰æˆ‘çš„è”ç³»â½…å¼ã€‚æ›´å¤š**åŸåˆ›**æŠ€æœ¯â½‚ç« å¯å…³æ³¨æˆ‘çš„GitHubï¼šhttps://github.com/ZhongFuCheng3y/3y

## ä¸‰ã€çº¢é»‘æ ‘ä»‹ç»

ä¸Šé¢æ•£åˆ—è¡¨ä¸­å·²ç»æè¿‡äº†ï¼šå¦‚æœæ¡¶æ•°æ»¡çš„æ—¶å€™ï¼ŒJDK8æ˜¯å°†**é“¾è¡¨è½¬æˆçº¢é»‘æ ‘**çš„~ã€‚å¹¶ä¸”ï¼Œæˆ‘ä»¬çš„TreeSetã€TreeMapåº•å±‚éƒ½æ˜¯çº¢é»‘æ ‘æ¥å®ç°çš„ã€‚

æ‰€ä»¥ï¼Œåœ¨è¿™é‡Œå­¦ä¹ ä¸€æ³¢çº¢é»‘æ ‘åˆ°åº•æ˜¯å•¥ç©æ„ã€‚

åœ¨æœªå­¦ä¹ ä¹‹å‰ï¼Œæˆ‘ä»¬å¯èƒ½æ˜¯å¬è¿‡çº¢é»‘æ ‘è¿™ä¹ˆä¸€ä¸ªæ•°æ®ç»“æ„ç±»å‹çš„ï¼Œè¿˜æœ‰å…¶ä»–ä»€ä¹ˆB/B+æ ‘ç­‰ç­‰ï¼Œåæ­£æ˜¯**æ¯”è¾ƒå¤æ‚çš„æ•°æ®ç»“æ„äº†**~~~

å„ç§å¸¸è§çš„æ ‘çš„ç”¨é€”ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/9/162a98c4c013be70?w=853&h=403&f=png&s=34703)

 

### 3.1å›é¡¾äºŒå‰æŸ¥æ‰¾æ ‘

é¦–å…ˆæˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ï¼šåˆ©ç”¨äºŒå‰æŸ¥æ‰¾æ ‘çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬ä¸€èˆ¬æ¥è¯´å¯ä»¥å¾ˆå¿«åœ°æŸ¥æ‰¾å‡ºå¯¹åº”çš„å…ƒç´ ã€‚

å¯æ˜¯äºŒå‰æŸ¥æ‰¾æ ‘ä¹Ÿæœ‰**ä¸ªä¾‹(æœ€å)**çš„æƒ…å†µ(çº¿æ€§)ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/9/162a98c4bff5dc04?w=406&h=306&f=png&s=20756)

ä¸Šé¢ç¬¦åˆäºŒå‰æ ‘çš„ç‰¹æ€§ï¼Œä½†æ˜¯å®ƒæ˜¯çº¿æ€§çš„ï¼Œå®Œå…¨æ²¡æ ‘çš„ç”¨å¤„~

æ ‘æ˜¯è¦**â€œå‡è¡¡â€**æ‰èƒ½å°†å®ƒçš„ä¼˜ç‚¹å±•ç¤ºå‡ºæ¥çš„~ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ç§ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/9/162a98c4c00eb4d8?w=267&h=216&f=png&s=16913)

å› æ­¤ï¼Œå°±æœ‰äº†**å¹³è¡¡æ ‘**è¿™ä¹ˆä¸€ä¸ªæ¦‚å¿µ~çº¢é»‘æ ‘å°±æ˜¯ä¸€ç§å¹³è¡¡æ ‘ï¼Œå®ƒå¯ä»¥**ä¿è¯äºŒå‰æ ‘åŸºæœ¬ç¬¦åˆçŸ®çŸ®èƒ–èƒ–(å‡è¡¡)çš„ç»“æ„**

### 3.2çŸ¥æ–°2-3æ ‘

è®²åˆ°äº†å¹³è¡¡æ ‘å°±ä¸å¾—ä¸è¯´**æœ€åŸºç¡€**çš„2-3æ ‘ï¼Œ2-3æ ‘**é•¿çš„æ˜¯è¿™ä¸ªæ ·å­ï¼š**

![img](https://user-gold-cdn.xitu.io/2018/4/9/162a98c5343df147?w=1136&h=462&f=png&s=69918)

åœ¨äºŒå‰æŸ¥æ‰¾æ ‘ä¸Šï¼Œæˆ‘ä»¬æ’å…¥èŠ‚ç‚¹çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼šå°äºèŠ‚ç‚¹å€¼å¾€å³ç»§ç»­ä¸å·¦å­èŠ‚ç‚¹æ¯”ï¼Œå¤§äºåˆ™ç»§ç»­ä¸å³å­èŠ‚ç‚¹æ¯”ï¼Œç›´åˆ°æŸèŠ‚ç‚¹å·¦æˆ–å³å­èŠ‚ç‚¹ä¸ºç©ºï¼ŒæŠŠå€¼æ’å…¥è¿›å»ã€‚**è¿™æ ·æ— æ³•é¿å…åå‘é—®é¢˜**

è€Œ2-3æ ‘ä¸ä¸€æ ·ï¼š**å®ƒæ’å…¥çš„æ—¶å€™å¯ä»¥ä¿æŒæ ‘çš„å¹³è¡¡**ï¼

åœ¨2-3æ ‘æ’å…¥çš„æ—¶å¯ä»¥ç®€å•æ€»ç»“ä¸ºä¸¤ä¸ªæ“ä½œï¼š

- **åˆå¹¶2-èŠ‚ç‚¹ä¸º3-èŠ‚ç‚¹ï¼Œæ‰©å……å°†3-èŠ‚ç‚¹æ‰©å……ä¸ºä¸€ä¸ª4-èŠ‚ç‚¹**
- **åˆ†è§£4-èŠ‚ç‚¹ä¸º3-èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹3-èŠ‚ç‚¹ä¸º2-èŠ‚ç‚¹**
- ........**è‡³ä½¿å¾—æ ‘å¹³è¡¡**~

åˆå¹¶åˆ†è§£çš„æ“ä½œè¿˜æ˜¯**æ¯”è¾ƒå¤æ‚çš„ï¼Œè¦åˆ†å¥½å‡ ç§æƒ…å†µ**ï¼Œä»£ç é‡å¾ˆå¤§~è¿™é‡Œæˆ‘å°±ä¸ä»‹ç»äº†ï¼Œå› ä¸ºè¦å­¦èµ·æ¥æ˜¯ä¸€å¤§å †çš„ï¼Œå¾ˆéº»çƒ¦~

### 3.3ä»2-3æ ‘åˆ°çº¢é»‘æ ‘

ç”±äº2-3æ ‘ä¸ºäº†ä¿æŒå¹³è¡¡æ€§ï¼Œåœ¨ç»´æŠ¤çš„æ—¶å€™æ˜¯éœ€è¦å¤§é‡çš„èŠ‚ç‚¹äº¤æ¢çš„ï¼è¿™äº›å˜æ¢åœ¨å®é™…ä»£ç ä¸­æ˜¯å¾ˆå¤æ‚çš„ï¼Œå¤§ä½¬ä»¬**åœ¨2-3æ ‘çš„ç†è®ºåŸºç¡€ä¸Šå‘æ˜äº†çº¢é»‘æ ‘**(2-3-4æ ‘ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œåªæ˜¯2-3æ ‘æ˜¯æœ€ç®€å•çš„ä¸€ç§æƒ…å†µï¼Œæ‰€ä»¥æˆ‘å°±ä¸è¯´2-3-4æ ‘äº†)ã€‚

- çº¢é»‘æ ‘æ˜¯å¯¹2-3æŸ¥æ‰¾æ ‘çš„æ”¹è¿›ï¼Œå®ƒèƒ½ç”¨ä¸€ç§**ç»Ÿä¸€çš„æ–¹å¼å®Œæˆæ‰€æœ‰å˜æ¢**ã€‚

çº¢é»‘æ ‘æ˜¯ä¸€ç§**å¹³è¡¡äºŒå‰æ ‘**,å› æ­¤å®ƒæ²¡æœ‰3-èŠ‚ç‚¹ã€‚é‚£çº¢é»‘æ ‘æ˜¯æ€ä¹ˆå°†3-èŠ‚ç‚¹æ¥æ”¹è¿›æˆå…¨éƒ½æ˜¯äºŒå‰æ ‘å‘¢ï¼Ÿ

çº¢é»‘æ ‘å°±å­—é¢ä¸Šçš„æ„æ€ï¼Œ**æœ‰çº¢è‰²çš„èŠ‚ç‚¹ï¼Œæœ‰é»‘è‰²çš„èŠ‚ç‚¹**ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/9/162a98c527fa9621?w=842&h=486&f=png&s=245153)

æˆ‘ä»¬å¯ä»¥å°†çº¢è‰²èŠ‚ç‚¹çš„**å·¦é“¾æ¥**ç”»å¹³çœ‹çœ‹ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/9/162a98c5345d5cfb?w=346&h=420&f=png&s=19591)

ä¸€é¢—å…¸å‹çš„äºŒå‰æ ‘ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/9/162a98c544a2fa28?w=766&h=472&f=png&s=78824)

**å°†çº¢è‰²èŠ‚ç‚¹çš„å·¦é“¾æ¥ç”»å¹³ä¹‹åï¼šå¾—åˆ°2-3å¹³è¡¡æ ‘:**

![img](https://user-gold-cdn.xitu.io/2018/4/9/162a98c5802d3394?w=1007&h=341&f=png&s=61333)

### 3.4çº¢é»‘æ ‘åŸºç¡€çŸ¥è¯†

å‰é¢å·²ç»è¯´äº†ï¼Œçº¢é»‘æ ‘æ˜¯åœ¨2-3çš„åŸºç¡€ä¸Šå®ç°çš„ä¸€ç§æ ‘ï¼Œå®ƒèƒ½å¤Ÿç”¨ç»Ÿä¸€çš„æ–¹å¼å®Œæˆæ‰€æœ‰å˜æ¢ã€‚å¾ˆå¥½ç†è§£ï¼šçº¢é»‘æ ‘ä¹Ÿæ˜¯å¹³è¡¡æ ‘çš„ä¸€ç§ï¼Œåœ¨æ’å…¥å…ƒç´ çš„æ—¶å€™å®ƒä¹Ÿå¾—ä¿æŒæ ‘çš„å¹³è¡¡ï¼Œé‚£çº¢é»‘æ ‘æ˜¯ä»¥ä»€ä¹ˆçš„æ–¹å¼æ¥ä¿æŒæ ‘çš„å¹³è¡¡çš„å‘¢ï¼Ÿ

çº¢é»‘æ ‘ç”¨çš„æ˜¯ä¹Ÿæ˜¯ä¸¤ç§æ–¹å¼æ¥æ›¿ä»£2-3æ ‘ä¸æ–­çš„èŠ‚ç‚¹äº¤æ¢æ“ä½œï¼š

- **æ—‹è½¬**ï¼šé¡ºæ—¶é’ˆæ—‹è½¬å’Œé€†æ—¶é’ˆæ—‹è½¬
- **åè‰²**ï¼šäº¤æ¢çº¢é»‘çš„é¢œè‰²
- è¿™ä¸ªä¸¤ä¸ªå®ç°æ¯”2-3æ ‘äº¤æ¢çš„èŠ‚ç‚¹(åˆå¹¶ï¼Œåˆ†è§£)è¦æ–¹ä¾¿ä¸€äº›

 

çº¢é»‘æ ‘ä¸ºäº†ä¿æŒå¹³è¡¡ï¼Œè¿˜æœ‰åˆ¶å®šä¸€äº›çº¦æŸï¼Œéµå®ˆè¿™äº›çº¦æŸçš„æ‰èƒ½å«åšçº¢é»‘æ ‘ï¼š

1. çº¢é»‘æ ‘æ˜¯äºŒå‰æœç´¢æ ‘ã€‚
2. **æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²**ã€‚
3. **æ¯ä¸ªå¶å­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²çš„ç©ºèŠ‚ç‚¹ï¼ˆNILèŠ‚ç‚¹ï¼‰**ã€‚
4. **æ¯ä¸ªçº¢è‰²èŠ‚ç‚¹çš„ä¸¤ä¸ªå­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²ã€‚(ä»æ¯ä¸ªå¶å­åˆ°æ ¹çš„æ‰€æœ‰è·¯å¾„ä¸Šä¸èƒ½æœ‰ä¸¤ä¸ªè¿ç»­çš„çº¢è‰²èŠ‚ç‚¹)**
5. **ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ¯ä¸ªå¶å­çš„æ‰€æœ‰è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹(æ¯ä¸€æ¡æ ‘é“¾ä¸Šçš„é»‘è‰²èŠ‚ç‚¹æ•°é‡ï¼ˆç§°ä¹‹ä¸ºâ€œé»‘é«˜â€ï¼‰å¿…é¡»ç›¸ç­‰)**ã€‚

 

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnyzin9wzj3073073mx3.jpg)

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnyqyo2bnj3076076dga.jpg)

å¦‚æœâ½‚æ¡£ä¸­æœ‰ä»»ä½•çš„ä¸æ‡‚çš„é—®é¢˜ï¼Œéƒ½å¯ä»¥ç›´æ¥æ¥æ‰¾æˆ‘è¯¢é—®ï¼Œæˆ‘ä¹æ„å¸®åŠ©ä½ ä»¬ï¼å¾®ä¿¡æœ**Java3y**å…¬ä¼—å·æœ‰æˆ‘çš„è”ç³»â½…å¼ã€‚æ›´å¤š**åŸåˆ›**æŠ€æœ¯â½‚ç« å¯å…³æ³¨æˆ‘çš„GitHubï¼šhttps://github.com/ZhongFuCheng3y/3y

 

# äº”ã€HashMap

## ä¸€ã€HashMapå‰–æ

é¦–å…ˆçœ‹çœ‹HashMapçš„é¡¶éƒ¨æ³¨é‡Šè¯´äº†äº›ä»€ä¹ˆï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af937c93cdef6?w=1918&h=3204&f=png&s=401056)

å†æ¥çœ‹çœ‹HashMapçš„ç±»ç»§æ‰¿å›¾ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af938010aba80?w=653&h=336&f=png&s=10307)

ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹HashMapçš„å±æ€§ï¼š

![img](https://tva1.sinaimg.cn/large/00831rSTly1gd1l4umh86j30ya0u0dwv.jpg)

æˆå‘˜å±æ€§æœ‰è¿™ä¹ˆå‡ ä¸ªï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af937fb0ec0da?w=512&h=156&f=png&s=5947)

å†æ¥çœ‹ä¸€ä¸‹hashMapçš„ä¸€ä¸ªå†…éƒ¨ç±»Nodeï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af9380220c754?w=1076&h=764&f=png&s=41254)

æˆ‘ä»¬çŸ¥é“Hashçš„åº•å±‚æ˜¯æ•£åˆ—è¡¨ï¼Œè€Œåœ¨Javaä¸­æ•£åˆ—è¡¨çš„å®ç°æ˜¯é€šè¿‡æ•°ç»„+é“¾è¡¨çš„~

å†æ¥ç®€å•çœ‹çœ‹putæ–¹æ³•å°±å¯ä»¥å°è¯æˆ‘ä»¬çš„è¯´æ³•äº†ï¼š**æ•°ç»„+é“¾è¡¨-->æ•£åˆ—è¡¨**

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af93802eac5e0?w=820&h=86&f=png&s=5384)

æˆ‘ä»¬å¯ä»¥ç®€å•æ€»ç»“å‡ºHashMapï¼š

- **æ— åºï¼Œå…è®¸ä¸ºnullï¼ŒéåŒæ­¥**
- **åº•å±‚ç”±æ•£åˆ—è¡¨(å“ˆå¸Œè¡¨)å®ç°**
- **åˆå§‹å®¹é‡å’Œè£…è½½å› å­å¯¹HashMapå½±å“æŒºå¤§çš„**ï¼Œè®¾ç½®å°äº†ä¸å¥½ï¼Œè®¾ç½®å¤§äº†ä¹Ÿä¸å¥½

### 1.1HashMapæ„é€ æ–¹æ³•

HashMapçš„æ„é€ æ–¹æ³•æœ‰4ä¸ªï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af95d47ae4286?w=480&h=104&f=png&s=5442)

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af95d47933b6c?w=1380&h=581&f=png&s=56374)

åœ¨ä¸Šé¢çš„æ„é€ æ–¹æ³•æœ€åä¸€è¡Œï¼Œæˆ‘ä»¬ä¼šå‘ç°è°ƒç”¨äº†`tableSizeFor()`ï¼Œæˆ‘ä»¬è¿›å»çœ‹çœ‹ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af95d47aaf53b?w=1147&h=479&f=png&s=20927)

çœ‹å®Œä¸Šé¢å¯èƒ½ä¼šæ„Ÿåˆ°å¥‡æ€ªçš„æ˜¯ï¼š**ä¸ºå•¥æ˜¯å°†2çš„æ•´æ•°å¹‚çš„æ•°èµ‹ç»™threshold**ï¼Ÿ

- thresholdè¿™ä¸ªæˆå‘˜å˜é‡æ˜¯é˜ˆå€¼ï¼Œå†³å®šäº†æ˜¯å¦è¦å°†æ•£åˆ—è¡¨å†æ•£åˆ—ã€‚å®ƒçš„å€¼åº”è¯¥æ˜¯ï¼š`capacity * load factor`æ‰å¯¹çš„ã€‚

å…¶å®è¿™é‡Œä»…ä»…æ˜¯ä¸€ä¸ªåˆå§‹åŒ–ï¼Œå½“åˆ›å»ºå“ˆå¸Œè¡¨çš„æ—¶å€™ï¼Œå®ƒä¼šé‡æ–°èµ‹å€¼çš„ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af938b6338ab4?w=1021&h=150&f=png&s=11210)

 

è‡³äºåˆ«çš„æ„é€ æ–¹æ³•éƒ½å·®ä¸å¤šï¼Œè¿™é‡Œæˆ‘å°±ä¸ç»†è®²äº†ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af938b67cf682?w=1164&h=716&f=png&s=38464)

### 1.2putæ–¹æ³•

putæ–¹æ³•å¯ä»¥è¯´æ˜¯HashMapçš„æ ¸å¿ƒï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af938d92f7922?w=1199&h=193&f=png&s=14926)

æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒæ˜¯æ€ä¹ˆè®¡ç®—å“ˆå¸Œå€¼çš„ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af93916375d72?w=1387&h=579&f=png&s=24464)

ä¸ºä»€ä¹ˆè¦è¿™æ ·å¹²å‘¢ï¼Ÿï¼Ÿæˆ‘ä»¬ä¸€èˆ¬æ¥è¯´ç›´æ¥å°†keyä½œä¸ºå“ˆå¸Œå€¼ä¸å°±å¥½äº†å—ï¼Œåšå¼‚æˆ–è¿ç®—æ˜¯å¹²å˜›ç”¨çš„ï¼Ÿï¼Ÿ

æˆ‘ä»¬çœ‹ä¸‹æ¥ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af93924747fde?w=1076&h=434&f=png&s=26670)

æˆ‘ä»¬æ˜¯æ ¹æ®keyçš„å“ˆå¸Œå€¼æ¥ä¿å­˜åœ¨æ•£åˆ—è¡¨ä¸­çš„ï¼Œæˆ‘ä»¬è¡¨é»˜è®¤çš„åˆå§‹å®¹é‡æ˜¯16ï¼Œè¦æ”¾åˆ°æ•£åˆ—è¡¨ä¸­ï¼Œå°±æ˜¯0-15çš„ä½ç½®ä¸Šã€‚ä¹Ÿå°±æ˜¯`tab[i = (n - 1) & hash]`ã€‚å¯ä»¥å‘ç°çš„æ˜¯ï¼šåœ¨åš`&`è¿ç®—çš„æ—¶å€™ï¼Œä»…ä»…æ˜¯**å4ä½æœ‰æ•ˆ**~é‚£å¦‚æœæˆ‘ä»¬keyçš„å“ˆå¸Œå€¼é«˜ä½å˜åŒ–å¾ˆå¤§ï¼Œä½ä½å˜åŒ–å¾ˆå°ã€‚ç›´æ¥æ‹¿è¿‡å»åš`&`è¿ç®—ï¼Œè¿™å°±ä¼šå¯¼è‡´è®¡ç®—å‡ºæ¥çš„Hashå€¼ç›¸åŒçš„å¾ˆå¤šã€‚

è€Œè®¾è®¡è€…**å°†keyçš„å“ˆå¸Œå€¼çš„é«˜ä½ä¹Ÿåšäº†è¿ç®—(ä¸é«˜16ä½åšå¼‚æˆ–è¿ç®—ï¼Œä½¿å¾—åœ¨åš&è¿ç®—æ—¶ï¼Œæ­¤æ—¶çš„ä½ä½å®é™…ä¸Šæ˜¯é«˜ä½ä¸ä½ä½çš„ç»“åˆ)ï¼Œè¿™å°±å¢åŠ äº†éšæœºæ€§**ï¼Œå‡å°‘äº†ç¢°æ’å†²çªçš„å¯èƒ½æ€§ï¼

ä¸‹é¢æˆ‘ä»¬å†æ¥çœ‹çœ‹æµç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af93963a2de0e?w=1918&h=1575&f=png&s=191878)

æ–°å€¼è¦†ç›–æ—§å€¼ï¼Œè¿”å›æ—§å€¼æµ‹è¯•ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af939656de4be?w=1152&h=438&f=png&s=20739)

æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹`resize()`æ–¹æ³•ï¼Œåœ¨åˆå§‹åŒ–çš„æ—¶å€™è¦è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå½“æ•£åˆ—è¡¨å…ƒç´ å¤§äº`capacity * load factor`çš„æ—¶å€™ä¹Ÿæ˜¯è°ƒç”¨`resize()`

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af939881bfb80?w=1918&h=2682&f=png&s=245904)

 

### 1.3getæ–¹æ³•

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af939ca9ea5df?w=1106&h=321&f=png&s=22408)

æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹`getNode()`æ˜¯æ€ä¹ˆå®ç°çš„ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af939f6e95dbc?w=1453&h=714&f=png&s=53051)

### 1.4removeæ–¹æ³•

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af93a099814ad?w=1060&h=270&f=png&s=19546)

å†æ¥çœ‹çœ‹`removeNode()`çš„å®ç°ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af93a0b663581?w=1918&h=1758&f=png&s=179699)

## äºŒã€HashMapä¸Hashtableå¯¹æ¯”

> ä»å­˜å‚¨ç»“æ„å’Œå®ç°æ¥è®²åŸºæœ¬ä¸Šéƒ½æ˜¯ç›¸åŒçš„ã€‚å®ƒå’ŒHashMapçš„æœ€å¤§çš„ä¸åŒæ˜¯å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦å¤–å®ƒä¸å…è®¸keyå’Œvalueä¸ºnullã€‚Hashtableæ˜¯ä¸ªè¿‡æ—¶çš„é›†åˆç±»ï¼Œä¸å»ºè®®åœ¨æ–°ä»£ç ä¸­ä½¿ç”¨ï¼Œä¸éœ€è¦çº¿ç¨‹å®‰å…¨çš„åœºåˆå¯ä»¥ç”¨HashMapæ›¿æ¢ï¼Œéœ€è¦çº¿ç¨‹å®‰å…¨çš„åœºåˆå¯ä»¥ç”¨ConcurrentHashMapæ›¿æ¢

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af93a329c3635?w=999&h=535&f=png&s=29128)

## ä¸‰ã€HashMapæ€»ç»“

åœ¨JDK8ä¸­HashMapçš„åº•å±‚æ˜¯ï¼š**æ•°ç»„+é“¾è¡¨(æ•£åˆ—è¡¨)+çº¢é»‘æ ‘**

åœ¨æ•£åˆ—è¡¨ä¸­æœ‰è£…è½½å› å­è¿™ä¹ˆä¸€ä¸ªå±æ€§ï¼Œå½“è£…è½½å› å­*åˆå§‹å®¹é‡å°äºæ•£åˆ—è¡¨å…ƒç´ æ—¶ï¼Œè¯¥æ•£åˆ—è¡¨ä¼šå†æ•£åˆ—ï¼Œæ‰©å®¹2å€ï¼

è£…è½½å› å­çš„**é»˜è®¤å€¼æ˜¯0.75**ï¼Œæ— è®ºæ˜¯åˆå§‹å¤§äº†è¿˜æ˜¯åˆå§‹å°äº†å¯¹æˆ‘ä»¬HashMapçš„æ€§èƒ½éƒ½ä¸å¥½

- è£…è½½å› å­åˆå§‹å€¼å¤§äº†ï¼Œå¯ä»¥å‡å°‘æ•£åˆ—è¡¨å†æ•£åˆ—(æ‰©å®¹çš„æ¬¡æ•°)ï¼Œä½†åŒæ—¶ä¼šå¯¼è‡´æ•£åˆ—å†²çªçš„å¯èƒ½æ€§å˜å¤§(**æ•£åˆ—å†²çªä¹Ÿæ˜¯è€—æ€§èƒ½çš„ä¸€ä¸ªæ“ä½œï¼Œè¦å¾—æ“ä½œé“¾è¡¨(çº¢é»‘æ ‘)**ï¼
- è£…è½½å› å­åˆå§‹å€¼å°äº†ï¼Œå¯ä»¥å‡å°æ•£åˆ—å†²çªçš„å¯èƒ½æ€§ï¼Œä½†åŒæ—¶æ‰©å®¹çš„æ¬¡æ•°å¯èƒ½å°±ä¼šå˜å¤šï¼

åˆå§‹å®¹é‡çš„**é»˜è®¤å€¼æ˜¯16**ï¼Œå®ƒä¹Ÿä¸€æ ·ï¼Œæ— è®ºåˆå§‹å¤§äº†è¿˜æ˜¯å°äº†ï¼Œå¯¹æˆ‘ä»¬çš„HashMapéƒ½æ˜¯æœ‰å½±å“çš„ï¼š

- åˆå§‹å®¹é‡è¿‡å¤§ï¼Œé‚£ä¹ˆéå†æ—¶æˆ‘ä»¬çš„é€Ÿåº¦å°±ä¼šå—å½±å“~
- åˆå§‹å®¹é‡è¿‡å°ï¼Œæ•£åˆ—è¡¨å†æ•£åˆ—(æ‰©å®¹çš„æ¬¡æ•°)å¯èƒ½å°±å˜å¾—å¤šï¼Œæ‰©å®¹ä¹Ÿæ˜¯ä¸€ä»¶éå¸¸è€—è´¹æ€§èƒ½çš„ä¸€ä»¶äº‹~

ä»æºç ä¸Šæˆ‘ä»¬å¯ä»¥å‘ç°ï¼šHashMapå¹¶ä¸æ˜¯ç›´æ¥æ‹¿keyçš„å“ˆå¸Œå€¼æ¥ç”¨çš„ï¼Œå®ƒä¼šå°†keyçš„å“ˆå¸Œå€¼çš„é«˜16ä½è¿›è¡Œå¼‚æˆ–æ“ä½œï¼Œä½¿å¾—æˆ‘ä»¬å°†å…ƒç´ æ”¾å…¥å“ˆå¸Œè¡¨çš„æ—¶å€™**å¢åŠ äº†ä¸€å®šçš„éšæœºæ€§**ã€‚

è¿˜è¦å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š**å¹¶ä¸æ˜¯æ¡¶å­ä¸Šæœ‰8ä½å…ƒç´ çš„æ—¶å€™å®ƒå°±èƒ½å˜æˆçº¢é»‘æ ‘ï¼Œå®ƒå¾—åŒæ—¶æ»¡è¶³æˆ‘ä»¬çš„æ•£åˆ—è¡¨å®¹é‡å¤§äº64æ‰è¡Œçš„**~

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af95d47d6e490?w=810&h=481&f=png&s=24112)

![img](https://user-gold-cdn.xitu.io/2018/4/10/162af95d47c40565?w=1113&h=607&f=png&s=33442)

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnyxk0p5kj3073073glh.jpg)

 

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnyqyo2bnj3076076dga.jpg)

å¦‚æœâ½‚æ¡£ä¸­æœ‰ä»»ä½•çš„ä¸æ‡‚çš„é—®é¢˜ï¼Œéƒ½å¯ä»¥ç›´æ¥æ¥æ‰¾æˆ‘è¯¢é—®ï¼Œæˆ‘ä¹æ„å¸®åŠ©ä½ ä»¬ï¼å¾®ä¿¡æœ**Java3y**å…¬ä¼—å·æœ‰æˆ‘çš„è”ç³»â½…å¼ã€‚æ›´å¤š**åŸåˆ›**æŠ€æœ¯â½‚ç« å¯å…³æ³¨æˆ‘çš„GitHubï¼šhttps://github.com/ZhongFuCheng3y/3y

# å…­ã€LinkedHashMap

## ä¸€ã€LinkedHashMap

é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹ç±»ç»§æ‰¿å›¾ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/11/162b474575fafe4c?w=944&h=521&f=png&s=18618)

æˆ‘ç®€å•ç¿»è¯‘äº†ä¸€ä¸‹é¡¶éƒ¨çš„æ³¨é‡Š(æˆ‘è‹±æ–‡æ°´å¹³æ¸£ï¼Œå¦‚æœæœ‰é”™çš„åœ°æ–¹è¯·å¤šå¤šåŒ…æ¶µ~æ¬¢è¿åœ¨è¯„è®ºåŒºä¸‹æŒ‡æ­£)

![img](https://user-gold-cdn.xitu.io/2018/4/11/162b474575e967e3?w=1918&h=3945&f=png&s=476864)

ä»é¡¶éƒ¨ç¿»è¯‘æˆ‘ä»¬å°±å¯ä»¥å½’çº³æ€»ç»“å‡ºLinkedHashMapå‡ ç‚¹ï¼š

- åº•å±‚æ˜¯æ•£åˆ—è¡¨å’ŒåŒå‘é“¾è¡¨
- å…è®¸ä¸ºnullï¼Œä¸åŒæ­¥
- æ’å…¥çš„é¡ºåºæ˜¯æœ‰åºçš„(åº•å±‚é“¾è¡¨è‡´ä½¿æœ‰åº)
- è£…è½½å› å­å’Œåˆå§‹å®¹é‡å¯¹LinkedHashMapå½±å“æ˜¯å¾ˆå¤§çš„~

åŒæ—¶ä¹Ÿç»™æˆ‘å¸¦äº†å‡ ä¸ªç–‘é—®ï¼š

- access-orderedå’Œinsertion-orderedå…·ä½“çš„ä½¿ç”¨å’Œæ„æ€
- ä¸ºä»€ä¹ˆè¯´åˆå§‹å®¹é‡å¯¹éå†æ²¡æœ‰å½±å“ï¼Ÿ

å¸Œæœ›å¯ä»¥åœ¨çœ‹æºç çš„è¿‡ç¨‹ä¸­å¯ä»¥è§£å†³æ‰æˆ‘è¿™ä¸¤ä¸ªç–‘é—®~~~é‚£æ¥ä¸‹æ¥å°±å¼€å§‹å§

### 1.1LinkedHashMapçš„åŸŸ

![img](https://user-gold-cdn.xitu.io/2018/4/11/162b47457600a1b8?w=1895&h=752&f=png&s=111297)

### 1.2LinkedHashMapé‡å†™çš„æ–¹æ³•

ä¸‹é¢æˆ‘åˆ—ä¸¾å°±è¿™ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/11/162b47457616a684?w=1123&h=408&f=png&s=22461)

è¿™å°±å°è¯äº†æˆ‘ä»¬çš„LinkedHashMap**åº•å±‚ç¡®ç¡®å®å®æ˜¯æ•£åˆ—è¡¨å’ŒåŒå‘é“¾è¡¨**~

- åœ¨æ„å»ºæ–°èŠ‚ç‚¹æ—¶ï¼Œæ„å»ºçš„æ˜¯`LinkedHashMap.Entry` ä¸å†æ˜¯`Node`.

### 1.3æ„é€ æ–¹æ³•

å¯ä»¥å‘ç°ï¼ŒLinkedHashMapæœ‰**5ä¸ªæ„é€ æ–¹æ³•**ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/11/162b474576141755?w=498&h=146&f=png&s=8442)

ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹æ„é€ æ–¹æ³•çš„å®šä¹‰æ˜¯æ€ä¹ˆæ ·çš„ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/11/162b47346bf82692?w=1918&h=2244&f=png&s=212727)

ä»æ„é€ æ–¹æ³•ä¸Šæˆ‘ä»¬å¯ä»¥çŸ¥é“çš„æ˜¯ï¼š**LinkedHashMapé»˜è®¤ä½¿ç”¨çš„æ˜¯æ’å…¥é¡ºåº**

### 1.4putæ–¹æ³•

åŸæœ¬æˆ‘æ˜¯æƒ³è¦æ‰¾putæ–¹æ³•ï¼Œçœ‹çœ‹æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œ**åæ¥æ²¡æ‰¾ç€ï¼Œå°±å¥‡äº†ä¸ªæ€ª**~

![img](https://user-gold-cdn.xitu.io/2018/4/11/162b47357022f53f?w=550&h=812&f=png&s=55174)

å†é¡¿äº†ä¸€ä¸‹ï¼ŒåŸæ¥LinkedHashMapå’ŒHashMapçš„putæ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼LinkedHashMapç»§æ‰¿ç€HashMapï¼ŒLinkedHashMapæ²¡æœ‰é‡å†™HashMapçš„putæ–¹æ³•

æ‰€ä»¥ï¼ŒLinkedHashMapçš„putæ–¹æ³•å’ŒHashMapæ˜¯ä¸€æ ·çš„ã€‚

å½“ç„¶äº†ï¼Œ**åœ¨åˆ›å»ºèŠ‚ç‚¹çš„æ—¶å€™ï¼Œè°ƒç”¨çš„æ˜¯LinkedHashMapé‡å†™çš„æ–¹æ³•**~

![img](https://user-gold-cdn.xitu.io/2018/4/11/162b4735a03c2d83?w=1093&h=788&f=png&s=43822)

### 1.5getæ–¹æ³•

![img](https://user-gold-cdn.xitu.io/2018/4/11/162b4736552c3400?w=957&h=268&f=png&s=20080)

![img](https://user-gold-cdn.xitu.io/2018/4/11/162b473658809fd8?w=1130&h=664&f=png&s=27257)

getæ–¹æ³•ä¹Ÿæ˜¯å¤šäº†ï¼š**åˆ¤æ–­æ˜¯å¦ä¸ºè®¿é—®é¡ºåº**~~~

è®²åˆ°äº†è¿™é‡Œï¼Œæ„Ÿè§‰æˆ‘ä»¬å¯ä»¥ç®€å•æµ‹è¯•ä¸€æ³¢äº†ï¼š

é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹å·²**æ’å…¥é¡ºåº**æ¥è¿›è¡Œæ’å…¥å’Œéå†ï¼š

```
    public static void insertOrder() {

        // é»˜è®¤æ˜¯æ’å…¥é¡ºåº
        LinkedHashMap<Integer,String>  insertOrder = new LinkedHashMap();

        String value = "å…³æ³¨å…¬ä¼—å·Java3y";
        int i = 0;

        insertOrder.put(i++, value);
        insertOrder.put(i++, value);
        insertOrder.put(i++, value);
        insertOrder.put(i++, value);
        insertOrder.put(i++, value);

        //éå†
        Set<Integer> set = insertOrder.keySet();
        for (Integer s : set) {
            String mapValue = insertOrder.get(s);
            System.out.println(s + "---" + mapValue);
        }
    }
```

æµ‹è¯•ä¸€æ³¢ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/11/162b4736cf833cb2?w=1174&h=684&f=png&s=45180)

æ¥ç€ï¼Œæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ä»¥**è®¿é—®é¡ºåº**æ¥è¿›è¡Œæ’å…¥å’Œéå†ï¼š

```
    public static void accessOrder() {
        // è®¾ç½®ä¸ºè®¿é—®é¡ºåºçš„æ–¹å¼
        LinkedHashMap<Integer,String> accessOrder = new LinkedHashMap(16, 0.75f, true);

        String value = "å…³æ³¨å…¬ä¼—å·Java3y";
        int i = 0;
        accessOrder.put(i++, value);
        accessOrder.put(i++, value);
        accessOrder.put(i++, value);
        accessOrder.put(i++, value);
        accessOrder.put(i++, value);


        // éå†
        Set<Integer> sets = accessOrder.keySet();
        for (Integer key : sets) {
            String mapValue = accessOrder.get(key);
            System.out.println(key + "---" + mapValue);
        }

    }

```

ä»£ç **çœ‹ä¼¼**æ˜¯æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯è¿è¡Œä¼šå‡ºé”™çš„ï¼

![img](https://user-gold-cdn.xitu.io/2018/4/11/162b4736d0bc28a9?w=1452&h=252&f=png&s=19798)

å‰é¢åœ¨çœ‹æºç æ³¨é‡Šçš„æ—¶å€™æˆ‘ä»¬å°±å‘ç°äº†ï¼š**åœ¨AccessOrderçš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨getæ–¹æ³•ä¹Ÿæ˜¯ç»“æ„æ€§çš„ä¿®æ”¹**ï¼

ä¸ºäº†ç®€å•çœ‹å‡ºä»–ä¿©çš„åŒºåˆ«ï¼Œä¸‹é¢æˆ‘å°±**ç›´æ¥ç”¨keyæ¥è¿›è¡Œçœ‹äº†**~

ä»¥ä¸‹æ˜¯**è®¿é—®é¡ºåºçš„æµ‹è¯•**ï¼š

```

    public static void accessOrder() {
        // è®¾ç½®ä¸ºè®¿é—®é¡ºåºçš„æ–¹å¼
        LinkedHashMap<Integer,String> accessOrder = new LinkedHashMap(16, 0.75f, true);

        String value = "å…³æ³¨å…¬ä¼—å·Java3y";
        int i = 0;
        accessOrder.put(i++, value);
        accessOrder.put(i++, value);
        accessOrder.put(i++, value);
        accessOrder.put(i++, value);
        accessOrder.put(i++, value);


        // è®¿é—®ä¸€ä¸‹keyä¸º3çš„å…ƒç´ å†è¿›è¡Œéå†
        accessOrder.get(3);

        // éå†
        Set<Integer> sets = accessOrder.keySet();
        for (Integer key : sets) {

            System.out.println(key );
        }

    }

```

æµ‹è¯•ç»“æœï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/11/162b4736d5290da7?w=1096&h=615&f=png&s=25532)

ä»¥ä¸‹æ˜¯**æ’å…¥é¡ºåºçš„æµ‹è¯•**(ä»£ç å°±ä¸è´´äº†ï¼Œå’Œä¸Šé¢å‡ ä¹ä¸€æ ·)ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/11/162b4736d7747fd5?w=1270&h=548&f=png&s=29777)

æˆ‘ä»¬å¯ä»¥è¿™æ ·ç†è§£ï¼š**æœ€å¸¸ç”¨çš„å°†å…¶æ”¾åœ¨é“¾è¡¨çš„æœ€åï¼Œä¸å¸¸ç”¨çš„æ”¾åœ¨é“¾è¡¨çš„æœ€å‰**~

è¿™ä¸ªçŸ¥è¯†ç‚¹ä»¥æˆ‘çš„ç†è§£è€Œè¨€ï¼Œå®ƒè¿™ä¸ª**è®¿é—®é¡ºåºåœ¨LinkedHashMapå¦‚æœä¸é‡å†™ç”¨å¤„å¹¶ä¸å¤§**~å®ƒæ˜¯ç”¨æ¥ç»™åˆ«çš„å®ç°è¿›è¡Œ**æ‰©å±•**çš„

- **å› ä¸ºæœ€å¸¸è¢«ä½¿ç”¨çš„å…ƒç´ å†éå†çš„æ—¶å€™å´æ”¾åœ¨äº†æœ€åè¾¹ï¼Œåœ¨LinkedHashMapä¸­æˆ‘ä¹Ÿæ²¡æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•æ¥è¿›è¡Œè°ƒç”¨**~
- ä¸€ä¸ª`removeEldestEntry(Map.Entry<K,V> eldest)`æ–¹æ³•ï¼Œ**é‡å†™å®ƒå¯ä»¥åˆ é™¤æœ€ä¹…æœªè¢«ä½¿ç”¨çš„å…ƒç´ **ï¼ï¼
- è¿˜æœ‰ä¸€ä¸ªæ˜¯`afterNodeInsertion(boolean evict)`æ–¹æ³•ï¼Œ**æ–°å¢æ—¶åˆ¤æ–­æ˜¯å¦éœ€è¦åˆ é™¤æœ€ä¹…æœªè¢«ä½¿ç”¨çš„å…ƒç´ **ï¼ï¼

![img](https://user-gold-cdn.xitu.io/2018/4/11/162b47376603e968?w=1132&h=210&f=png&s=24923)

 

### 1.6removeæ–¹æ³•

å¯¹äºremoveæ–¹æ³•ï¼Œåœ¨LinkedHashMapä¸­ä¹Ÿæ²¡æœ‰é‡å†™ï¼Œå®ƒè°ƒç”¨çš„è¿˜æ˜¯çˆ¶ç±»çš„HashMapçš„`remove()`æ–¹æ³•ï¼Œåœ¨LinkedHashMapä¸­é‡å†™çš„æ˜¯ï¼š`afterNodeRemoval(Node<K,V> e)`è¿™ä¸ªæ–¹æ³•

![img](https://user-gold-cdn.xitu.io/2018/4/11/162b47375e7352f0?w=986&h=380&f=png&s=14863)

å½“ç„¶äº†ï¼Œåœ¨removeçš„æ—¶å€™ä¼šæ¶‰åŠåˆ°ä¸Šé¢é‡å†™çš„æ–¹æ³•ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/11/162b47426a9c2804?w=1088&h=682&f=png&s=37576)

### 1.7éå†çš„æ–¹æ³•

`Set<Map.Entry<K,V>> entrySet()`æ˜¯è¢«é‡å†™çš„äº†

![img](https://user-gold-cdn.xitu.io/2018/4/11/162b4742a2e3d959?w=1913&h=453&f=png&s=77981)

![img](https://user-gold-cdn.xitu.io/2018/4/11/162b47433e2ac791?w=849&h=607&f=png&s=30780)

çœ‹åˆ°äº†è¿™é‡Œï¼Œæˆ‘ä»¬å°±çŸ¥é“ä¸ºå•¥æ³¨é‡Šè¯´ï¼š**åˆå§‹å®¹é‡å¯¹éå†æ²¡æœ‰å½±å“**

å› ä¸ºå®ƒéå†çš„æ˜¯**LinkedHashMapå†…éƒ¨ç»´æŠ¤çš„ä¸€ä¸ªåŒå‘é“¾è¡¨**ï¼Œè€Œä¸æ˜¯æ•£åˆ—è¡¨(å½“ç„¶äº†ï¼Œé“¾è¡¨åŒå‘é“¾è¡¨çš„å…ƒç´ éƒ½æ¥æºäºæ•£åˆ—è¡¨)

 

## äºŒã€LinkedHashMapæ€»ç»“

LinkedHashMapæ¯”HashMapå¤šäº†ä¸€ä¸ªåŒå‘é“¾è¡¨çš„ç»´æŠ¤ï¼Œåœ¨æ•°æ®ç»“æ„è€Œè¨€å®ƒè¦å¤æ‚ä¸€äº›ï¼Œé˜…è¯»æºç èµ·æ¥æ¯”è¾ƒè½»æ¾ä¸€äº›ï¼Œå› ä¸ºå¤§å¤šéƒ½ç”±HashMapå®ç°äº†..

é˜…è¯»æºç çš„æ—¶å€™æˆ‘ä»¬ä¼šå‘ç°å¤šæ€æ˜¯æ— å¤„ä¸åœ¨çš„~å­ç±»ç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œå­ç±»é‡å†™äº†çˆ¶ç±»çš„**éƒ¨åˆ†**æ–¹æ³•å³å¯è¾¾åˆ°ä¸ä¸€æ ·çš„æ•ˆæœï¼

- æ¯”å¦‚ï¼šLinkedHashMapå¹¶æ²¡æœ‰é‡å†™putæ–¹æ³•ï¼Œè€Œputæ–¹æ³•å†…éƒ¨çš„`newNode()`æ–¹æ³•é‡å†™äº†ã€‚LinkedHashMapè°ƒç”¨çˆ¶ç±»çš„putæ–¹æ³•ï¼Œé‡Œé¢å›è°ƒçš„æ˜¯é‡å†™åçš„`newNode()`ï¼Œä»è€Œè¾¾åˆ°ç›®çš„ï¼

LinkedHashMapå¯ä»¥è®¾ç½®ä¸¤ç§éå†é¡ºåºï¼š

- è®¿é—®é¡ºåºï¼ˆaccess-orderedï¼‰
- æ’å…¥é¡ºåºï¼ˆinsertion-orderedï¼‰
- **é»˜è®¤æ˜¯æ’å…¥é¡ºåºçš„**

å¯¹äºè®¿é—®é¡ºåºï¼Œå®ƒæ˜¯LRU(æœ€è¿‘æœ€å°‘ä½¿ç”¨)ç®—æ³•çš„å®ç°ï¼Œè¦ä½¿ç”¨å®ƒè¦ä¹ˆ**é‡å†™LinkedListMapçš„å‡ ä¸ªæ–¹æ³•**(`removeEldestEntry(Map.Entry<K,V> eldest)`å’Œ`afterNodeInsertion(boolean evict)`)ï¼Œè¦ä¹ˆæ˜¯**æ‰©å±•**æˆLRUMapæ¥ä½¿ç”¨ï¼Œä¸ç„¶è®¾ç½®ä¸ºè®¿é—®é¡ºåºï¼ˆaccess-orderedï¼‰çš„ç”¨å¤„ä¸å¤§~

**LinkedHashMapéå†çš„æ˜¯å†…éƒ¨ç»´æŠ¤çš„åŒå‘é“¾è¡¨**ï¼Œæ‰€ä»¥è¯´åˆå§‹å®¹é‡å¯¹LinkedHashMapéå†æ˜¯ä¸å—å½±å“çš„

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnmrl1ylng306o06oq3t.gif)

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnyqyo2bnj3076076dga.jpg)

å¦‚æœâ½‚æ¡£ä¸­æœ‰ä»»ä½•çš„ä¸æ‡‚çš„é—®é¢˜ï¼Œéƒ½å¯ä»¥ç›´æ¥æ¥æ‰¾æˆ‘è¯¢é—®ï¼Œæˆ‘ä¹æ„å¸®åŠ©ä½ ä»¬ï¼å¾®ä¿¡æœ**Java3y**å…¬ä¼—å·æœ‰æˆ‘çš„è”ç³»â½…å¼ã€‚æ›´å¤š**åŸåˆ›**æŠ€æœ¯â½‚ç« å¯å…³æ³¨æˆ‘çš„GitHubï¼šhttps://github.com/ZhongFuCheng3y/3y

# ä¸ƒã€TreeMap

 

## ä¸€ã€TreeMapå‰–æ

æŒ‰ç…§æƒ¯ä¾‹ï¼Œæˆ‘ç®€å•ç¿»è¯‘äº†ä¸€ä¸‹é¡¶éƒ¨çš„æ³¨é‡Š(æˆ‘è‹±æ–‡æ°´å¹³æ¸£ï¼Œå¦‚æœæœ‰é”™çš„åœ°æ–¹è¯·å¤šå¤šåŒ…æ¶µ~æ¬¢è¿åœ¨è¯„è®ºåŒºä¸‹æŒ‡æ­£)

![img](https://user-gold-cdn.xitu.io/2018/4/12/162b9081b33a8896?w=1918&h=2568&f=png&s=294659)

æ¥ç€æˆ‘ä»¬æ¥çœ‹çœ‹ç±»ç»§æ‰¿å›¾ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/12/162b9081b33b7ebc?w=917&h=535&f=png&s=20392)

åœ¨æ³¨é‡Šä¸­æåˆ°çš„è¦ç‚¹ï¼Œæˆ‘æ¥æ€»ç»“ä¸€ä¸‹ï¼š

- TreeMapå®ç°äº†NavigableMapæ¥å£ï¼Œè€ŒNavigableMapæ¥å£ç»§æ‰¿ç€SortedMapæ¥å£ï¼Œè‡´ä½¿æˆ‘ä»¬çš„**TreeMapæ˜¯æœ‰åºçš„**ï¼
- TreeMapåº•å±‚æ˜¯çº¢é»‘æ ‘ï¼Œå®ƒæ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦éƒ½ä¸ä¼šå¤ªé«˜:log(n)~
- éåŒæ­¥
- ä½¿ç”¨Comparatoræˆ–è€…Comparableæ¥æ¯”è¾ƒkeyæ˜¯å¦ç›¸ç­‰ä¸æ’åºçš„é—®é¢˜~

 

å¯¹æˆ‘è€Œè¨€ï¼ŒComparatorå’ŒComparableæˆ‘éƒ½å¿˜å¾—å·®ä¸å¤šäº†~~~ä¸‹é¢å°±å¼€å§‹çœ‹TreeMapçš„æºç æ¥çœ‹çœ‹å®ƒæ˜¯æ€ä¹ˆå®ç°çš„ï¼Œå¹¶ä¸”å›é¡¾ä¸€ä¸‹Comparatorå’ŒComparableçš„ç”¨æ³•å§ï¼

### 1.1TreeMapçš„åŸŸ

![img](https://user-gold-cdn.xitu.io/2018/4/12/162b9081b341a94d?w=1082&h=567&f=png&s=35071)

### 1.2TreeMapæ„é€ æ–¹æ³•

TreeMapçš„æ„é€ æ–¹æ³•æœ‰4ä¸ªï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/12/162b9081b3545c52?w=477&h=126&f=png&s=7267)

å¯ä»¥å‘ç°ï¼ŒTreeMapçš„æ„é€ æ–¹æ³•å¤§å¤šæ•°ä¸comparatoræœ‰å…³ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/12/162b908ce819c105?w=1918&h=2487&f=png&s=232085)

ä¹Ÿå°±æ˜¯é¡¶éƒ¨æ³¨é‡Šè¯´çš„ï¼šTreeMapæœ‰åºæ˜¯é€šè¿‡Comparatoræ¥è¿›è¡Œæ¯”è¾ƒçš„ï¼Œ**å¦‚æœcomparatorä¸ºnullï¼Œé‚£ä¹ˆå°±ä½¿ç”¨è‡ªç„¶é¡ºåº**~

æ‰“ä¸ªæ¯”æ–¹ï¼šå¦‚æœvalueæ˜¯æ•´æ•°ï¼Œè‡ªç„¶é¡ºåºæŒ‡çš„å°±æ˜¯æˆ‘ä»¬å¹³å¸¸æ’åºçš„é¡ºåº(1,2,3,4,5..)~

```
    TreeMap<Integer, Integer> treeMap = new TreeMap<>();

    treeMap.put(1, 5);
    treeMap.put(2, 4);
    treeMap.put(3, 3);
    treeMap.put(4, 2);
    treeMap.put(5, 1);

    for (Entry<Integer, Integer> entry : treeMap.entrySet()) {

        String s = entry.getKey() +"å…³æ³¨å…¬ä¼—å·ï¼šJava3y---->" + entry.getValue();

        System.out.println(s);
    }
```

![img](https://user-gold-cdn.xitu.io/2018/4/12/162b9081b3706f3c?w=878&h=319&f=png&s=19498)

### 1.3putæ–¹æ³•

æˆ‘ä»¬æ¥çœ‹çœ‹TreeMapçš„æ ¸å¿ƒputæ–¹æ³•ï¼Œé˜…è¯»å®ƒå°±å¯ä»¥è·å–ä¸å°‘å…³äºTreeMapç‰¹æ€§çš„ä¸œè¥¿äº†~

![img](https://user-gold-cdn.xitu.io/2018/4/12/162b908ce85f2498?w=1918&h=2244&f=png&s=216677)

ä¸‹é¢æ˜¯`compare(Object k1, Object k2)`æ–¹æ³•

```
    /**
     * Compares two keys using the correct comparison method for this TreeMap.
     */
    @SuppressWarnings("unchecked")
    final int compare(Object k1, Object k2) {
        return comparator==null ? ((Comparable<? super K>)k1).compareTo((K)k2)
            : comparator.compare((K)k1, (K)k2);
    }
```

å¦‚æœæˆ‘ä»¬è®¾ç½®keyä¸ºnullï¼Œä¼šæŠ›å‡ºå¼‚å¸¸çš„ï¼Œå°±ä¸æ‰§è¡Œä¸‹é¢çš„ä»£ç äº†ã€‚

![img](https://user-gold-cdn.xitu.io/2018/4/12/162b908ce8706e20?w=1538&h=147&f=png&s=10737)

### 1.4getæ–¹æ³•

æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹getæ–¹æ³•çš„å®ç°ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/12/162b908ce89482cd?w=893&h=260&f=png&s=16535)

ç‚¹è¿›å»`getEntry()`çœ‹çœ‹å®ç°ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/12/162b908ce8b59295?w=1108&h=588&f=png&s=38843)

å¦‚æœComparatorä¸ä¸ºnullï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¿›å»çœ‹çœ‹`getEntryUsingComparator(Object key)`ï¼Œæ˜¯æ€ä¹ˆå®ç°çš„

![img](https://user-gold-cdn.xitu.io/2018/4/12/162b908ce8efee59?w=1127&h=507&f=png&s=27799)

### 1.5removeæ–¹æ³•

![img](https://user-gold-cdn.xitu.io/2018/4/12/162b9088f6d7aa89?w=929&h=276&f=png&s=17275)

åˆ é™¤èŠ‚ç‚¹çš„æ—¶å€™è°ƒç”¨çš„æ˜¯`deleteEntry(Entry<K,V> p)`æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸»è¦æ˜¯**åˆ é™¤èŠ‚ç‚¹å¹¶ä¸”å¹³è¡¡çº¢é»‘æ ‘**

å¹³è¡¡çº¢é»‘æ ‘çš„ä»£ç æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œæˆ‘å°±ä¸è¯´äº†ï¼Œä½ ä»¬å»çœ‹å§(åæ­£æˆ‘çœ‹ä¸æ‡‚)....

### 1.6éå†æ–¹æ³•

åœ¨çœ‹æºç çš„æ—¶å€™å¯èƒ½ä¸çŸ¥é“å“ªä¸ªæ˜¯æ ¸å¿ƒçš„éå†æ–¹æ³•ï¼Œå› ä¸ºIteratoræœ‰éå¸¸éå¸¸å¤š~

![img](https://user-gold-cdn.xitu.io/2018/4/12/162b906fb1353aed?w=548&h=502&f=png&s=32582)

æ­¤æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦debugä¸€ä¸‹çœ‹çœ‹ï¼Œè·Ÿä¸‹å»å°±å¥½ï¼

![img](https://user-gold-cdn.xitu.io/2018/4/12/162b907b8809ec82?w=921&h=145&f=png&s=7336)

![img](https://user-gold-cdn.xitu.io/2018/4/12/162b906fb530fdfa?w=1111&h=216&f=png&s=10360)

äºæ˜¯ä¹ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ï¼š**TreeMapéå†æ˜¯ä½¿ç”¨EntryIteratorè¿™ä¸ªå†…éƒ¨ç±»çš„**

é¦–å…ˆæ¥çœ‹çœ‹EntryIteratorçš„ç±»ç»“æ„å›¾å§ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/12/162b906fb667e33b?w=558&h=472&f=png&s=8500)

å¯ä»¥å‘ç°ï¼ŒEntryIteratorå¤§å¤šçš„å®ç°éƒ½æ˜¯åœ¨çˆ¶ç±»ä¸­ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/12/162b906ffefa7fe7?w=1068&h=240&f=png&s=9641)

é‚£æ¥ä¸‹æ¥æˆ‘ä»¬å»çœ‹çœ‹PrivateEntryIteratoræ¯”è¾ƒé‡è¦çš„æ–¹æ³•ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/12/162b907052f0878b?w=903&h=669&f=png&s=35061)

æˆ‘ä»¬è¿›å»`successor(e)`æ–¹æ³•çœ‹çœ‹å®ç°ï¼š

> successor å…¶å®å°±æ˜¯ä¸€ä¸ªç»“ç‚¹çš„ ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œæ‰€è°“ ä¸‹ä¸€ä¸ªï¼Œæ˜¯æŒ‰æ¬¡åºæ’åºåçš„ä¸‹ä¸€ä¸ªç»“ç‚¹ã€‚ä»ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœå³å­æ ‘ä¸ä¸ºç©ºï¼Œå°±è¿”å›å³å­æ ‘ä¸­æœ€å°ç»“ç‚¹ã€‚å¦‚æœå³å­æ ‘ä¸ºç©ºï¼Œå°±è¦å‘ä¸Šå›æº¯äº†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œt æ˜¯ä»¥å…¶ä¸ºæ ¹çš„æ ‘çš„æœ€åä¸€ä¸ªç»“ç‚¹ã€‚å¦‚æœå®ƒæ˜¯å…¶çˆ¶ç»“ç‚¹çš„å·¦å­©å­ï¼Œé‚£ä¹ˆçˆ¶ç»“ç‚¹å°±æ˜¯å®ƒçš„ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œå¦åˆ™ï¼Œt å°±æ˜¯ä»¥å…¶çˆ¶ç»“ç‚¹ä¸ºæ ¹çš„æ ‘çš„æœ€åä¸€ä¸ªç»“ç‚¹ï¼Œéœ€è¦å†æ¬¡å‘ä¸Šå›æº¯ã€‚ä¸€ç›´åˆ° ch æ˜¯ p çš„å·¦å­©å­ä¸ºæ­¢ã€‚

æ¥æºï¼šhttps://blog.csdn.net/on_1y/article/details/27231855

![img](https://user-gold-cdn.xitu.io/2018/4/12/162b9070922e2920?w=933&h=586&f=png&s=19321)

## äºŒã€TreeMapæ€»ç»“

TreeMapåº•å±‚æ˜¯çº¢é»‘æ ‘ï¼Œèƒ½å¤Ÿå®ç°è¯¥Mapé›†åˆæœ‰åº~

å¦‚æœåœ¨æ„é€ æ–¹æ³•ä¸­ä¼ é€’äº†Comparatorå¯¹è±¡ï¼Œé‚£ä¹ˆå°±ä¼šä»¥Comparatorå¯¹è±¡çš„æ–¹æ³•è¿›è¡Œæ¯”è¾ƒã€‚å¦åˆ™ï¼Œåˆ™ä½¿ç”¨Comparableçš„`compareTo(T o)`æ–¹æ³•æ¥æ¯”è¾ƒã€‚

- å€¼å¾—è¯´æ˜çš„æ˜¯ï¼šå¦‚æœä½¿ç”¨çš„æ˜¯`compareTo(T o)`æ–¹æ³•æ¥æ¯”è¾ƒï¼Œ**keyä¸€å®šæ˜¯ä¸èƒ½ä¸ºnull**ï¼Œå¹¶ä¸”å¾—å®ç°äº†Comparableæ¥å£çš„ã€‚
- å³ä½¿æ˜¯ä¼ å…¥äº†Comparatorå¯¹è±¡ï¼Œä¸ç”¨`compareTo(T o)`æ–¹æ³•æ¥æ¯”è¾ƒï¼Œkey**ä¹Ÿæ˜¯**ä¸èƒ½ä¸ºnullçš„

```
    public static void main(String[] args) {
        TreeMap<Student, String> map = new TreeMap<Student, String>((o1, o2) -> {
            //ä¸»è¦æ¡ä»¶
            int num = o1.getAge() - o2.getAge();

            //æ¬¡è¦æ¡ä»¶
            int num2 = num == 0 ? o1.getName().compareTo(o2.getName()) : num;

            return num2;
        });

        //åˆ›å»ºå­¦ç”Ÿå¯¹è±¡
        Student s1 = new Student("æ½˜å®‰", 30);
        Student s2 = new Student("æŸ³ä¸‹æƒ ", 35);

        //æ·»åŠ å…ƒç´ è¿›é›†åˆ
        map.put(s1, "å®‹æœ");
        map.put(s2, "å…ƒæœ");
        map.put(null, "æ±‰æœ");

        //è·å–keyé›†åˆ
        Set<Student> set = map.keySet();

        //éå†keyé›†åˆ
        for (Student student : set) {
            String value = map.get(student);
            System.out.println(student + "---------" + value);
        }
    }
```

![img](https://user-gold-cdn.xitu.io/2018/4/12/162b9070e1a2d227?w=990&h=695&f=png&s=41707)

 

æˆ‘ä»¬ä»æºç ä¸­çš„å¾ˆå¤šåœ°æ–¹ä¸­å‘ç°ï¼šComparatorå’ŒComparableå‡ºç°çš„é¢‘ç‡æ˜¯å¾ˆé«˜çš„ï¼Œå› ä¸ºTreeMapå®ç°æœ‰åºè¦ä¹ˆå°±æ˜¯å¤–ç•Œä¼ é€’è¿›æ¥Comparatorå¯¹è±¡ï¼Œè¦ä¹ˆå°±ä½¿ç”¨é»˜è®¤keyçš„Comparableæ¥å£(å®ç°è‡ªç„¶æ’åº)

æœ€åæˆ‘å°±æ¥æ€»ç»“ä¸€ä¸‹TreeMapè¦ç‚¹å§ï¼š

1. ç”±äºåº•å±‚æ˜¯çº¢é»‘æ ‘ï¼Œé‚£ä¹ˆæ—¶é—´å¤æ‚åº¦å¯ä»¥ä¿è¯ä¸ºlog(n)

2. keyä¸èƒ½ä¸ºnullï¼Œä¸ºnullä¸ºæŠ›å‡ºNullPointExceptionçš„

3. æƒ³è¦è‡ªå®šä¹‰æ¯”è¾ƒï¼Œåœ¨æ„é€ æ–¹æ³•ä¸­ä¼ å…¥Co smparatorå¯¹è±¡ï¼Œå¦åˆ™ä½¿ç”¨keyçš„è‡ªç„¶æ’åºæ¥è¿›è¡Œæ¯”è¾ƒ

4. TreeMapéåŒæ­¥çš„ï¼Œæƒ³è¦åŒæ­¥å¯ä»¥ä½¿ç”¨Collectionsæ¥è¿›è¡Œå°è£…

    

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnyxk0p5kj3073073glh.jpg)

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnyqyo2bnj3076076dga.jpg)

å¦‚æœâ½‚æ¡£ä¸­æœ‰ä»»ä½•çš„ä¸æ‡‚çš„é—®é¢˜ï¼Œéƒ½å¯ä»¥ç›´æ¥æ¥æ‰¾æˆ‘è¯¢é—®ï¼Œæˆ‘ä¹æ„å¸®åŠ©ä½ ä»¬ï¼å¾®ä¿¡æœ**Java3y**å…¬ä¼—å·æœ‰æˆ‘çš„è”ç³»â½…å¼ã€‚æ›´å¤š**åŸåˆ›**æŠ€æœ¯â½‚ç« å¯å…³æ³¨æˆ‘çš„GitHubï¼šhttps://github.com/ZhongFuCheng3y/3y

 

# å…«ã€ConcurrentHashMap

 

## ä¸€ã€ConCurrentHashMapå‰–æ

ConCurrentHashMapåœ¨åˆå­¦çš„æ—¶å€™åæ­£æˆ‘æ˜¯æ²¡æœ‰æ¥è§¦è¿‡çš„ï¼Œä¸çŸ¥é“ä½ ä»¬æ¥è§¦è¿‡äº†æ²¡æœ‰~

è¿™ä¸ªç±»å¬å¾—ä¹ŸæŒºå°‘çš„ï¼Œåœ¨é›†åˆä¸­æ˜¯æ¯”è¾ƒå¤æ‚çš„ä¸€ä¸ªç±»äº†ï¼Œå®ƒæ¶‰åŠåˆ°äº†ä¸€äº›å¤šçº¿ç¨‹çš„çŸ¥è¯†ç‚¹ã€‚

ä¸äº†è§£æˆ–å¿˜è®°å¤šçº¿ç¨‹çŸ¥è¯†ç‚¹çš„åŒå­¦ä¹Ÿä¸è¦æ€•ï¼Œå“ªå„¿ç”¨åˆ°äº†å¤šçº¿ç¨‹çš„çŸ¥è¯†ç‚¹ï¼Œæˆ‘éƒ½ä¼šç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œå¹¶ç»™å‡ºå¯¹åº”çš„èµ„æ–™å»é˜…è¯»çš„~

å¥½äº†ï¼Œæˆ‘ä»¬å°±æ¥å¼€å§‹å§~

### 1.1åˆè¯†ConCurrentHashMap

ConCurrentHashMapçš„**åº•å±‚æ˜¯ï¼šæ•£åˆ—è¡¨+çº¢é»‘æ ‘**ï¼Œä¸HashMapæ˜¯ä¸€æ ·çš„ã€‚

![img](https://user-gold-cdn.xitu.io/2018/4/14/162c260d64e630de?w=1636&h=726&f=png&s=71326)

ä»å‰é¢çš„ç« èŠ‚æˆ‘ä»¬ä¹Ÿå¯ä»¥å‘ç°ï¼šæœ€å¿«äº†è§£ä¸€ä¸‹ç±»æ˜¯å¹²å˜›çš„ï¼Œæˆ‘ä»¬**çœ‹æºç çš„é¡¶éƒ¨æ³¨é‡Š**å°±å¯ä»¥äº†ï¼

æˆ‘ç®€å•ç¿»è¯‘äº†ä¸€ä¸‹é¡¶éƒ¨çš„æ³¨é‡Š(æˆ‘è‹±æ–‡æ°´å¹³æ¸£ï¼Œå¦‚æœæœ‰é”™çš„åœ°æ–¹è¯·å¤šå¤šåŒ…æ¶µ~æ¬¢è¿åœ¨è¯„è®ºåŒºä¸‹æŒ‡æ­£)

![img](https://user-gold-cdn.xitu.io/2018/4/14/162c260db23db861?w=1918&h=3000&f=png&s=438631)

æ ¹æ®ä¸Šé¢æ³¨é‡Šæˆ‘ä»¬å¯ä»¥ç®€å•æ€»ç»“ï¼š

- JDK1.8åº•å±‚æ˜¯**æ•£åˆ—è¡¨+çº¢é»‘æ ‘**
- ConCurrentHashMapæ”¯æŒ**é«˜å¹¶å‘**çš„è®¿é—®å’Œæ›´æ–°ï¼Œå®ƒæ˜¯**çº¿ç¨‹å®‰å…¨**çš„
- æ£€ç´¢æ“ä½œä¸ç”¨åŠ é”ï¼Œgetæ–¹æ³•æ˜¯éé˜»å¡çš„
- keyå’Œvalueéƒ½ä¸å…è®¸ä¸ºnull

### 1.2JDK1.7åº•å±‚å®ç°

ä¸Šé¢æŒ‡æ˜çš„æ˜¯JDK1.8åº•å±‚æ˜¯ï¼šæ•£åˆ—è¡¨+çº¢é»‘æ ‘ï¼Œä¹Ÿå°±æ„å‘³ç€ï¼ŒJDK1.7çš„åº•å±‚è·ŸJDK1.8æ˜¯ä¸åŒçš„~

JDK1.7çš„åº•å±‚æ˜¯ï¼šsegments+HashEntryæ•°ç»„ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/14/162c260da3b611c4?w=548&h=418&f=png&s=6013)

å›¾æ¥æºï¼šhttps://blog.csdn.net/panweiwei1994/article/details/78897275

- Segment**ç»§æ‰¿äº†ReentrantLock**,æ¯ä¸ªç‰‡æ®µéƒ½æœ‰äº†ä¸€ä¸ªé”ï¼Œå«åšâ€œ**é”åˆ†æ®µ**â€

### 1.3æœ‰äº†Hashtableä¸ºå•¥éœ€è¦ConCurrentHashMap

- Hashtableæ˜¯åœ¨**æ¯ä¸ªæ–¹æ³•ä¸Šéƒ½åŠ ä¸Šäº†Synchronized**å®ŒæˆåŒæ­¥ï¼Œæ•ˆç‡ä½ä¸‹ã€‚
- ConcurrentHashMapé€šè¿‡åœ¨**éƒ¨åˆ†åŠ é”**å’Œ**åˆ©ç”¨CASç®—æ³•**æ¥å®ç°åŒæ­¥ã€‚

### 1.4CASç®—æ³•å’Œvolatileç®€å•ä»‹ç»

åœ¨çœ‹ConCurrentHashMapæºç ä¹‹å‰ï¼Œæˆ‘ä»¬æ¥ç®€å•è®²è®²CASç®—æ³•å’Œvolatileå…³é”®å­—

CASï¼ˆæ¯”è¾ƒä¸äº¤æ¢ï¼ŒCompare and swapï¼‰ æ˜¯ä¸€ç§æœ‰åçš„**æ— é”ç®—æ³•**

CASæœ‰**3ä¸ª**æ“ä½œæ•°

- **å†…å­˜å€¼V**
- **æ—§çš„é¢„æœŸå€¼A**
- **è¦ä¿®æ”¹çš„æ–°å€¼B**

**å½“ä¸”ä»…å½“é¢„æœŸå€¼Aå’Œå†…å­˜å€¼Vç›¸åŒæ—¶ï¼Œå°†å†…å­˜å€¼Vä¿®æ”¹ä¸ºBï¼Œå¦åˆ™ä»€ä¹ˆéƒ½ä¸åš**

- å½“å¤šä¸ªçº¿ç¨‹å°è¯•ä½¿ç”¨CASåŒæ—¶æ›´æ–°åŒä¸€ä¸ªå˜é‡æ—¶ï¼Œåªæœ‰å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹èƒ½æ›´æ–°å˜é‡çš„å€¼(**Aå’Œå†…å­˜å€¼Vç›¸åŒæ—¶ï¼Œå°†å†…å­˜å€¼Vä¿®æ”¹ä¸ºB)**ï¼Œè€Œå…¶å®ƒçº¿ç¨‹éƒ½å¤±è´¥ï¼Œå¤±è´¥çš„çº¿ç¨‹**å¹¶ä¸ä¼šè¢«æŒ‚èµ·**ï¼Œè€Œæ˜¯è¢«å‘ŠçŸ¥è¿™æ¬¡ç«äº‰ä¸­å¤±è´¥ï¼Œå¹¶å¯ä»¥å†æ¬¡å°è¯•**(å¦åˆ™ä»€ä¹ˆéƒ½ä¸åš)**

çœ‹äº†ä¸Šé¢çš„æè¿°åº”è¯¥å°±å¾ˆå®¹æ˜“ç†è§£äº†ï¼Œå…ˆ**æ¯”è¾ƒ**æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™**æ›¿æ¢**(CASç®—æ³•)

------

æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹**volatileå…³é”®å­—**ï¼Œåœ¨åˆå­¦çš„æ—¶å€™ä¹Ÿå¾ˆå°‘ä½¿ç”¨åˆ°volatileè¿™ä¸ªå…³é”®å­—ã€‚åæ­£æˆ‘æ²¡ç”¨åˆ°ï¼Œè€Œåˆç»å¸¸åœ¨çœ‹Javaç›¸å…³é¢è¯•é¢˜çš„æ—¶å€™çœ‹åˆ°å®ƒï¼Œè§‰å¾—æ˜¯ä¸€ä¸ªæŒºç¥ç§˜åˆå¾ˆéš¾çš„ä¸€ä¸ªå…³é”®å­—ã€‚å…¶å®ä¸ç„¶ï¼Œè¿˜æ˜¯æŒºå®¹æ˜“ç†è§£çš„~

volatileç»å…¸æ€»ç»“ï¼š**volatileä»…ä»…ç”¨æ¥ä¿è¯è¯¥å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§ï¼Œä½†ä¸ä¿è¯åŸå­æ€§**

æˆ‘ä»¬å°†å…¶æ‹†å¼€æ¥è§£é‡Šä¸€ä¸‹ï¼š

- ä¿è¯**è¯¥å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§**
  - åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ï¼šå½“è¿™ä¸ªå˜é‡ä¿®æ”¹æ—¶ï¼Œ**æ‰€æœ‰çš„çº¿ç¨‹éƒ½ä¼šçŸ¥é“è¯¥å˜é‡è¢«ä¿®æ”¹äº†**ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„â€œå¯è§æ€§â€
- ä¸ä¿è¯åŸå­æ€§
  - ä¿®æ”¹å˜é‡(èµ‹å€¼)**å®è´¨ä¸Š**æ˜¯åœ¨JVMä¸­**åˆ†äº†å¥½å‡ æ­¥**ï¼Œè€Œ**åœ¨è¿™å‡ æ­¥å†…(ä»è£…è½½å˜é‡åˆ°ä¿®æ”¹)ï¼Œå®ƒæ˜¯ä¸å®‰å…¨çš„**ã€‚

 

### 1.5ConCurrentHashMapåŸŸ

åŸŸå¯¹è±¡æœ‰è¿™ä¹ˆå‡ ä¸ªï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/14/162c260da3564412?w=547&h=245&f=png&s=6028)

æˆ‘ä»¬æ¥ç®€å•çœ‹ä¸€ä¸‹ä»–ä»¬æ˜¯ä»€ä¹ˆä¸œä¸œï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/14/162c260da474a6d5?w=1918&h=1839&f=png&s=116831)

åˆæ¬¡é˜…è¯»å®Œä¹‹åï¼Œæœ‰çš„å±æ€§æˆ‘ä¹Ÿä¸å¤ªæ¸…æ¥šå®ƒæ˜¯å¹²ä»€ä¹ˆçš„ï¼Œåœ¨**ç»§ç»­é˜…è¯»ä¹‹åå¯èƒ½å°±æ˜æœ—äº†**~

### 1.6ConCurrentHashMapæ„é€ æ–¹æ³•

ConcurrentHashMapçš„æ„é€ æ–¹æ³•æœ‰5ä¸ªï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/14/162c260d69b1064b?w=525&h=122&f=png&s=3805)

å…·ä½“çš„å®ç°æ˜¯è¿™æ ·å­çš„ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/14/162c2612fb0c7ae7?w=1918&h=2568&f=png&s=158065)

å¯ä»¥å‘ç°ï¼Œåœ¨æ„é€ æ–¹æ³•ä¸­æœ‰å‡ å¤„éƒ½è°ƒç”¨äº†`tableSizeFor()`ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä»–æ˜¯å¹²ä»€ä¹ˆçš„ï¼š

ç‚¹è¿›å»ä¹‹åå‘ç°ï¼Œå•Šï¼ŒåŸæ¥æˆ‘çœ‹è¿‡è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨HashMapçš„æ—¶å€™.....

![img](https://user-gold-cdn.xitu.io/2018/4/14/162c2612fafb74d4?w=1189&h=386&f=png&s=9531)

å®ƒå°±æ˜¯ç”¨æ¥è·å–**å¤§äºå‚æ•°ä¸”æœ€æ¥è¿‘2çš„æ•´æ¬¡å¹‚çš„æ•°**...

**èµ‹å€¼ç»™sizeCtlå±æ€§ä¹Ÿå°±è¯´æ˜äº†ï¼šè¿™æ˜¯ä¸‹æ¬¡æ‰©å®¹çš„å¤§å°**~

 

### 1.7putæ–¹æ³•

ç»ˆäºæ¥åˆ°äº†æœ€æ ¸å¿ƒçš„æ–¹æ³•ä¹‹ä¸€ï¼šputæ–¹æ³•å•¦~~~~

æˆ‘ä»¬å…ˆæ¥**æ•´ä½“çœ‹ä¸€ä¸‹**putæ–¹æ³•å¹²äº†ä»€ä¹ˆäº‹ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/14/162c2612fb1efb1f?w=1918&h=2163&f=png&s=122353)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹åˆå§‹åŒ–æ•£åˆ—è¡¨çš„æ—¶å€™å¹²äº†ä»€ä¹ˆäº‹ï¼š`initTable()`

![img](https://user-gold-cdn.xitu.io/2018/4/14/162c2612fb0721da?w=1271&h=615&f=png&s=26865)

**åªè®©ä¸€ä¸ªçº¿ç¨‹å¯¹æ•£åˆ—è¡¨è¿›è¡Œåˆå§‹åŒ–**ï¼

### 1.8getæ–¹æ³•

ä»é¡¶éƒ¨æ³¨é‡Šæˆ‘ä»¬å¯ä»¥è¯»åˆ°ï¼Œgetæ–¹æ³•æ˜¯**ä¸ç”¨åŠ é”**çš„ï¼Œæ˜¯éé˜»å¡çš„ã€‚

æˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒNodeèŠ‚ç‚¹æ˜¯é‡å†™çš„ï¼Œè®¾ç½®äº†volatileå…³é”®å­—ä¿®é¥°ï¼Œè‡´ä½¿å®ƒæ¯æ¬¡è·å–çš„éƒ½æ˜¯**æœ€æ–°**è®¾ç½®çš„å€¼

![img](https://user-gold-cdn.xitu.io/2018/4/14/162c2612fb18c413?w=1260&h=752&f=png&s=29908)

![img](https://user-gold-cdn.xitu.io/2018/4/14/162c2611f6e77393?w=1327&h=543&f=png&s=22510)

## äºŒã€ConcurrentHashMapæ€»ç»“

ä¸Šé¢ç®€å•ä»‹ç»äº†ConcurrentHashMapçš„æ ¸å¿ƒçŸ¥è¯†ï¼Œè¿˜æœ‰å¾ˆå¤šçŸ¥è¯†ç‚¹éƒ½æ²¡æœ‰æåŠåˆ°ï¼Œä½œè€…çš„æ°´å¹³ä¹Ÿä¸èƒ½å°†å…¶å¼„æ‡‚~~æœ‰å…´è¶£è¿›å…¥çš„åŒå­¦å¯åˆ°ä¸‹é¢çš„é“¾æ¥ç»§ç»­å­¦ä¹ ã€‚

ä¸‹é¢æˆ‘æ¥ç®€å•æ€»ç»“ä¸€ä¸‹ConcurrentHashMapçš„æ ¸å¿ƒè¦ç‚¹ï¼š

- **åº•å±‚ç»“æ„æ˜¯æ•£åˆ—è¡¨(æ•°ç»„+é“¾è¡¨)+çº¢é»‘æ ‘**ï¼Œè¿™ä¸€ç‚¹å’ŒHashMapæ˜¯ä¸€æ ·çš„ã€‚
- Hashtableæ˜¯å°†æ‰€æœ‰çš„æ–¹æ³•è¿›è¡ŒåŒæ­¥ï¼Œæ•ˆç‡ä½ä¸‹ã€‚è€ŒConcurrentHashMapä½œä¸ºä¸€ä¸ªé«˜å¹¶å‘çš„å®¹å™¨ï¼Œå®ƒæ˜¯é€šè¿‡**éƒ¨åˆ†é”å®š+CASç®—æ³•æ¥è¿›è¡Œå®ç°çº¿ç¨‹å®‰å…¨çš„**ã€‚CASç®—æ³•ä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯**ä¹è§‚é”**çš„ä¸€ç§~
- åœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹ï¼Œç»Ÿè®¡æ•°æ®(è®¡ç®—size...ç­‰ç­‰)å…¶å®æ˜¯æ— æ„ä¹‰çš„ï¼Œå› ä¸ºåœ¨ä¸‹ä¸€æ—¶åˆ»sizeå€¼å°±å˜åŒ–äº†ã€‚
- getæ–¹æ³•æ˜¯éé˜»å¡ï¼Œæ— é”çš„ã€‚é‡å†™Nodeç±»ï¼Œé€šè¿‡volatileä¿®é¥°nextæ¥å®ç°æ¯æ¬¡è·å–éƒ½æ˜¯**æœ€æ–°**è®¾ç½®çš„å€¼
- **ConcurrentHashMapçš„keyå’ŒValueéƒ½ä¸èƒ½ä¸ºnull**

 

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnmu1lb2vg306o06ojtg.gif)

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnyqyo2bnj3076076dga.jpg)

å¦‚æœâ½‚æ¡£ä¸­æœ‰ä»»ä½•çš„ä¸æ‡‚çš„é—®é¢˜ï¼Œéƒ½å¯ä»¥ç›´æ¥æ¥æ‰¾æˆ‘è¯¢é—®ï¼Œæˆ‘ä¹æ„å¸®åŠ©ä½ ä»¬ï¼å¾®ä¿¡æœ**Java3y**å…¬ä¼—å·æœ‰æˆ‘çš„è”ç³»â½…å¼ã€‚æ›´å¤š**åŸåˆ›**æŠ€æœ¯â½‚ç« å¯å…³æ³¨æˆ‘çš„GitHubï¼šhttps://github.com/ZhongFuCheng3y/3y

# ä¹ã€Set

## ä¸€ã€HashSetå‰–æ

é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹HashSetçš„ç»§æ‰¿ç»“æ„å›¾ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/15/162c78d9ac0661b1?w=674&h=502&f=png&s=16546)

æŒ‰ç…§æƒ¯ä¾‹ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹HashSeté¡¶éƒ¨æ³¨é‡Šï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/15/162c78d9ad6d6bc1?w=1918&h=1920&f=png&s=134885)

ä»é¡¶éƒ¨æ³¨é‡Šæ¥çœ‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥å½’çº³HashSetçš„è¦ç‚¹äº†ï¼š

- å®ç°Setæ¥å£
- ä¸ä¿è¯è¿­ä»£é¡ºåº
- å…è®¸å…ƒç´ ä¸ºnull
- **åº•å±‚å®é™…ä¸Šæ˜¯ä¸€ä¸ªHashMapå®ä¾‹**
- éåŒæ­¥
- åˆå§‹å®¹é‡éå¸¸å½±å“è¿­ä»£æ€§èƒ½

 

 

é¡¶éƒ¨æ³¨é‡Šè¯´åº•å±‚å®é™…ä¸Šæ˜¯ä¸€ä¸ªHashMapå®ä¾‹ï¼Œé‚£è¯æ®å‘¢ï¼Ÿ

![img](https://user-gold-cdn.xitu.io/2018/4/15/162c78e26af1152c?w=1127&h=191&f=png&s=6978)

æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹HashSetæ•´ä¸ªç±»çš„æ–¹æ³•å’Œå±æ€§ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/15/162c78e26b0a776d?w=1706&h=734&f=png&s=54584)

å¯¹äºå­¦ä¹ è¿‡HashMapçš„äººæ¥è¯´ï¼Œç®€ç›´ç®€å•å¾—è®©äººå¼€å¿ƒï¼Œå“ˆå“ˆå“ˆ~

æˆ‘ä»¬çŸ¥é“Mapæ˜¯ä¸€ä¸ªæ˜ å°„ï¼Œæœ‰keyæœ‰valueï¼Œ**æ—¢ç„¶HashSetåº•å±‚ç”¨çš„æ˜¯HashMapï¼Œé‚£ä¹ˆvalueåœ¨å“ªé‡Œå‘¢**ï¼Ÿï¼Ÿï¼Ÿ

![img](https://user-gold-cdn.xitu.io/2018/4/15/162c78d9a80bef4e?w=940&h=100&f=png&s=4385)

valueæ˜¯ä¸€ä¸ªObjectï¼Œ**æ‰€æœ‰çš„valueéƒ½æ˜¯å®ƒ**

æ‰€ä»¥å¯ä»¥ç›´æ¥æ€»ç»“å‡ºï¼šHashSetå®é™…ä¸Šå°±æ˜¯å°è£…äº†HashMapï¼Œ**æ“ä½œHashSetå…ƒç´ å®é™…ä¸Šå°±æ˜¯æ“ä½œHashMap**ã€‚è¿™ä¹Ÿæ˜¯é¢å‘å¯¹è±¡çš„ä¸€ç§ä½“ç°ï¼Œ**é‡ç”¨æ€§è´¼é«˜**ï¼

 

## äºŒã€TreeSetå‰–æ

é¦–å…ˆï¼Œæˆ‘ä»¬ä¹Ÿæ¥çœ‹çœ‹TreeSetçš„ç±»ç»§æ‰¿ç»“æ„å›¾ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/15/162c78d9ae86ae16?w=943&h=626&f=png&s=10688)

æŒ‰ç…§æƒ¯ä¾‹ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹TreeSeté¡¶éƒ¨æ³¨é‡Šï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/15/162c78d9edf64adc?w=1918&h=1920&f=png&s=149594)

ä»é¡¶éƒ¨æ³¨é‡Šæ¥çœ‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥å½’çº³TreeSetçš„è¦ç‚¹äº†ï¼š

- å®ç°NavigableSetæ¥å£
- å¯ä»¥å®ç°æ’åºåŠŸèƒ½
- **åº•å±‚å®é™…ä¸Šæ˜¯ä¸€ä¸ªTreeMapå®ä¾‹**
- éåŒæ­¥

![img](https://user-gold-cdn.xitu.io/2018/4/15/162c78d9f4f3da97?w=1382&h=704&f=png&s=35015)

## ä¸‰ã€LinkedHashSetå‰–æ

é¦–å…ˆï¼Œæˆ‘ä»¬ä¹Ÿæ¥çœ‹çœ‹TreeSetçš„ç±»ç»§æ‰¿ç»“æ„å›¾ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/15/162c78d9f5b7c47f?w=717&h=589&f=png&s=10853)

æŒ‰ç…§æƒ¯ä¾‹ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹LinkedHashSeté¡¶éƒ¨æ³¨é‡Šï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/15/162c78d9fba031fb?w=1918&h=2649&f=png&s=194461)

ä»é¡¶éƒ¨æ³¨é‡Šæ¥çœ‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥å½’çº³LinkedHashSetçš„è¦ç‚¹äº†ï¼š

- è¿­ä»£æ˜¯æœ‰åºçš„
- å…è®¸ä¸ºnull
- **åº•å±‚å®é™…ä¸Šæ˜¯ä¸€ä¸ªHashMap+åŒå‘é“¾è¡¨å®ä¾‹(å…¶å®å°±æ˜¯LinkedHashMap)...**
- éåŒæ­¥
- æ€§èƒ½æ¯”HashSetå·®ä¸€ä¸¢ä¸¢ï¼Œå› ä¸ºè¦ç»´æŠ¤ä¸€ä¸ªåŒå‘é“¾è¡¨
- åˆå§‹å®¹é‡ä¸è¿­ä»£æ— å…³ï¼ŒLinkedHashSetè¿­ä»£çš„æ˜¯åŒå‘é“¾è¡¨

## å››ã€Seté›†åˆæ€»ç»“

å¯ä»¥å¾ˆæ˜æ˜¾åœ°çœ‹åˆ°ï¼Œ**Seté›†åˆçš„åº•å±‚å°±æ˜¯Map**ï¼Œæ‰€ä»¥æˆ‘éƒ½æ²¡æœ‰åšå¤ªå¤šçš„åˆ†æåœ¨ä¸Šé¢ï¼Œä¹Ÿæ²¡ä»€ä¹ˆå¥½åˆ†æçš„äº†ã€‚

ä¸‹é¢æ€»ç»“ä¸€ä¸‹Seté›†åˆå¸¸ç”¨çš„ä¸‰ä¸ªå­ç±»å§ï¼š

**HashSetï¼š**

- æ— åºï¼Œå…è®¸ä¸ºnullï¼Œåº•å±‚æ˜¯HashMap(æ•£åˆ—è¡¨+çº¢é»‘æ ‘)ï¼Œéçº¿ç¨‹åŒæ­¥

**TreeSetï¼š**

- æœ‰åºï¼Œä¸å…è®¸ä¸ºnullï¼Œåº•å±‚æ˜¯TreeMap(çº¢é»‘æ ‘),éçº¿ç¨‹åŒæ­¥

**LinkedHashSetï¼š**

- è¿­ä»£æœ‰åºï¼Œå…è®¸ä¸ºnullï¼Œåº•å±‚æ˜¯HashMap+åŒå‘é“¾è¡¨ï¼Œéçº¿ç¨‹åŒæ­¥

ä»ç»“è®ºè€Œè¨€æˆ‘ä»¬å°±å¯ä»¥æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µæ¥ä½¿ç”¨äº†ã€‚

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnmrl1ylng306o06oq3t.gif)

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnyqyo2bnj3076076dga.jpg)

å¦‚æœâ½‚æ¡£ä¸­æœ‰ä»»ä½•çš„ä¸æ‡‚çš„é—®é¢˜ï¼Œéƒ½å¯ä»¥ç›´æ¥æ¥æ‰¾æˆ‘è¯¢é—®ï¼Œæˆ‘ä¹æ„å¸®åŠ©ä½ ä»¬ï¼å¾®ä¿¡æœ**Java3y**å…¬ä¼—å·æœ‰æˆ‘çš„è”ç³»â½…å¼ã€‚æ›´å¤š**åŸåˆ›**æŠ€æœ¯â½‚ç« å¯å…³æ³¨æˆ‘çš„GitHubï¼šhttps://github.com/ZhongFuCheng3y/3y

# åã€CopyOnWriteArrayList

 

CopyWriteOn å¯èƒ½å¤§å®¶å¯¹è¿™ä¸ªæŠ€æœ¯**æ¯”è¾ƒé™Œç”Ÿ**å§ï¼Œä½†è¿™é¡¹æŠ€æœ¯æ˜¯**æŒºå¤šåº”ç”¨åœºæ™¯**çš„ã€‚é™¤äº†ä¸Šæ–‡æ‰€è¯´çš„Linuxã€æ–‡ä»¶ç³»ç»Ÿå¤–ï¼Œå…¶å®åœ¨**Java**ä¹Ÿæœ‰å…¶èº«å½±ã€‚

å¤§å®¶å¯¹çº¿ç¨‹å®‰å…¨å®¹å™¨å¯èƒ½æœ€ç†Ÿæ‚‰çš„å°±æ˜¯ConcurrentHashMapäº†ï¼Œå› ä¸ºè¿™ä¸ªå®¹å™¨ç»å¸¸ä¼šåœ¨é¢è¯•çš„æ—¶å€™è€ƒæŸ¥ã€‚

æ¯”å¦‚è¯´ï¼Œä¸€ä¸ªå¸¸è§çš„é¢è¯•åœºæ™¯ï¼š

- é¢è¯•å®˜é—®ï¼šâ€œHashMapæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿå¦‚æœHashMapçº¿ç¨‹ä¸å®‰å…¨çš„è¯ï¼Œé‚£æœ‰æ²¡æœ‰å®‰å…¨çš„Mapå®¹å™¨â€
- 3yï¼šâ€œçº¿ç¨‹å®‰å…¨çš„Mapæœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯Hashtableï¼Œä¸€ä¸ªæ˜¯ConcurrentHashMapâ€
- é¢è¯•å®˜ç»§ç»­é—®ï¼šâ€œé‚£Hashtableå’ŒConcurrentHashMapæœ‰ä»€ä¹ˆåŒºåˆ«å•Šï¼Ÿâ€
- 3yï¼šâ€œbalabalabalabalabalabala"
- é¢è¯•å®˜ï¼šâ€ok,ok,ok,çœ‹ä½ JavaåŸºç¡€æŒºä¸é”™çš„å‘€â€œ

é‚£å¦‚æœæœ‰è¿™æ ·çš„é¢è¯•å‘¢ï¼Ÿ

- é¢è¯•å®˜é—®ï¼šâ€œArrayListæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿå¦‚æœArrayListçº¿ç¨‹ä¸å®‰å…¨çš„è¯ï¼Œé‚£æœ‰æ²¡æœ‰å®‰å…¨çš„ç±»ä¼¼ArrayListçš„å®¹å™¨â€
- 3yï¼šâ€œçº¿ç¨‹å®‰å…¨çš„ArrayListæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Vectorï¼Œæˆ–è€…è¯´æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Collectionsä¸‹çš„æ–¹æ³•æ¥åŒ…è£…ä¸€ä¸‹â€
- é¢è¯•å®˜ç»§ç»­é—®ï¼šâ€œå—¯ï¼Œæˆ‘ç›¸ä¿¡ä½ ä¹ŸçŸ¥é“Vectoræ˜¯ä¸€ä¸ªæ¯”è¾ƒè€çš„å®¹å™¨äº†ï¼Œè¿˜æœ‰æ²¡æœ‰å…¶ä»–çš„å‘¢ï¼Ÿâ€
- 3yï¼šâ€œEmmmm,è¿™ä¸ª...â€œ
- é¢è¯•å®˜**æç¤º**ï¼šâ€œå°±æ¯”å¦‚JUCä¸­æœ‰ConcurrentHashMapï¼Œé‚£JUCä¸­æœ‰ç±»ä¼¼"ArrayList"çš„çº¿ç¨‹å®‰å…¨å®¹å™¨ç±»å—ï¼Ÿâ€œ
- 3yï¼šâ€œEmmmm,è¿™ä¸ª...â€œ
- é¢è¯•å®˜ï¼šâ€ok,ok,ok,**ä»Šå¤©çš„é¢è¯•æ—¶é—´ä¹Ÿå·®ä¸å¤šäº†ï¼Œä½ å›å»ç­‰é€šçŸ¥å§**ã€‚â€œ

ä»Šå¤©ä¸»è¦è®²è§£çš„æ˜¯CopyOnWriteArrayList~

æœ¬æ–‡**åŠ›æ±‚ç®€å•è®²æ¸…æ¯ä¸ªçŸ¥è¯†ç‚¹**ï¼Œå¸Œæœ›å¤§å®¶çœ‹å®Œèƒ½æœ‰æ‰€æ”¶è·

## ä¸€ã€Vectorå’ŒSynchronizedList

### 1.1å›é¡¾çº¿ç¨‹å®‰å…¨çš„Vectorå’ŒSynchronizedList

æˆ‘ä»¬çŸ¥é“ArrayListæ˜¯ç”¨äºæ›¿ä»£Vectorçš„ï¼ŒVectoræ˜¯çº¿ç¨‹å®‰å…¨çš„å®¹å™¨ã€‚å› ä¸ºå®ƒå‡ ä¹åœ¨æ¯ä¸ªæ–¹æ³•å£°æ˜å¤„éƒ½åŠ äº†**synchronizedå…³é”®å­—**æ¥ä½¿å®¹å™¨å®‰å…¨ã€‚

![Vectorå®ç°](https://user-gold-cdn.xitu.io/2018/11/7/166ebc4cffc34d11?w=967&h=688&f=png&s=19152)

å¦‚æœä½¿ç”¨`Collections.synchronizedList(new ArrayList())`æ¥ä½¿ArrayListå˜æˆæ˜¯çº¿ç¨‹å®‰å…¨çš„è¯ï¼Œä¹Ÿæ˜¯å‡ ä¹éƒ½æ˜¯æ¯ä¸ªæ–¹æ³•éƒ½åŠ ä¸Šsynchronizedå…³é”®å­—çš„ï¼Œåªä¸è¿‡**å®ƒä¸æ˜¯åŠ åœ¨æ–¹æ³•çš„å£°æ˜å¤„ï¼Œè€Œæ˜¯æ–¹æ³•çš„å†…éƒ¨**ã€‚

![Collections.synchronizedList()çš„å®ç°](https://user-gold-cdn.xitu.io/2018/11/7/166ebc3c2fcdf351?w=1534&h=662&f=png&s=33951)

### 1.2Vectorå’ŒSynchronizedListå¯èƒ½ä¼šå‡ºç°çš„é—®é¢˜

åœ¨è®²è§£CopyOnWriteå®¹å™¨ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆæ¥çœ‹ä¸€ä¸‹çº¿ç¨‹å®‰å…¨å®¹å™¨çš„ä¸€äº›**å¯èƒ½æ²¡æœ‰æ³¨æ„åˆ°**çš„åœ°æ–¹~

ä¸‹é¢æˆ‘ä»¬ç›´æ¥æ¥çœ‹ä¸€ä¸‹è¿™æ®µä»£ç ï¼š

```
    // å¾—åˆ°Vectoræœ€åä¸€ä¸ªå…ƒç´ 
    public static Object getLast(Vector list) {
        int lastIndex = list.size() - 1;
        return list.get(lastIndex);
    }

    // åˆ é™¤Vectoræœ€åä¸€ä¸ªå…ƒç´ 
    public static void deleteLast(Vector list) {
        int lastIndex = list.size() - 1;
        list.remove(lastIndex);
    }

```

ä»¥æˆ‘ä»¬ç¬¬ä¸€ååº”æ¥åˆ†æä¸€ä¸‹ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•ï¼š**åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œæ˜¯å¦æœ‰é—®é¢˜**ï¼Ÿ

- æˆ‘ä»¬å¯ä»¥çŸ¥é“çš„æ˜¯Vectorçš„`size()å’Œget()ä»¥åŠremove()`éƒ½è¢«synchronizedä¿®é¥°çš„ã€‚

ç­”æ¡ˆï¼šä»è°ƒç”¨è€…çš„è§’åº¦æ˜¯**æœ‰é—®é¢˜**çš„

æˆ‘ä»¬å¯ä»¥å†™æ®µä»£ç æµ‹è¯•ä¸€ä¸‹ï¼š

```
import java.util.Vector;

public class UnsafeVectorHelpers {


    public static void main(String[] args) {

        // åˆå§‹åŒ–Vector
        Vector<String> vector = new Vector();
        vector.add("å…³æ³¨å…¬ä¼—å·");
        vector.add("Java3y");
        vector.add("ä¹°Linuxå¯åˆ°æˆ‘ä¸‹é¢çš„é“¾æ¥ï¼Œäº«å—æœ€ä½ä»·");
        vector.add("ç»™3yåŠ é¸¡è…¿");

        new Thread(() -> getLast(vector)).start();
        new Thread(() -> deleteLast(vector)).start();
        new Thread(() -> getLast(vector)).start();
        new Thread(() -> deleteLast(vector)).start();
    }

    // å¾—åˆ°Vectoræœ€åä¸€ä¸ªå…ƒç´ 
    public static Object getLast(Vector list) {
        int lastIndex = list.size() - 1;
        return list.get(lastIndex);
    }

    // åˆ é™¤Vectoræœ€åä¸€ä¸ªå…ƒç´ 
    public static void deleteLast(Vector list) {
        int lastIndex = list.size() - 1;
        list.remove(lastIndex);
    }
}

```

å¯ä»¥å‘ç°çš„æ˜¯ï¼Œæœ‰å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸çš„ï¼š

![ä»£ç æŠ›å‡ºå¼‚å¸¸](https://user-gold-cdn.xitu.io/2018/11/7/166ebc3c2d0bd6cb?w=1780&h=177&f=png&s=14468)

åŸå› ä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬ç…§ç€æµç¨‹èµ°ä¸€ä¸‹å°±å¥½äº†ï¼š

- çº¿ç¨‹Aæ‰§è¡Œ`getLast()`æ–¹æ³•ï¼Œçº¿ç¨‹Bæ‰§è¡Œ`deleteLast()`æ–¹æ³•
- çº¿ç¨‹Aæ‰§è¡Œ`int lastIndex = list.size() - 1;`å¾—åˆ°lastIndexçš„å€¼æ˜¯3ã€‚**åŒæ—¶**ï¼Œçº¿ç¨‹Bæ‰§è¡Œ`int lastIndex = list.size() - 1;`å¾—åˆ°çš„lastIndexçš„å€¼**ä¹Ÿ**æ˜¯3
- æ­¤æ—¶çº¿ç¨‹Bå…ˆå¾—åˆ°CPUæ‰§è¡Œæƒï¼Œæ‰§è¡Œ`list.remove(lastIndex)`å°†ä¸‹æ ‡ä¸º3çš„å…ƒç´ åˆ é™¤äº†
- æ¥ç€çº¿ç¨‹Aå¾—åˆ°CPUæ‰§è¡Œæƒï¼Œæ‰§è¡Œ`list.get(lastIndex);`ï¼Œå‘ç°å·²ç»æ²¡æœ‰ä¸‹æ ‡ä¸º3çš„å…ƒç´ ï¼ŒæŠ›å‡ºå¼‚å¸¸äº†.

![äº¤æ›¿æ‰§è¡Œå¯¼è‡´å¼‚å¸¸å‘ç”Ÿ](https://user-gold-cdn.xitu.io/2018/11/7/166ebc3c2baa3a57?w=1012&h=342&f=png&s=16566)

å‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› ä¹Ÿå¾ˆç®€å•ï¼š

- `getLast()`å’Œ`deleteLast()`è¿™ä¸¤ä¸ªæ–¹æ³•å¹¶ä¸æ˜¯åŸå­æ€§çš„ï¼Œå³ä½¿ä»–ä»¬**å†…éƒ¨çš„æ¯ä¸€æ­¥æ“ä½œæ˜¯åŸå­æ€§**çš„(è¢«Synchronizeä¿®é¥°å°±å¯ä»¥å®ç°åŸå­æ€§)ï¼Œä½†æ˜¯å†…éƒ¨ä¹‹é—´è¿˜æ˜¯å¯ä»¥**äº¤æ›¿**æ‰§è¡Œã€‚
  - è¿™é‡Œçš„æ„æ€å°±æ˜¯ï¼š`size()å’Œget()ä»¥åŠremove()`éƒ½æ˜¯åŸå­æ€§çš„ï¼Œä½†æ˜¯å¦‚æœå¹¶å‘æ‰§è¡Œ`getLast()`å’Œ`deleteLast()`ï¼Œæ–¹æ³•é‡Œé¢çš„`size()å’Œget()ä»¥åŠremove()`æ˜¯å¯ä»¥äº¤æ›¿æ‰§è¡Œçš„ã€‚

è¦è§£å†³ä¸Šé¢è¿™ç§æƒ…å†µä¹Ÿå¾ˆç®€å•ï¼Œå› ä¸ºæˆ‘ä»¬éƒ½æ˜¯å¯¹Vectorè¿›è¡Œæ“ä½œçš„ï¼Œ**åªè¦æ“ä½œVectorå‰æŠŠå®ƒé”ä½å°±æ²¡æ¯›ç—…äº†**ï¼

æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ”¹æˆè¿™æ ·å­ï¼š

```
    // å¾—åˆ°Vectoræœ€åä¸€ä¸ªå…ƒç´ 
    public static Object getLast(Vector list) {
        synchronized (list) {
            int lastIndex = list.size() - 1;
            return list.get(lastIndex);
        }
    }
    // åˆ é™¤Vectoræœ€åä¸€ä¸ªå…ƒç´ 
    public static void deleteLast(Vector list) {
        synchronized (list) {
            int lastIndex = list.size() - 1;
            list.remove(lastIndex);
        }
    }

```

> ps:å¦‚æœæœ‰äººå»æµ‹è¯•ä¸€ä¸‹ï¼Œå‘ç°ä¼šæŠ›å‡ºå¼‚å¸¸java.lang.ArrayIndexOutOfBoundsException: -1ï¼Œè¿™æ˜¯**æ²¡æœ‰æ£€æŸ¥è§’æ ‡çš„å¼‚å¸¸**ï¼Œä¸æ˜¯å¹¶å‘å¯¼è‡´çš„é—®é¢˜ã€‚

ç»è¿‡ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥çœ‹çœ‹ä¸‹é¢çš„ä»£ç ï¼š

```
    public static void main(String[] args) {

        // åˆå§‹åŒ–Vector
        Vector<String> vector = new Vector();
        vector.add("å…³æ³¨å…¬ä¼—å·");
        vector.add("Java3y");
        vector.add("ä¹°Linuxå¯åˆ°æˆ‘ä¸‹é¢çš„é“¾æ¥ï¼Œäº«å—æœ€ä½ä»·");
        vector.add("ç»™3yåŠ é¸¡è…¿");

        // éå†Vector
        for (int i = 0; i < vector.size(); i++) {

            // æ¯”å¦‚åœ¨è¿™æ‰§è¡Œvector.clear();
            //new Thread(() -> vector.clear()).start();

            System.out.println(vector.get(i));
        }
    }
```

åŒæ ·åœ°ï¼šå¦‚æœåœ¨éå†Vectorçš„æ—¶å€™ï¼Œæœ‰åˆ«çš„çº¿ç¨‹ä¿®æ”¹äº†Vectorçš„é•¿åº¦ï¼Œé‚£è¿˜æ˜¯ä¼š**æœ‰é—®é¢˜**ï¼

- çº¿ç¨‹Aéå†Vectorï¼Œæ‰§è¡Œ`vector.size()`æ—¶ï¼Œå‘ç°Vectorçš„é•¿åº¦ä¸º5
- æ­¤æ—¶**å¾ˆæœ‰å¯èƒ½å­˜åœ¨**çº¿ç¨‹Bå¯¹Vectorè¿›è¡Œ`clear()`æ“ä½œ
- éšåçº¿ç¨‹Aæ‰§è¡Œ`vector.get(i)`æ—¶ï¼ŒæŠ›å‡ºå¼‚å¸¸

![Vectoréå†æŠ›å‡ºå¼‚å¸¸](https://user-gold-cdn.xitu.io/2018/11/7/166ebc3c2bcfaf35?w=1739&h=168&f=png&s=10464)

åœ¨JDK5ä»¥åï¼ŒJavaæ¨èä½¿ç”¨`for-each`(è¿­ä»£å™¨)æ¥éå†æˆ‘ä»¬çš„é›†åˆï¼Œå¥½å¤„å°±æ˜¯**ç®€æ´ã€æ•°ç»„ç´¢å¼•çš„è¾¹ç•Œå€¼åªè®¡ç®—ä¸€æ¬¡**ã€‚

å¦‚æœä½¿ç”¨`for-each`(è¿­ä»£å™¨)æ¥åšä¸Šé¢çš„æ“ä½œï¼Œä¼šæŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸

![è¿­ä»£å™¨éå†ä¼šæŠ›å‡ºConcurrentModificationException](https://user-gold-cdn.xitu.io/2018/11/7/166ebc3c86bb67f7?w=1507&h=554&f=png&s=30364)

SynchronizedListåœ¨ä½¿ç”¨**è¿­ä»£å™¨éå†**çš„æ—¶å€™åŒæ ·ä¼šæœ‰é—®é¢˜çš„ï¼Œæºç å·²ç»æé†’æˆ‘ä»¬è¦æ‰‹åŠ¨åŠ é”äº†ã€‚

![SynchronizedListåœ¨éå†çš„æ—¶å€™åŒæ ·ä¼šæœ‰é—®é¢˜çš„](https://user-gold-cdn.xitu.io/2018/11/7/166ebc3c9c077a76?w=1319&h=257&f=png&s=10570)

å¦‚æœæƒ³è¦å®Œç¾è§£å†³ä¸Šé¢æ‰€è®²çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨**éå†å‰åŠ é”**ï¼š

```
    // éå†Vector
    synchronized (vector) {
            for (int i = 0; i < vector.size(); i++) {
                vector.get(i);
            }
        }
```

æœ‰ç»éªŒçš„åŒå­¦å°±å¯ä»¥çŸ¥é“ï¼š**å“‡ï¼Œéå†ä¸€ä¸‹å®¹å™¨éƒ½è¦æˆ‘åŠ ä¸Šé”ï¼Œè¿™è¿™è¿™ä¸æ˜¯è¦æ…¢æ­»äº†å—**.çš„ç¡®æ˜¯æŒºæ…¢çš„..

æ‰€ä»¥æˆ‘ä»¬çš„CopyOnWriteArrayListå°±ç™»åœºäº†ï¼

## äºŒã€CopyOnWriteArrayList(Set)ä»‹ç»

ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä¼šè®¤ä¸ºï¼šCopyOnWriteArrayListæ˜¯åŒæ­¥Listçš„æ›¿ä»£å“ï¼ŒCopyOnWriteArraySetæ˜¯åŒæ­¥Setçš„æ›¿ä»£å“ã€‚

æ— è®ºæ˜¯Hashtable-->ConcurrentHashMapï¼Œè¿˜æ˜¯è¯´Vector-->CopyOnWriteArrayListã€‚JUCä¸‹æ”¯æŒå¹¶å‘çš„å®¹å™¨ä¸è€ä¸€ä»£çš„çº¿ç¨‹å®‰å…¨ç±»ç›¸æ¯”ï¼Œæ€»ç»“èµ·æ¥å°±æ˜¯åŠ é”**ç²’åº¦**çš„é—®é¢˜

- Hashtableã€VectoråŠ é”çš„ç²’åº¦å¤§(ç›´æ¥åœ¨æ–¹æ³•å£°æ˜å¤„ä½¿ç”¨synchronized)
- ConcurrentHashMapã€CopyOnWriteArrayListåŠ é”ç²’åº¦å°(ç”¨å„ç§çš„æ–¹å¼æ¥å®ç°çº¿ç¨‹å®‰å…¨ï¼Œæ¯”å¦‚æˆ‘ä»¬çŸ¥é“çš„ConcurrentHashMapç”¨äº†casé”ã€volatileç­‰æ–¹å¼æ¥å®ç°çº¿ç¨‹å®‰å…¨..)
- JUCä¸‹çš„çº¿ç¨‹å®‰å…¨å®¹å™¨åœ¨éå†çš„æ—¶å€™**ä¸ä¼š**æŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸

æ‰€ä»¥ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬éƒ½ä¼š**ä½¿ç”¨JUCåŒ…ä¸‹ç»™æˆ‘ä»¬æä¾›çš„çº¿ç¨‹å®‰å…¨å®¹å™¨**ï¼Œè€Œä¸æ˜¯ä½¿ç”¨è€ä¸€ä»£çš„çº¿ç¨‹å®‰å…¨å®¹å™¨ã€‚

ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹CopyOnWriteArrayListæ˜¯æ€ä¹ˆå®ç°çš„ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨**è¿­ä»£å™¨éå†**çš„æ—¶å€™å°±**ä¸ç”¨é¢å¤–åŠ é”**ï¼Œä¹Ÿä¸ä¼šæŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸ã€‚

### 2.1CopyOnWriteArrayListå®ç°åŸç†

æˆ‘ä»¬è¿˜æ˜¯å…ˆæ¥å›é¡¾ä¸€ä¸‹COWï¼š

> å¦‚æœæœ‰å¤šä¸ªè°ƒç”¨è€…ï¼ˆcallersï¼‰åŒæ—¶è¯·æ±‚ç›¸åŒèµ„æºï¼ˆå¦‚å†…å­˜æˆ–ç£ç›˜ä¸Šçš„æ•°æ®å­˜å‚¨ï¼‰ï¼Œä»–ä»¬ä¼šå…±åŒè·å–**ç›¸åŒçš„æŒ‡é’ˆæŒ‡å‘ç›¸åŒçš„èµ„æº**ï¼Œç›´åˆ°æŸä¸ªè°ƒç”¨è€…**è¯•å›¾ä¿®æ”¹**èµ„æºçš„å†…å®¹æ—¶ï¼Œç³»ç»Ÿæ‰ä¼š**çœŸæ­£å¤åˆ¶ä¸€ä»½ä¸“ç”¨å‰¯æœ¬**ï¼ˆprivate copyï¼‰ç»™è¯¥è°ƒç”¨è€…ï¼Œè€Œå…¶ä»–è°ƒç”¨è€…æ‰€è§åˆ°çš„æœ€åˆçš„èµ„æºä»ç„¶ä¿æŒä¸å˜ã€‚**ä¼˜ç‚¹**æ˜¯å¦‚æœè°ƒç”¨è€…**æ²¡æœ‰ä¿®æ”¹è¯¥èµ„æºï¼Œå°±ä¸ä¼šæœ‰å‰¯æœ¬**ï¼ˆprivate copyï¼‰è¢«å»ºç«‹ï¼Œå› æ­¤å¤šä¸ªè°ƒç”¨è€…åªæ˜¯è¯»å–æ“ä½œæ—¶å¯ä»¥**å…±äº«åŒä¸€ä»½èµ„æº**ã€‚

å‚è€ƒè‡ªç»´åŸºç™¾ç§‘ï¼š[https://zh.wikipedia.org/wiki/%E5%AF%AB%E5%85%A5%E6%99%82%E8%A4%87%E8%A3%BD](https://zh.wikipedia.org/wiki/å¯«å…¥æ™‚è¤‡è£½)

> ä¹‹å‰å†™åšå®¢çš„æ—¶å€™ï¼Œå¦‚æœæ˜¯è¦çœ‹æºç ï¼Œä¸€èˆ¬ä¼šç¿»è¯‘ä¸€ä¸‹æºç çš„æ³¨é‡Šå¹¶ç”¨å›¾è´´åœ¨æ–‡ç« ä¸Šçš„ã€‚Emmmï¼Œå‘ç°é˜…è¯»ä½“éªŒå¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œå°±**ç›´æ¥æ¦‚æ‹¬ä¸€ä¸‹æºç æ³¨é‡Š**è¯´äº†ä»€ä¹ˆå§ã€‚å¦å¤–ï¼Œå¦‚æœä½¿ç”¨IDEAçš„è¯ï¼Œå¯ä»¥ä¸‹ä¸€ä¸ªæ’ä»¶**Translation**(å…è´¹å¥½ç”¨).

![Translationæ’ä»¶](https://user-gold-cdn.xitu.io/2018/11/7/166ebc3c8738d4e0?w=868&h=478&f=png&s=14375)

![Translationæ’ä»¶](https://user-gold-cdn.xitu.io/2018/11/7/166ebc3cb3f773d4?w=967&h=315&f=png&s=17982)

------

æ¦‚æ‹¬ä¸€ä¸‹CopyOnWriteArrayListæºç æ³¨é‡Šä»‹ç»äº†ä»€ä¹ˆï¼š

- CopyOnWriteArrayListæ˜¯çº¿ç¨‹å®‰å…¨å®¹å™¨(ç›¸å¯¹äºArrayList)ï¼Œåº•å±‚é€šè¿‡**å¤åˆ¶æ•°ç»„**çš„æ–¹å¼æ¥å®ç°ã€‚
- CopyOnWriteArrayListåœ¨éå†çš„ä½¿ç”¨ä¸ä¼šæŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸ï¼Œå¹¶ä¸”éå†çš„æ—¶å€™å°±ä¸ç”¨é¢å¤–åŠ é”
- å…ƒç´ å¯ä»¥ä¸ºnull

#### 2.1.1çœ‹ä¸€ä¸‹CopyOnWriteArrayListåŸºæœ¬çš„ç»“æ„

```
    /** å¯é‡å…¥é”å¯¹è±¡ */
    final transient ReentrantLock lock = new ReentrantLock();

    /** CopyOnWriteArrayListåº•å±‚ç”±æ•°ç»„å®ç°ï¼Œvolatileä¿®é¥° */
    private transient volatile Object[] array;

    /**
     * å¾—åˆ°æ•°ç»„
     */
    final Object[] getArray() {
        return array;
    }

    /**
     * è®¾ç½®æ•°ç»„
     */
    final void setArray(Object[] a) {
        array = a;
    }

    /**
     * åˆå§‹åŒ–CopyOnWriteArrayListç›¸å½“äºåˆå§‹åŒ–æ•°ç»„
     */
    public CopyOnWriteArrayList() {
        setArray(new Object[0]);
    }
```

çœ‹èµ·æ¥æŒºç®€å•çš„ï¼ŒCopyOnWriteArrayListåº•å±‚å°±æ˜¯æ•°ç»„ï¼ŒåŠ é”å°±äº¤ç”±ReentrantLockæ¥å®Œæˆã€‚

#### 2.1.2å¸¸è§æ–¹æ³•çš„å®ç°

 

æ ¹æ®ä¸Šé¢çš„åˆ†ææˆ‘ä»¬çŸ¥é“å¦‚æœéå†`Vector/SynchronizedList`æ˜¯éœ€è¦è‡ªå·±æ‰‹åŠ¨åŠ é”çš„ã€‚

CopyOnWriteArrayListä½¿ç”¨è¿­ä»£å™¨éå†æ—¶ä¸éœ€è¦æ˜¾ç¤ºåŠ é”ï¼Œçœ‹çœ‹`add()ã€clear()ã€remove()`ä¸`get()`æ–¹æ³•çš„å®ç°å¯èƒ½å°±æœ‰ç‚¹çœ‰ç›®äº†ã€‚

é¦–å…ˆæˆ‘ä»¬å¯ä»¥çœ‹çœ‹`add()`æ–¹æ³•

```
    public boolean add(E e) {
    
    // åŠ é”
        final ReentrantLock lock = this.lock;
        lock.lock();
        try {
      
      // å¾—åˆ°åŸæ•°ç»„çš„é•¿åº¦å’Œå…ƒç´ 
            Object[] elements = getArray();
            int len = elements.length;
      
      // å¤åˆ¶å‡ºä¸€ä¸ªæ–°æ•°ç»„
            Object[] newElements = Arrays.copyOf(elements, len + 1);
      
      // æ·»åŠ æ—¶ï¼Œå°†æ–°å…ƒç´ æ·»åŠ åˆ°æ–°æ•°ç»„ä¸­
            newElements[len] = e;
      
      // å°†volatile Object[] array çš„æŒ‡å‘æ›¿æ¢æˆæ–°æ•°ç»„
            setArray(newElements);
            return true;
        } finally {
            lock.unlock();
        }
    }

```

é€šè¿‡ä»£ç æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼šåœ¨æ·»åŠ çš„æ—¶å€™å°±ä¸Šé”ï¼Œå¹¶**å¤åˆ¶ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå¢åŠ æ“ä½œåœ¨æ–°æ•°ç»„ä¸Šå®Œæˆï¼Œå°†arrayæŒ‡å‘åˆ°æ–°æ•°ç»„ä¸­**ï¼Œæœ€åè§£é”ã€‚

å†æ¥çœ‹çœ‹`size()`æ–¹æ³•ï¼š

```
  public int size() {

    // ç›´æ¥å¾—åˆ°arrayæ•°ç»„çš„é•¿åº¦
        return getArray().length;
    }
```

å†æ¥çœ‹çœ‹`get()`æ–¹æ³•ï¼š

```

    public E get(int index) {
        return get(getArray(), index);
    }

  final Object[] getArray() {
        return array;
    }
```

é‚£å†æ¥çœ‹çœ‹`set()`æ–¹æ³•

```
public E set(int index, E element) {
  final ReentrantLock lock = this.lock;
  lock.lock();
  try {
    
    // å¾—åˆ°åŸæ•°ç»„çš„æ—§å€¼
    Object[] elements = getArray();
    E oldValue = get(elements, index);

    // åˆ¤æ–­æ–°å€¼å’Œæ—§å€¼æ˜¯å¦ç›¸ç­‰
    if (oldValue != element) {
      
      // å¤åˆ¶æ–°æ•°ç»„ï¼Œæ–°å€¼åœ¨æ–°æ•°ç»„ä¸­å®Œæˆ
      int len = elements.length;
      Object[] newElements = Arrays.copyOf(elements, len);
      newElements[index] = element;
      
      // å°†arrayå¼•ç”¨æŒ‡å‘æ–°æ•°ç»„
      setArray(newElements);
    } else {
      // Not quite a no-op; enssures volatile write semantics
      setArray(elements);
    }
    return oldValue;
  } finally {
    lock.unlock();
  }
}

```

å¯¹äº`remove()ã€clear()`è·Ÿ`set()å’Œadd()`æ˜¯ç±»ä¼¼çš„ï¼Œè¿™é‡Œæˆ‘å°±ä¸å†è´´å‡ºä»£ç äº†ã€‚

æ€»ç»“ï¼š

- **åœ¨ä¿®æ”¹æ—¶ï¼Œå¤åˆ¶å‡ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œä¿®æ”¹çš„æ“ä½œåœ¨æ–°æ•°ç»„ä¸­å®Œæˆï¼Œæœ€åå°†æ–°æ•°ç»„äº¤ç”±arrayå˜é‡æŒ‡å‘**ã€‚
- **å†™åŠ é”ï¼Œè¯»ä¸åŠ é”**

#### 2.1.3å‰–æä¸ºä»€ä¹ˆéå†æ—¶ä¸ç”¨è°ƒç”¨è€…æ˜¾å¼åŠ é”

å¸¸ç”¨çš„æ–¹æ³•å®ç°æˆ‘ä»¬å·²ç»åŸºæœ¬äº†è§£äº†ï¼Œä½†è¿˜æ˜¯ä¸çŸ¥é“ä¸ºå•¥èƒ½å¤Ÿåœ¨å®¹å™¨éå†çš„æ—¶å€™å¯¹å…¶è¿›è¡Œä¿®æ”¹è€Œä¸æŠ›å‡ºå¼‚å¸¸ã€‚æ‰€ä»¥ï¼Œæ¥çœ‹ä¸€ä¸‹ä»–çš„è¿­ä»£å™¨å§ï¼š

```

  // 1. è¿”å›çš„è¿­ä»£å™¨æ˜¯COWIterator
  public Iterator<E> iterator() {
        return new COWIterator<E>(getArray(), 0);
    }


  // 2. è¿­ä»£å™¨çš„æˆå‘˜å±æ€§
    private final Object[] snapshot;
    private int cursor;

  // 3. è¿­ä»£å™¨çš„æ„é€ æ–¹æ³•
  private COWIterator(Object[] elements, int initialCursor) {
        cursor = initialCursor;
        snapshot = elements;
    }

  // 4. è¿­ä»£å™¨çš„æ–¹æ³•...
  public E next() {
        if (! hasNext())
            throw new NoSuchElementException();
        return (E) snapshot[cursor++];
    }

  //.... å¯ä»¥å‘ç°çš„æ˜¯ï¼Œè¿­ä»£å™¨æ‰€æœ‰çš„æ“ä½œéƒ½åŸºäºsnapshotæ•°ç»„ï¼Œè€Œsnapshotæ˜¯ä¼ é€’è¿›æ¥çš„arrayæ•°ç»„

```

åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬åº”è¯¥å°±å¯ä»¥æƒ³æ˜ç™½äº†ï¼CopyOnWriteArrayListåœ¨ä½¿ç”¨è¿­ä»£å™¨éå†çš„æ—¶å€™ï¼Œæ“ä½œçš„éƒ½æ˜¯**åŸæ•°ç»„**ï¼

![ä¸€å¼ å›¾æ¥è§£æCOWå®¹å™¨](https://user-gold-cdn.xitu.io/2018/11/7/166ebc3cd2472bcf?w=1664&h=703&f=png&s=231843)

#### 2.1.4CopyOnWriteArrayListç¼ºç‚¹

çœ‹äº†ä¸Šé¢çš„å®ç°æºç ï¼Œæˆ‘ä»¬åº”è¯¥ä¹Ÿå¤§æ¦‚èƒ½åˆ†æå‡ºCopyOnWriteArrayListçš„ç¼ºç‚¹äº†ã€‚

- **å†…å­˜å ç”¨**ï¼šå¦‚æœCopyOnWriteArrayListç»å¸¸è¦å¢åˆ æ”¹é‡Œé¢çš„æ•°æ®ï¼Œç»å¸¸è¦æ‰§è¡Œ`add()ã€set()ã€remove()`çš„è¯ï¼Œé‚£æ˜¯æ¯”è¾ƒè€—è´¹å†…å­˜çš„ã€‚
  - å› ä¸ºæˆ‘ä»¬çŸ¥é“æ¯æ¬¡`add()ã€set()ã€remove()`è¿™äº›å¢åˆ æ”¹æ“ä½œéƒ½è¦**å¤åˆ¶ä¸€ä¸ªæ•°ç»„**å‡ºæ¥ã€‚
- **æ•°æ®ä¸€è‡´æ€§**ï¼šCopyOnWriteå®¹å™¨**åªèƒ½ä¿è¯æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§ï¼Œä¸èƒ½ä¿è¯æ•°æ®çš„å®æ—¶ä¸€è‡´æ€§**ã€‚
  - ä»ä¸Šé¢çš„ä¾‹å­ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼Œæ¯”å¦‚çº¿ç¨‹Aåœ¨è¿­ä»£CopyOnWriteArrayListå®¹å™¨çš„æ•°æ®ã€‚çº¿ç¨‹Båœ¨çº¿ç¨‹Aè¿­ä»£çš„é—´éš™ä¸­å°†CopyOnWriteArrayListéƒ¨åˆ†çš„æ•°æ®ä¿®æ”¹äº†(å·²ç»è°ƒç”¨`setArray()`äº†)ã€‚ä½†æ˜¯çº¿ç¨‹Aè¿­ä»£å‡ºæ¥çš„æ˜¯åŸæœ‰çš„æ•°æ®ã€‚

#### 2.1.5CopyOnWriteSet

CopyOnWriteArraySetçš„åŸç†å°±æ˜¯CopyOnWriteArrayListã€‚

```
    private final CopyOnWriteArrayList<E> al;

    public CopyOnWriteArraySet() {
        al = new CopyOnWriteArrayList<E>();
    }
```

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnyzin9wzj3073073mx3.jpg)

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnyqyo2bnj3076076dga.jpg)

å¦‚æœâ½‚æ¡£ä¸­æœ‰ä»»ä½•çš„ä¸æ‡‚çš„é—®é¢˜ï¼Œéƒ½å¯ä»¥ç›´æ¥æ¥æ‰¾æˆ‘è¯¢é—®ï¼Œæˆ‘ä¹æ„å¸®åŠ©ä½ ä»¬ï¼å¾®ä¿¡æœ**Java3y**å…¬ä¼—å·æœ‰æˆ‘çš„è”ç³»â½…å¼ã€‚æ›´å¤š**åŸåˆ›**æŠ€æœ¯â½‚ç« å¯å…³æ³¨æˆ‘çš„GitHubï¼šhttps://github.com/ZhongFuCheng3y/3y

# åä¸€ã€Javaé›†åˆé¢è¯•é¢˜

 

Javaå®¹å™¨å¯åˆ†ä¸ºä¸¤å¤§ç±»ï¼š

- Collection
  - List
    - **ArrayList**
    - LinkedList
    - Vector(äº†è§£ï¼Œå·²è¿‡æ—¶)
  - Set
    - **HashSet**
      - LinkedHashSet
    - TreeSet
- Map
  - **HashMap**
    - LinkedHashMap
  - TreeMap
  - ConcurrentHashMap
  - Hashtable(äº†è§£ï¼Œï¼Œå·²è¿‡æ—¶)

ç€é‡æ ‡å‡ºçš„é‚£äº›å°±æ˜¯æˆ‘ä»¬**ç”¨å¾—æœ€å¤š**çš„å®¹å™¨ã€‚

 

## ä¸€ã€ArrayListå’ŒVectorçš„åŒºåˆ«

**å…±åŒç‚¹ï¼š**

- è¿™ä¸¤ä¸ªç±»éƒ½å®ç°äº†Listæ¥å£ï¼Œå®ƒä»¬éƒ½æ˜¯**æœ‰åº**çš„é›†åˆ(å­˜å‚¨æœ‰åº)ï¼Œ**åº•å±‚æ˜¯æ•°ç»„**ã€‚æˆ‘ä»¬å¯ä»¥æŒ‰ä½ç½®ç´¢å¼•å·å–å‡ºæŸä¸ªå…ƒç´ ï¼Œ**å…è®¸å…ƒç´ é‡å¤å’Œä¸ºnull**ã€‚

**åŒºåˆ«ï¼š**

- **åŒæ­¥æ€§ï¼š**
  - ArrayListæ˜¯éåŒæ­¥çš„
  - Vectoræ˜¯åŒæ­¥çš„
  - å³ä¾¿éœ€è¦åŒæ­¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Collectionså·¥å…·ç±»æ¥æ„å»ºå‡ºåŒæ­¥çš„ArrayListè€Œä¸ç”¨Vector
- **æ‰©å®¹å¤§å°ï¼š**
  - Vectorå¢é•¿åŸæ¥çš„ä¸€å€ï¼ŒArrayListå¢é•¿åŸæ¥çš„0.5å€

## äºŒã€HashMapå’ŒHashtableçš„åŒºåˆ«

**å…±åŒç‚¹ï¼š**

- ä»å­˜å‚¨ç»“æ„å’Œå®ç°æ¥è®²åŸºæœ¬ä¸Šéƒ½æ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯å®ç°Mapæ¥å£~

**åŒºåˆ«ï¼š**

- **åŒæ­¥æ€§ï¼š**
  - HashMapæ˜¯éåŒæ­¥çš„
  - Hashtableæ˜¯åŒæ­¥çš„
  - éœ€è¦åŒæ­¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾€å¾€ä¸ä½¿ç”¨ï¼Œè€Œä½¿ç”¨ConcurrentHashMap[ConcurrentHashMapåŸºäºJDK1.8æºç å‰–æ](https://mp.weixin.qq.com/s?__biz=MzI4Njg5MDA5NA==&mid=2247484161&idx=1&sn=6f52fb1f714f3ffd2f96a5ee4ebab146&chksm=ebd74200dca0cb16288db11f566cb53cafc580e08fe1c570e0200058e78676f527c014ffef41#rd)
- **æ˜¯å¦å…è®¸ä¸ºnullï¼š**
  - HashMapå…è®¸ä¸ºnull
  - Hashtableä¸å…è®¸ä¸ºnull
- **containsæ–¹æ³•**
  - è¿™çŸ¥è¯†ç‚¹æ˜¯åœ¨ç‰›å®¢ç½‘åˆ·åˆ°çš„ï¼Œæ²¡æƒ³åˆ°è¿™ç§é¢˜è¿˜ä¼šæœ‰(æˆ‘ä¸å¤ªå–œæ¬¢)....
  - Hashtableæœ‰containsæ–¹æ³•
  - HashMapæŠŠHashtableçš„containsæ–¹æ³•å»æ‰äº†ï¼Œæ”¹æˆäº†containsValueå’ŒcontainsKey
- **ç»§æ‰¿ä¸åŒï¼š**
  - HashMap<K,V> extends AbstractMap<K,V>
  - public class Hashtable<K,V> extends Dictionary<K,V>

## ä¸‰ã€Listå’ŒMapçš„åŒºåˆ«

**å…±åŒç‚¹ï¼š**

- éƒ½æ˜¯Javaå¸¸ç”¨çš„å®¹å™¨ï¼Œéƒ½æ˜¯æ¥å£(psï¼šå†™å‡ºæ¥æ„Ÿè§‰å¥½åƒå’Œæ²¡å†™ä¸€æ ·.....)

**ä¸åŒç‚¹ï¼š**

- **å­˜å‚¨ç»“æ„ä¸åŒ**ï¼š
  - Listæ˜¯å­˜å‚¨å•åˆ—çš„é›†åˆ
  - Mapå­˜å‚¨çš„æ˜¯key-valueé”®å€¼å¯¹çš„é›†åˆ
- **å…ƒç´ æ˜¯å¦å¯é‡å¤**ï¼š
  - Listå…è®¸å…ƒç´ é‡å¤
  - Mapä¸å…è®¸keyé‡å¤
- **æ˜¯å¦æœ‰åº**ï¼š
  - Listé›†åˆæ˜¯æœ‰åºçš„(å­˜å‚¨æœ‰åº)
  - Mapé›†åˆæ˜¯æ— åºçš„(å­˜å‚¨æ— åº)

## å››ã€Seté‡Œçš„å…ƒç´ æ˜¯ä¸èƒ½é‡å¤çš„ï¼Œé‚£ä¹ˆç”¨ä»€ä¹ˆæ–¹æ³•æ¥åŒºåˆ†é‡å¤ä¸å¦å‘¢? æ˜¯ç”¨==è¿˜æ˜¯equals()?

æˆ‘ä»¬çŸ¥é“Seté›†åˆå®é™…**å¤§éƒ½ä½¿ç”¨çš„æ˜¯Mapé›†åˆçš„putæ–¹æ³•æ¥æ·»åŠ å…ƒç´ **ã€‚

ä»¥HashSetä¸ºä¾‹ï¼ŒHashSeté‡Œçš„å…ƒç´ ä¸èƒ½é‡å¤ï¼Œåœ¨æºç (HashMap)æ˜¯è¿™æ ·ä½“ç°çš„ï¼š

```
  
  // 1. å¦‚æœkey ç›¸ç­‰  
    if (p.hash == hash &&
        ((k = p.key) == key || (key != null && key.equals(k))))
        e = p;
  // 2. ä¿®æ”¹å¯¹åº”çš„value
     if (e != null) { // existing mapping for key
            V oldValue = e.value;
            if (!onlyIfAbsent || oldValue == null)
                e.value = value;
            afterNodeAccess(e);
            return oldValue;
       }
```

æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œå¦‚æœkey(ä¹Ÿå¯¹åº”çš„Seté›†åˆçš„å…ƒç´ )ç›¸ç­‰ï¼Œé‚£ä¹ˆåˆ™ä¿®æ”¹valueå€¼ã€‚è€Œåœ¨Seté›†åˆä¸­ï¼Œvalueå€¼ä»…ä»…æ˜¯ä¸€ä¸ªObjectå¯¹è±¡ç½¢äº†(**è¯¥å¯¹è±¡å¯¹Setæœ¬èº«è€Œè¨€æ˜¯æ— ç”¨çš„**)ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼šSeté›†åˆå¦‚æœæ·»åŠ çš„å…ƒç´ ç›¸åŒæ—¶ï¼Œ**æ˜¯æ ¹æœ¬æ²¡æœ‰æ’å…¥çš„(ä»…ä¿®æ”¹äº†ä¸€ä¸ªæ— ç”¨çš„valueå€¼)**ï¼ä»æºç (HashMap)ä¸­ä¹Ÿçœ‹å‡ºæ¥ï¼Œ**==å’Œequals()æ–¹æ³•éƒ½æœ‰ä½¿ç”¨**ï¼

## äº”ã€Collectionå’ŒCollectionsçš„åŒºåˆ«

1. Collectionæ˜¯é›†åˆçš„ä¸Šçº§**æ¥å£**ï¼Œç»§æ‰¿å®ƒçš„æœ‰Setå’ŒListæ¥å£
2. Collectionsæ˜¯é›†åˆçš„**å·¥å…·ç±»**ï¼Œæä¾›äº†ä¸€ç³»åˆ—çš„é™æ€æ–¹æ³•å¯¹é›†åˆçš„æœç´¢ã€æŸ¥æ‰¾ã€åŒæ­¥ç­‰æ“ä½œ

## å…­ã€è¯´å‡ºArrayList,LinkedListçš„å­˜å‚¨æ€§èƒ½å’Œç‰¹æ€§

ArrayListçš„åº•å±‚æ˜¯æ•°ç»„ï¼ŒLinkedListçš„åº•å±‚æ˜¯åŒå‘é“¾è¡¨ã€‚

- ArrayListå®ƒæ”¯æŒä»¥è§’æ ‡ä½ç½®è¿›è¡Œç´¢å¼•å‡ºå¯¹åº”çš„å…ƒç´ (éšæœºè®¿é—®)ï¼Œè€ŒLinkedListåˆ™éœ€è¦éå†æ•´ä¸ªé“¾è¡¨æ¥è·å–å¯¹åº”çš„å…ƒç´ ã€‚å› æ­¤**ä¸€èˆ¬æ¥è¯´ArrayListçš„è®¿é—®é€Ÿåº¦æ˜¯è¦æ¯”LinkedListè¦å¿«çš„**
- ArrayListç”±äºæ˜¯æ•°ç»„ï¼Œå¯¹äºåˆ é™¤å’Œä¿®æ”¹è€Œè¨€æ¶ˆè€—æ˜¯æ¯”è¾ƒå¤§(å¤åˆ¶å’Œç§»åŠ¨æ•°ç»„å®ç°)ï¼ŒLinkedListæ˜¯åŒå‘é“¾è¡¨åˆ é™¤å’Œä¿®æ”¹åªéœ€è¦ä¿®æ”¹å¯¹åº”çš„æŒ‡é’ˆå³å¯ï¼Œæ¶ˆè€—æ˜¯å¾ˆå°çš„ã€‚å› æ­¤**ä¸€èˆ¬æ¥è¯´LinkedListçš„å¢åˆ é€Ÿåº¦æ˜¯è¦æ¯”ArrayListè¦å¿«çš„**

### 6.1æ‰©å±•ï¼š

ArrayListçš„å¢åˆ **æœªå¿…**å°±æ˜¯æ¯”LinkedListè¦æ…¢ã€‚

- å¦‚æœå¢åˆ éƒ½æ˜¯åœ¨**æœ«å°¾**æ¥æ“ä½œã€æ¯æ¬¡è°ƒç”¨çš„éƒ½æ˜¯remove()å’Œadd()ã€‘ï¼Œæ­¤æ—¶ArrayListå°±ä¸éœ€è¦ç§»åŠ¨å’Œå¤åˆ¶æ•°ç»„æ¥è¿›è¡Œæ“ä½œäº†ã€‚å¦‚æœæ•°æ®é‡æœ‰ç™¾ä¸‡çº§çš„æ—¶ï¼Œ**é€Ÿåº¦æ˜¯ä¼šæ¯”LinkedListè¦å¿«çš„**ã€‚(æˆ‘æµ‹è¯•è¿‡)
- å¦‚æœ**åˆ é™¤æ“ä½œ**çš„ä½ç½®æ˜¯åœ¨**ä¸­é—´**ã€‚ç”±äºLinkedListçš„æ¶ˆè€—ä¸»è¦æ˜¯åœ¨éå†ä¸Šï¼ŒArrayListçš„æ¶ˆè€—ä¸»è¦æ˜¯åœ¨ç§»åŠ¨å’Œå¤åˆ¶ä¸Š(åº•å±‚è°ƒç”¨çš„æ˜¯arraycopy()æ–¹æ³•ï¼Œæ˜¯nativeæ–¹æ³•)ã€‚
  - LinkedListçš„éå†é€Ÿåº¦æ˜¯è¦æ…¢äºArrayListçš„å¤åˆ¶ç§»åŠ¨é€Ÿåº¦çš„
  - å¦‚æœæ•°æ®é‡æœ‰ç™¾ä¸‡çº§çš„æ—¶ï¼Œ**è¿˜æ˜¯ArrayListè¦å¿«**ã€‚(æˆ‘æµ‹è¯•è¿‡)

## ä¸ƒã€Enumerationå’ŒIteratoræ¥å£çš„åŒºåˆ«

è¿™ä¸ªæˆ‘åœ¨å‰é¢çš„æ–‡ç« ä¸­ä¹Ÿæ²¡æœ‰è¯¦ç»†å»è®²å®ƒä»¬ï¼Œåªæ˜¯å¤§æ¦‚çŸ¥é“çš„æ˜¯ï¼šIteratoræ›¿ä»£äº†Enumerationï¼ŒEnumerationæ˜¯ä¸€ä¸ªæ—§çš„è¿­ä»£å™¨äº†ã€‚

ä¸Enumerationç›¸æ¯”ï¼ŒIteratoræ›´åŠ å®‰å…¨ï¼Œ**å› ä¸ºå½“ä¸€ä¸ªé›†åˆæ­£åœ¨è¢«éå†çš„æ—¶å€™ï¼Œå®ƒä¼šé˜»æ­¢å…¶å®ƒçº¿ç¨‹å»ä¿®æ”¹é›†åˆ**ã€‚

- æˆ‘ä»¬åœ¨åšç»ƒä¹ çš„æ—¶å€™ï¼Œè¿­ä»£æ—¶ä¼šä¸ä¼šç»å¸¸å‡ºé”™ï¼ŒæŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸ï¼Œè¯´æˆ‘ä»¬åœ¨éå†çš„æ—¶å€™è¿˜åœ¨ä¿®æ”¹å…ƒç´ ã€‚
- è¿™å…¶å®å°±æ˜¯fail-fastæœºåˆ¶~å…·ä½“å¯å‚è€ƒåšæ–‡ï¼šhttps://blog.csdn.net/panweiwei1994/article/details/77051261

**åŒºåˆ«æœ‰ä¸‰ç‚¹ï¼š**

- Iteratorçš„æ–¹æ³•åæ¯”Enumerationæ›´ç§‘å­¦
- Iteratoræœ‰fail-fastæœºåˆ¶ï¼Œæ¯”Enumerationæ›´å®‰å…¨
- Iteratorèƒ½å¤Ÿåˆ é™¤å…ƒç´ ï¼ŒEnumerationå¹¶ä¸èƒ½åˆ é™¤å…ƒç´ 

## å…«ã€ListIteratoræœ‰ä»€ä¹ˆç‰¹ç‚¹

- ListIterator**ç»§æ‰¿äº†**Iteratoræ¥å£ï¼Œå®ƒç”¨äº**éå†Listé›†åˆçš„å…ƒç´ **ã€‚
- ListIteratorå¯ä»¥å®ç°**åŒå‘éå†,æ·»åŠ å…ƒç´ ï¼Œè®¾ç½®å…ƒç´ **

çœ‹ä¸€ä¸‹æºç çš„æ–¹æ³•å°±çŸ¥é“äº†ï¼š

![img](https://user-gold-cdn.xitu.io/2018/4/16/162cc35a911636db?w=552&h=256&f=png&s=5964)

## ä¹ã€å¹¶å‘é›†åˆç±»æ˜¯ä»€ä¹ˆï¼Ÿ

Java1.5å¹¶å‘åŒ…ï¼ˆjava.util.concurrentï¼‰**åŒ…å«çº¿ç¨‹å®‰å…¨é›†åˆç±»ï¼Œå…è®¸åœ¨è¿­ä»£æ—¶ä¿®æ”¹é›†åˆ**ã€‚

- UtilsåŒ…ä¸‹çš„é›†åˆè¿­ä»£å™¨è¢«è®¾è®¡ä¸ºfail-fastçš„ï¼Œä¼šæŠ›å‡ºConcurrentModificationExceptionã€‚ä½†java.util.concurrentçš„å¹¶ä¸ä¼šï¼Œæ„Ÿè°¢è¯„è®ºåŒºæé†’~
- ä¸€éƒ¨åˆ†ç±»ä¸ºï¼š
  - CopyOnWriteArrayList
  - ConcurrentHashMap
  - CopyOnWriteArraySet

## åã€Javaä¸­HashMapçš„keyå€¼è¦æ˜¯ä¸ºç±»å¯¹è±¡åˆ™è¯¥ç±»éœ€è¦æ»¡è¶³ä»€ä¹ˆæ¡ä»¶ï¼Ÿ

**éœ€è¦åŒæ—¶é‡å†™è¯¥ç±»çš„hashCode()æ–¹æ³•å’Œå®ƒçš„equals()æ–¹æ³•**ã€‚

- ä»æºç å¯ä»¥å¾—çŸ¥ï¼Œåœ¨æ’å…¥å…ƒç´ çš„æ—¶å€™æ˜¯**å…ˆç®—å‡ºè¯¥å¯¹è±¡çš„hashCode**ã€‚å¦‚æœhashcodeç›¸ç­‰è¯çš„ã€‚é‚£ä¹ˆè¡¨æ˜è¯¥å¯¹è±¡æ˜¯å­˜å‚¨åœ¨åŒä¸€ä¸ªä½ç½®ä¸Šçš„ã€‚
- å¦‚æœè°ƒç”¨equals()æ–¹æ³•ï¼Œ**ä¸¤ä¸ªkeyç›¸åŒ**ï¼Œåˆ™**æ›¿æ¢å…ƒç´ **
- å¦‚æœè°ƒç”¨equals()æ–¹æ³•ï¼Œ**ä¸¤ä¸ªkeyä¸ç›¸åŒ**ï¼Œåˆ™è¯´æ˜è¯¥**hashCodeä»…ä»…æ˜¯ç¢°å·§ç›¸åŒ**ï¼Œæ­¤æ—¶æ˜¯æ•£åˆ—å†²çªï¼Œå°†æ–°å¢çš„å…ƒç´ æ”¾åœ¨æ¡¶å­ä¸Š

ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä¼šè®¤ä¸ºï¼š**åªè¦ä¸¤ä¸ªå¯¹è±¡çš„æˆå‘˜å˜é‡çš„å€¼æ˜¯ç›¸ç­‰çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡æ˜¯ç›¸ç­‰çš„**ï¼å› ä¸ºï¼ŒObjectåº•å±‚æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„åœ°å€ï¼Œè€Œå¯¹æˆ‘ä»¬å¼€å‘æ¥è¯´è¿™æ ·çš„æ„ä¹‰å¹¶ä¸å¤§~è¿™ä¹Ÿå°±ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦é‡å†™`equals()`æ–¹æ³•

é‡å†™äº†equals()æ–¹æ³•ï¼Œå°±è¦é‡å†™hashCode()çš„æ–¹æ³•ã€‚å› ä¸º**equals()è®¤å®šäº†è¿™ä¸¤ä¸ªå¯¹è±¡ç›¸åŒ**ï¼Œè€Œ**åŒä¸€ä¸ªå¯¹è±¡è°ƒç”¨hashCode()æ–¹æ³•æ—¶**ï¼Œæ˜¯åº”è¯¥è¿”å›ç›¸åŒçš„å€¼çš„ï¼

 

## åä¸€ã€ä¸Javaé›†åˆæ¡†æ¶ç›¸å…³çš„æœ‰å“ªäº›æœ€å¥½çš„å®è·µ

1. **æ ¹æ®éœ€è¦**ç¡®å®šé›†åˆçš„ç±»å‹ã€‚å¦‚æœæ˜¯å•åˆ—çš„é›†åˆï¼Œæˆ‘ä»¬è€ƒè™‘ç”¨Collectionä¸‹çš„å­æ¥å£ArrayListå’ŒSetã€‚å¦‚æœæ˜¯æ˜ å°„ï¼Œæˆ‘ä»¬å°±è€ƒè™‘ä½¿ç”¨Map~
2. ç¡®å®šå®Œæˆ‘ä»¬çš„é›†åˆç±»å‹ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥**ç¡®å®šä½¿ç”¨è¯¥é›†åˆç±»å‹ä¸‹çš„å“ªä¸ªå­ç±»**~æˆ‘è®¤ä¸ºå¯ä»¥ç®€å•åˆ†æˆå‡ ä¸ªæ­¥éª¤ï¼š
   - æ˜¯å¦éœ€è¦åŒæ­¥
     - å»æ‰¾çº¿ç¨‹å®‰å…¨çš„é›†åˆç±»ä½¿ç”¨
   - è¿­ä»£æ—¶æ˜¯å¦éœ€è¦æœ‰åº(æ’å…¥é¡ºåºæœ‰åº)
     - å»æ‰¾LinkedåŒå‘åˆ—è¡¨ç»“æ„çš„
   - æ˜¯å¦éœ€è¦æ’åº(è‡ªç„¶é¡ºåºæˆ–è€…æ‰‹åŠ¨æ’åº)
     - å»æ‰¾Treeçº¢é»‘æ ‘ç±»å‹çš„(JDK1.8) 
3. ä¼°ç®—å­˜æ”¾é›†åˆçš„æ•°æ®é‡æœ‰å¤šå¤§ï¼Œæ— è®ºæ˜¯Listè¿˜æ˜¯Mapï¼Œå®ƒä»¬å®ç°åŠ¨æ€å¢é•¿ï¼Œéƒ½æ˜¯æœ‰æ€§èƒ½æ¶ˆè€—çš„ã€‚åœ¨åˆå§‹é›†åˆçš„æ—¶å€™ç»™å‡ºä¸€ä¸ª**åˆç†çš„å®¹é‡**ä¼šå‡å°‘åŠ¨æ€å¢é•¿æ—¶çš„æ¶ˆè€—~
4. **ä½¿ç”¨æ³›å‹**ï¼Œé¿å…åœ¨è¿è¡Œæ—¶å‡ºç°ClassCastException
5. å°½å¯èƒ½ä½¿ç”¨Collectionså·¥å…·ç±»ï¼Œæˆ–è€…è·å–åªè¯»ã€åŒæ­¥æˆ–ç©ºçš„é›†åˆï¼Œ**è€Œéç¼–å†™è‡ªå·±çš„å®ç°**ã€‚å®ƒå°†ä¼šæä¾›ä»£ç é‡ç”¨æ€§ï¼Œå®ƒæœ‰ç€æ›´å¥½çš„ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§

## åäºŒã€ArrayListé›†åˆåŠ å…¥1ä¸‡æ¡æ•°æ®ï¼Œåº”è¯¥æ€ä¹ˆæé«˜æ•ˆç‡

ArrayListçš„é»˜è®¤åˆå§‹å®¹é‡ä¸º10ï¼Œè¦æ’å…¥å¤§é‡æ•°æ®çš„æ—¶å€™éœ€è¦ä¸æ–­æ‰©å®¹ï¼Œè€Œæ‰©å®¹æ˜¯éå¸¸å½±å“æ€§èƒ½çš„ã€‚å› æ­¤ï¼Œç°åœ¨æ˜ç¡®äº†10ä¸‡æ¡æ•°æ®äº†ï¼Œæˆ‘ä»¬å¯ä»¥**ç›´æ¥åœ¨åˆå§‹åŒ–çš„æ—¶å€™å°±è®¾ç½®ArrayListçš„å®¹é‡**ï¼

è¿™æ ·å°±å¯ä»¥æé«˜æ•ˆç‡äº†~

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnmr7fsc1j3073073aa5.jpg)

![img](https://tva1.sinaimg.cn/large/00831rSTly1gcnyqyo2bnj3076076dga.jpg)

å¦‚æœâ½‚æ¡£ä¸­æœ‰ä»»ä½•çš„ä¸æ‡‚çš„é—®é¢˜ï¼Œéƒ½å¯ä»¥ç›´æ¥æ¥æ‰¾æˆ‘è¯¢é—®ï¼Œæˆ‘ä¹æ„å¸®åŠ©ä½ ä»¬ï¼å¾®ä¿¡æœ**Java3y**å…¬ä¼—å·æœ‰æˆ‘çš„è”ç³»â½…å¼ã€‚æ›´å¤š**åŸåˆ›**æŠ€æœ¯â½‚ç« å¯å…³æ³¨æˆ‘çš„GitHubï¼šhttps://github.com/ZhongFuCheng3y/3y